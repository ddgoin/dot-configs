define(["core/Logger","core/vendor/DropletJS.Class.min","core/vendor/DropletJS.PubSub.min","components/Popup/PopupView","components/Popup/PopupModel"],function(e,t,n,r,i){return t.create({view:null,model:null,construct:function(){this.model=new i,this.view=new r(this.model),this.addListeners()},init:function(){this.model.init(),this.view.init()},addListeners:function(){var e=this;n.listen("PopupView.button.clicked",function(t,n){switch(n.button){case"help":case"options":e.openPage(n.button);break;case"nuclearOption":case"blockedSites":e.openPage("options",n.button);break;case"close":window.close();break;case"addToList":e.addToList(n.domain,n.listType)}})},openPage:function(e,t){var n=chrome.extension.getURL(e+".html")+(t?"#"+t:"");chrome.tabs.create({url:n})},addToList:function(e,t){var r=!1;e!==""&&(t=="black"?r=bg().ListManager.addToBlacklist(e):r=bg().ListManager.addToWhitelist(e)),n.publish("PopupController.domain.added",{success:r})}})});