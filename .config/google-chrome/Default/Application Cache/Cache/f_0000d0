Type.registerNamespace("_c");_c.$1Ft=function(){};_c.$1Ft.registerInterface("_c.$1Ft");_c.$1Fs=function(){};_c.$1Fs.registerInterface("_c.$1Fs");_c.$jl=function(){};_c.$jl.registerInterface("_c.$jl");_c.$H2=function(n,t){this.$2kG=7;_c.$H2.initializeBase(this,[n,t])};function $6lk(n,t){_a.$4.$J(t,"folderId");for(var i=!0,u=n.get_$uG(),f=n.get_$uG(),e=f.length,r=0;r<e;++r){var o=f[r];if(o.FolderId===t){_js.Trace.logWarning(_c.$9U.$Lg,"Trying to add an already existing folder to the SyncFolderSetting, folderId = {0}",t);return i}}if(n.get_$6bd()<_h.$27.$jI){Array.add(u,new SyncFolderListItem(t,_a.$7.$EZ(_a.$7.get_$29())));n.set_$uG(u)}else{i=!1;$2gk(n,new _g.$3S(t));_js.Trace.logWarning(_c.$9U.$Lg,"Not adding folder to the sync list because syncing max ({0}) number of email folders for this client.",_h.$27.$jI);n.$460("",_a.$g.$8s,!1,!0)}return i}function $4hy(n,t,i,r){var u=t.$R2(i);u&&u.set_$6aH(r)}function $4hx(n,t,i,r,u,f){f.val=0;var h=0;var e=n.$5QK(r,i);if(t){for(var o=0;o<t.length;o++){var s=t[o];if(($6lj(n,s)||!u)&&(r===-1||$3Vc(n,s.FolderId,r))){$4iK(n,i,s.FolderId,e);h++}}f.val=t.length-h}_a.$4.$9n(!!e,"activelySyncingFolderListForModule can never be null. At the least it should have default list of folders.");return e}function $6lj(n,t){var i=_a.$7.$42(t.LastAccessTime);var r=_a.$7.get_$29();var u=new _a.$ML(i,r);return Math.floor(u.get_$uP())<=n.$2kG}function $6li(n,t,i,r,u){var f=new _a.$ML(t.$4F(),i.$4F());if(f.get_$uP()>n.$2kG){u(!0);var e=new _c.$14p;e.set_$982(f.get_$uP());r.$AN(e);return}u(!1)}_c.$H2.prototype={$1lQ:null,get_$uG:function(){this.$1lQ||(this.$1lQ=_a.$7G.$A4Z(Array,this.$4t,"SyncFolders.Mail.AutoSelected"));this.$1lQ||(this.$1lQ=new Array(0));return this.$1lQ},set_$uG:function(n){this.$4t.$DI("SyncFolders.Mail.AutoSelected",JsonParser.serialize(n));this.$1lQ=n;return n},get_$6bd:function(){var n;var t,i;return(i=this.$7r7(null,-1,t={val:n}),n=t.val,i).length},$3KU:function(){_js.Trace.logInfo(_c.$9U.$Lg,"Remove AutoSelectedMailSyncFolders settings");for(var t=this.get_$uG(),i=t.length,n=0;n<i;++n){var r=t[n];$2gk(this,new _g.$3S(r.FolderId))}this.$4t.$Cl("SyncFolders.Mail.AutoSelected")},$7r7:function(n,t,i){return $4hx(this,this.get_$uG(),n,t,!0,i)},$7Nl:function(n,t,i){_a.$4.$J(n,"folderId");_a.$4.$J(t,"successCallback");$6lk(this,n)?t():i(Error.create("Failed to add folder into the sync list"))},$7yM:function(n){var t;var i,r;return r=$4hx(this,this.get_$uG(),null,n,!1,i={val:t}),t=i.val,r},$9zn:function(n,t){_a.$4.$J(n,"folder");for(var i=this.get_$uG(),u=0;u<i.length;u++){var e=i[u];if(e.FolderId===n.get_$r().Id){var f=_a.$7.$42(e.LastAccessTime);var r=_a.$7.get_$29();var o=new _a.$ML(f.$4F(),r.$4F());if(o.get_$uP()>this.$2kG&&this.get_$6bd()>=_h.$27.$jI){_js.Trace.logInfo(_c.$9U.$Lg,"Already syncing {0} email folders for this client. This is the max allowed limit.",_h.$27.$jI);Array.removeAt(i,u);this.set_$uG(i);$2gk(this,n.get_$r());t(!1)}else if(r.get_$3l()!==f.get_$3l()||r.get_$2z()!==f.get_$2z()||r.get_$51()!==f.get_$51()){i[u]=new SyncFolderListItem(n.get_$r().Id,_a.$7.$EZ(r));this.set_$uG(i);$6li(this,f,r,_a.$g.$8s,t)}else t(!1);break}}},$2Lz:function(n,t,i){_a.$4.$J(i,"completeCallback");var r;var u,f;var e=(f=this.$7r7(t,n,u={val:r}),r=u.val,f);i(e)},$5iG:function(n,t,i){this.$460(n,t,i)},$6fV:function(n,t,i){_a.$4.$J(n,"allFolderIds");_a.$4.$J(t,"successCallback");_a.$4.$J(i,"errorCallback");for(var f=!1,u=this.get_$uG(),e=[],r=0;r<u.length;r++)u[r].FolderId in n?Array.add(e,u[r]):f=!0;if(f){_js.Trace.logWarning(_c.$9U.$Lg,"SyncFolderSetting needs to be updated based on folder hierarchy sync results.");this.set_$uG(e)}t()},$6Tf:function(n){_a.$4.$J(n,"folderTable");for(var u=_h.$27.get_$2rH(),r=u,f=r.length,t=0;t<f;++t){var e=r[t];$4hy(this,n,new _g.$3S(e),2)}for(var i=0;i<this.get_$uG().length;i++){var o=this.$1lQ[i];$4hy(this,n,new _g.$3S(o.FolderId),1)}},$460:function(n,t,i,r){var u=new _c.$10S;var f;var e,o;var s=(o=this.$7r7(null,-1,e={val:f}),f=e.val,o);u.set_$69F(f);u.set_$53I(s.length);u.set_$jJ(n);u.set_$5jy(_h.$27.$jI);u.set_$5a8($6(i)?!1:i);u.set_$5jz($6(r)?!1:r);u.set_$6fH(!1);t.$AN(u)}};_c.$11v=function(n,t,i,r){_c.$11v.initializeBase(this,[8,13,n,!1,t]);this.$5Xp=i;this.$1uU=r;this.$4s=String.format("{0}:{1}","BackgroundSyncContextId",this.$2k)};_c.$11v.prototype={$5Xp:null,$1uU:!1,$4s:null,get_$1y:function(){return this.$4s},get_$7h8:function(){return!1},get_$5PD:function(){return this.$1uU},get_$9hk:function(){return this.$1uU},get_$86M:function(){return this.$5Xp},$4Vf:function(n){return n.$9ms(this.$2k)}};_c.$u6=function(n,t,i){_c.$u6.initializeBase(this);this.FolderId=n;this.$2bY=t;this.$4HC=i;this.id="BackgroundSyncNotification";this.type=this.id;this.$Dn=-1;$6ll(this);_js.Trace.logInfo(_a.$0.$3fF,"New BackgroundSyncNotification folderId:{0}, senderId:{1}, needSyncItemInfo:{2}",this.FolderId,this.$2bY,this.$4HC)};function $6ll(n){}_c.$u6.prototype={$2bY:null,$4HC:!1,$Dn:0};_c.$9U=function(n,t){_a.$4.$J(n,"localStorageAdapter");_a.$4.$J(t,"eventAggregator");this.$4t=n;this.$M=t};function $3Vc(n,t,i){var r=_g.$V.get_$I().get_$5M().$Zq(new _g.$3S(t));if(r.$BV===1&&(i===11||i===4))return!0;else if((r.$BV===2||r.$BV===3)&&(i===12||i===5))return!0;return!1}function $4iK(n,t,i,r){t&&i===t.Id?Array.insert(r,0,i):Array.add(r,i)}function $2gk(n,t){var i=_g.$V.get_$I().get_$5M().$Zq(t);var r=-1;i.$BV===1?r=4:(i.$BV===2||i.$BV===3)&&(r=5);n.$M.$9Yf(_h.$lH,new _h.$lH(r,new _bc.$Hz(t)))}_c.$9U.prototype={$4t:null,$M:null,$5QK:function(n,t){for(var r=new Array(0),f=_h.$27.get_$2rH(),e=f.length,u=0;u<e;++u){var i=f[u];(n===-1||$3Vc(this,i,n))&&(t&&i===t.Id?Array.insert(r,0,i):Array.add(r,i))}return r}};_c.$1DO=function(n,t){_c.$1DO.initializeBase(this,[n,t,"BackgroundSyncNotification"])};_c.$1DO.prototype={$81Y:function(n,t,i){var r=n;var u=new _c.$11v(r.FolderId,this.$3J,r.$2bY,r.$4HC);if(this.$4K.$2cJ(u,!0))$2CY(this,r,u);else{_js.Trace.logInfo(_a.$0.$5q,String.format("Rejecting BackgroundSyncNotification with FolderId : {0}.",r.FolderId));i(n)}}};_c.$10u=function(n,t){_c.$10u.initializeBase(this,[n,t])};_c.$10u.prototype={$fK:null,get_$1Mj:function(){this.$fK||(this.$fK=_a.$7G.$A4Z(Array,this.$4t,"SyncFolders.Mail.UserSelected"));this.$fK||(this.$fK=new Array(0));return this.$fK},set_$1Mj:function(n){if(n){this.$4t.$DI("SyncFolders.Mail.UserSelected",JsonParser.serialize(n));this.$fK=n}return n},$3KU:function(){_js.Trace.logInfo(_c.$9U.$Lg,"Remove UserSelectedSyncFolders settings");for(var t=this.get_$1Mj(),i=t.length,n=0;n<i;++n){var r=t[n];$2gk(this,new _g.$3S(r))}this.$4t.$Cl("SyncFolders.Mail.UserSelected")},$7r7:function(n,t,i){for(var u=this.$5QK(t,n),f=this.get_$1Mj(),o=f.length,r=0;r<o;++r){var e=f[r];(t===-1||$3Vc(this,e,t))&&$4iK(this,n,e,u)}i.val=0;return u},$7yM:function(n){var t;var i,r;return r=this.$7r7(null,n,i={val:t}),t=i.val,r},$5iG:function(n,t,i){var r=new _c.$10S;r.set_$69F(this.get_$1Mj().length);r.set_$53I(this.get_$1Mj().length);r.set_$jJ(n);r.set_$5jy(_h.$27.$jI);r.set_$5a8($6(i)?!1:i);r.set_$5jz(!1);r.set_$6fH(!0);t.$AN(r)},$2Lz:function(n,t,i){_a.$4.$J(i,"completeCallback");var r;var u,f;var e=(f=this.$7r7(t,n,u={val:r}),r=u.val,f);i(e)},$6fV:function(n,t,i){_a.$4.$J(n,"allFolderIds");_a.$4.$J(t,"successCallback");_a.$4.$J(i,"errorCallback");for(var u=!1,f=[],e=this.get_$1Mj(),s=e.length,r=0;r<s;++r){var o=e[r];o in n?Array.add(f,o):u=!0}if(u){_js.Trace.logWarning(_c.$9U.$Lg,"SyncFolderSetting needs to be updated based on folder hierarchy sync results.");this.set_$1Mj(f)}t()}};_c.$zQ=function(n){_c.$zQ.initializeBase(this,[5,0,!0,n])};_c.$zQ.prototype={get_$1y:function(){return"Refresh"},get_$7h8:function(){return!1},$4Vf:function(n){return n.$9mz()}};_c.$1Jl=function(n,t,i,r,u){_c.$1Jl.initializeBase(this,[n,t,r,u]);this.$2k=i};_c.$1Jl.prototype={$2k:null,get_$1y:function(){return this.$2k}};_c.$lA=function(n){_c.$lA.initializeBase(this,[6,0,!0,n])};_c.$lA.prototype={get_$7h8:function(){return!1},get_$40t:function(){return!0},$4Vf:function(n){return n.$9mx()}};_c.$10H=function(n){this.$$d_$3vN=Function.createDelegate(this,this.$3vN);var t=this;n.$IU(_a.$Y5,function(){t.$3vN(new _a.$eX(!0))});n.$IU(_a.$eX,this.$$d_$3vN);var i=this;n.$IU(_a.$rJ,function(){i.$3vN(new _a.$eX(!0))})};_c.$10H.prototype={$4K:null,$42C:!1,$4Z6:!1,$49:function(n){this.$4K=n},$3vC:function(n){if(this.$4K){this.$4K.$Au();if(this.$42C){_c.$20.$5W("Pending get request is alive, starting full sync");this.$4K.$1UC(n)}else{if(this.$4K.get_$1Nq())_c.$20.$5W("Pending get request is not alive and in ALT1, will start full sync when it comes alive");else{_c.$20.$5W("Pending get request is not alive, starting quick sync now and full sync when it comes alive");_a.$Q.set_$2eI(_a.$S9.toString(n));this.$4K.$6Yt()}this.$4Z6=!0}}},$3vN:function(n){_c.$20.$5W("Pending get request alive changed to {0}",n.$42n);this.$42C=n.$42n;if(this.$4Z6&&this.$42C){_c.$20.$5W("Pending get just came alive -> starting sync");this.$4Z6=!1;this.$4K.$1UC(4)}}};_c.$m0=function(n,t){_c.$m0.initializeBase(this,[n,t])};function $4iY(n,t,i){var u=t;if(i.ModuleSpecificContext)for(var f=i.ModuleSpecificContext,o=f.length,r=0;r<o;++r){var e=f[r];if(e.FolderId.Id===u.FolderId.Id)return e}_js.Trace.logInfo(_c.$1o.$A,"We can't find the folderEntry inside Conversation SyncState for folder:{0}",u.FolderId.Id);return null}_c.$m0.prototype={$7uu:function(n,t){var i=null;var r=$4iY(this,n,t);r&&(i=r.LastSuccessfulSyncTime);return i},$3hi:function(n,t){_a.$4.$9n(_bc.$Hz.isInstanceOfType(n),"The context type should match the module.");var i=n;_a.$4.$J(i.FolderId,"Invalid call to IsSynced with no folder ID specified.");if(t){var r=$4iY(this,n,t);return!!r}return!1},$3uL:function(){return"ConversationSyncStateId"},$9ap:function(n,t){if(t.ModuleSpecificContext){for(var r=t.ModuleSpecificContext,i=0;i<r.length;i++){var u=r[i];if(u.FolderId.Id===n)break}if(i!==r.length){_js.Trace.logInfo(_c.$1o.$A,"Removing Folder {0} Conversation SyncState",n);Array.removeAt(r,i)}}}};_c.$1Jk=function(n,t){_c.$1Jk.initializeBase(this,[n,t])};_c.$1Jk.prototype={get_$6aD:function(){return 0},$6N3:function(n){_a.$4.$9n(_bc.$Hz.isInstanceOfType(n),"The context type should match the module.");var t=n;_a.$4.$J(t.FolderId,"Invalid call to IsSynced with no folder ID specified.");var i=this,r=this;this.$QT.get_$bV().$3SM(function(n){i.$9ap(t.FolderId.Id,n)},function(){})},$7us:function(n,t){_a.$4.$9n(_bc.$Hz.isInstanceOfType(n),"The context type should match the module.");var u=n;_a.$4.$J(u.FolderId,"Invalid call to IsSynced with no folder ID specified.");var i=null;var r=this,f=this;this.$QT.$2wU(function(u){u?i=r.$7uu(n,u):_js.Trace.logInfo(_c.$1o.$A,"Getting null SyncState for {0}",r.$3uL());t(i)},function(){t(i)})}};_c.$Jz=function(n){this.$zK={};this.$1iV={};_a.$4.$7t(n,1,50,"maxNotifications");this.$5jt=n;this.$2BC=0};function $6mN(n,t,i){if(t===1){var f=n.$zK[i];if(f){n.$2BC-=f.length;n.$1iV[i]=f;delete n.$zK[i]}}else if(t===3){var e=n.$1iV[i];if(e){for(var o;o=Array.dequeue(e);)n.$2Yu&&n.$2Yu(o,0);delete n.$1iV[i];e=null}}else if(t===6){var u=n.$1iV[i];if(u){_js.Trace.logWarning(_a.$0.$gW,"Discarding notifications due to abort event Notification id : {0}, Total Count: {1}",i,u.length);$3Vd(n,u,4);u=null;delete n.$1iV[i]}}else if(t===4){var r=n.$zK[i];if(r){_js.Trace.logWarning(_a.$0.$gW,"Discarding notifications due to canceled event Notification id : {0}, Total Count: {1}",i,r.length);n.$2BC-=r.length;$3Vd(n,r,5);r=null;delete n.$zK[i]}}}function $3Vd(n,t,i){if(n.get_$6JP())for(var r;r=Array.dequeue(t);)n.get_$6JP()(r,i);else Array.clear(t)}function $4iO(n,t){var r=new(_0365f.$o.$$(_a.$eG));var u=t;for(var f in u){var e={key:f,value:u[f]};var i=e.value;if(i)while(i.length>0){var o=Array.dequeue(i);var s=new _a.$eG(e.key,o.EventType,!1);r.$D(s)}}return r}_c.$Jz.prototype={$5jt:0,$2Yu:null,$2BC:0,get_$6JP:function(){return this.$2Yu},$2tK:function(n,t){_a.$4.$1G(n,"id");_a.$4.$J(t,"notification");if(this.$2BC<this.$5jt){this.$2BC++;var i=this.$zK[n];if(!i){i=[];this.$zK[n]=i}Array.enqueue(i,t);return!0}_js.Trace.logWarning(_a.$0.$gW,"Max Notification Queue limit reached.");return!1},$7WR:function(){_js.Trace.logWarning(_a.$0.$gW,"Clear Sync Notification Queue");var t=this.$zK;for(var i in t){var r={key:i,value:t[i]};var n=this.$zK[r.key];if(n){$3Vd(this,n,2);delete this.$zK[r.key];n=null}}this.$2BC=0},$9Zw:function(n){_a.$4.$J(n,"postSyncCallback");this.$2Yu=n},$9yC:function(){this.$2Yu=null},$7wf:function(){var n=_0365f.$58.$3p(this.$zK);return $4iO(this,n)},$7wc:function(){var n=_0365f.$58.$3p(this.$1iV);return $4iO(this,n)},$9Xd:function(n){_a.$4.$J(n,"e");if(!_js.$9.$a(n.$1gr)){_js.Trace.logInfo(_a.$0.$gW,"Processing sync event type: {0} for notification sync context id: {1}",n.$Mq,n.$1gr);$6mN(this,n.$Mq,n.$1gr)}}};_c.$1DV=function(n,t){_c.$1DV.initializeBase(this,[n,t,"CalendarItemNotification"])};_c.$1DV.prototype={$81Y:function(n,t,i){var r=n;if($6(r.FolderId)){_js.Trace.logInfo(_a.$0.$5q,String.format("Rejecting CalendarItem notification with null FolderId : {0}",r.id));i(n);return}var u=new _c.$Ta(r.FolderId,this.$4K.get_$1Nq(),this.$3J);if(this.$4K.$2cJ(u,r.EventType==="Reload")){if($3Vl(this,n,t.get_$34C())){_js.Trace.logInfo(_a.$0.$5q,String.format("CalendarItemNotification throttled id : {0}",r.FolderId));return}$2CY(this,r,u);return}i(r);this.$4K.$10I(u)}};_c.$1Df=function(n,t,i,r,u){this.$$d_$3vU=Function.createDelegate(this,this.$3vU);this.$$d_$9QH=Function.createDelegate(this,this.$9QH);this.$$d_$81s=Function.createDelegate(this,this.$81s);this.$$d_$829=Function.createDelegate(this,this.$829);this.$$d_$9L7=Function.createDelegate(this,this.$9L7);this.$$d_$3vT=Function.createDelegate(this,this.$3vT);this.$$d_$80V=Function.createDelegate(this,this.$80V);_c.$1Df.resolveInheritance();this.dispose=this.$1Q;_c.$1Df.initializeBase(this);_a.$4.$J(n,"syncManager");_a.$4.$J(r,"dataPointTracker");this.$4K=n;this.$M=t;this.$Be=i;this.$2ql=r;this.$1dk=new _e.$k0(_a.$7G.$E());this.$E9=u};_c.$1Df.prototype={$4K:null,$M:null,$Be:null,$2ql:null,$E9:null,$1dk:null,$2xb:!1,$9sX:function(){if(!this.$2xb){this.$M.$IU(_h.$N2,this.$$d_$80V);this.$M.$IU(_h.$KN,this.$$d_$3vT);this.$M.$IU(_a.$kj,this.$$d_$9L7);this.$M.$IU(_h.$S4,this.$$d_$829);this.$M.$IU(_h.$lH,this.$$d_$81s);_c.$AC.add_$6Eo(this.$$d_$9QH);this.$E9.get_$18l()||this.$M.$IU(_h.$Mj,this.$$d_$3vU);this.$2xb=!0}},$4c:function(){if(this.$2xb){this.$M.$18g(_h.$N2,this.$$d_$80V);this.$M.$18g(_h.$KN,this.$$d_$3vT);this.$M.$18g(_a.$kj,this.$$d_$9L7);this.$M.$18g(_h.$S4,this.$$d_$829);this.$M.$18g(_h.$lH,this.$$d_$81s);_c.$AC.remove_$6Eo(this.$$d_$9QH);this.$E9.get_$18l()||this.$M.$18g(_h.$Mj,this.$$d_$3vU);this.$2xb=!1}},$9QH:function(){this.$E9.get_$18l()?this.$M.$18g(_h.$Mj,this.$$d_$3vU):this.$M.$IU(_h.$Mj,this.$$d_$3vU)},$3vU:function(n){_c.$20.$14j("Receiving ViewFolderEvent");var t=n.$2G;if(t&&t.get_$r()){var i=this;this.$E9.$9XF(t,function(n){n&&i.$4K.$6Yp(t.get_$r().Id)})}},$80V:function(n){n.$5Ai?this.$1dk.$3cZ(n.$4Z3,this.$4K.get_$17y()):this.$1dk.$3cZ(n.$4Z3,"")},$3vT:function(n){var t=new _h.$1F9;t.set_$1YG(this.$Be.$Pf);this.$2ql.$AN(t);this.$4K.$9rl()},$9L7:function(n){_c.$20.$5W("OnPauseResumeSyncEvent, PauseEvent: {0}",n.$2Pg);if(n.$2Pg){if(_h.$5C.$2n){_c.$20.$n5("Stopping sync manager on version mismatch error");var t=this;this.$4K.$1I4(function(){_c.$20.$5W("Successfully stopped sync manager on version mismatch error")})}}else{_c.$20.$5W("Enable sync and start full sync");this.$4K.$7ld()}},$829:function(n){_c.$20.$5W("Receiving StartFullSyncEvent");this.$4K.$1UC(n.$187)},$81s:function(n){_c.$20.$14j("Receiving StartFullSyncEvent");this.$4K.$6N3(n.$9s,n.$d)}};_c.$12D=function(n,t){_c.$12D.initializeBase(this,[3,0,n,t])};_c.$12D.prototype={get_$1y:function(){return"CalendarFoldersModule"},$4Vf:function(n){return n.$9mt()}};_c.$N3=function(n,t,i){_c.$N3.initializeBase(this,[4,0,!1,t]);_a.$4.$J(i,"postCleanup");this.$1Km=n;this.$6JI=i};_c.$N3.prototype={$1Km:0,$6JI:null,get_$1y:function(){return"CleanupSyncContextId"},$4Vf:function(n){return n.$9mE(this.$1Km)},$9MH:function(n){this.$6JI(n)}};_c.$1A8=function(n){_c.$1A8.initializeBase(this,[3,0,!0,n])};_c.$1A8.prototype={$4Vf:function(n){return n.$9mw()}};_c.$14p=function(){_c.$14p.initializeBase(this,[1,"Core.Models.Sync.FolderActiveSyncingAgain"])};_c.$14p.prototype={get_$982:function(){return this.$U("NDBLACA")},set_$982:function(n){$1M(this,"NDBLACA",n);return n}};_c.$14z=function(n,t){_a.$4.$7t(n,0,Number.MAX_VALUE,"Interval");_a.$4.$7t(t,2,Number.MAX_VALUE,"maxTimes");this.$B4=n;this.$474=t;this.$270=[]};_c.$14z.prototype={$B4:0,$474:0,$270:null,$3Ps:0,$A0Y:function(n){_a.$4.$7t(n,1,Number.MAX_VALUE,"actionTimeInUtcMinutes");if(this.$3Ps)if(this.$270.length<this.$474-1)Array.enqueue(this.$270,n);else{this.$3Ps=Array.dequeue(this.$270);Array.enqueue(this.$270,n)}else this.$3Ps=n},$87w:function(n){return this.$270.length<this.$474-1?!0:n-this.$3Ps>=this.$B4}};_c.$of=function(n,t){_c.$of.initializeBase(this,[1,t,!0,n])};_c.$of.prototype={get_$7h8:function(){return!1},get_$40t:function(){return!0},$4Vf:function(n){return n.$9mu(this.$187)}};_c.$Ta=function(n,t,i){_c.$Ta.initializeBase(this,[3,14,n,t,i])};_c.$Ta.prototype={$4Vf:function(n){return n.$9mv(this.$2k)}};_c.$1BR=function(n,t){_c.$1BR.initializeBase(this,[3,0,n,t])};_c.$1BR.prototype={get_$1y:function(){return"RemindersModule"},$4Vf:function(n){return n.$9n0()}};_c.$gJ=function(n,t,i){this.$$d_$5Cc=Function.createDelegate(this,this.$5Cc);_c.$gJ.initializeBase(this,[n,t,i]);$10j(this,this.$$d_$5Cc,"ConfirmSyncCompleted")};function $6mZ(n){return new _e.$mz(n.$CO.get_$A8().get_$1K9(),n.$CO.get_$A8().get_$3y9())}function $6mY(n,t,i){if(!_a.UserAgent.getInstance().$422(n.get_$5a(),n.get_$66T())||n.get_$5Aq().get_$89i())t();else{var r=this;n.get_$5Aq().$7W7(n.get_$66T(),t,function(n){i&&i(n)})}}_c.$gJ.prototype={get_$Ra:function(){return 14},get_$66T:function(){return this.$Ay.$3J.$12},get_$5Aq:function(){return this.$Ay.$3J.$56y},get_$5a:function(){return this.$Ay.$3J.get_$5a()},$6Yk:function(n,t){$192(this,"Starting cleanup");var i=this,r=this;this.$CO.$c1(this.$Ay.$1Km,$6mZ(this),function(){$6mY(i,n,t)},function(n){$SF(r,"Module cleanup failed with error: "+n.get_$52());var i=Error.create(n.get_$52());t(i)})},$5Cc:function(){this.$1lP()}};_c.$10G=function(n,t){_c.$10G.initializeBase(this,[n,t])};_c.$10G.prototype={get_$6aD:function(){return 0},$7f7:function(n,t,i){_a.$4.$J(i,"completeCallback");if(!_c.$N3.isInstanceOfType(n))throw Error.argumentType("only CleanupSyncContext is supported by the SyncAttachmentModule");var r=new _c.$gJ(n,t,this.$QT);i([r])},$9mv:function(n){return!1},$9mu:function(n){return!1},$9mz:function(){return!1},$9n1:function(n){return!1},$3hi:function(n,t){return!0},$3uL:function(){return"AttachmentsStateId"}};_c.$1DR=function(){this.$$d_$9Fj=Function.createDelegate(this,this.$9Fj);_c.$1DR.initializeBase(this,[null])};_c.$1DR.prototype={$5ZC:function(n){n.$1ua(null,this.$$d_$9Fj,this.$$d_$9RZ)},$9Fj:function(n,t){t.WasSuccessful?this.$A6H(n,t):this.$9RZ(Error.create(_h.$Mv.$3sf(t.ErrorCode)))}};_c.$1DS=function(n,t,i){this.$$d_$4VC=Function.createDelegate(this,this.$4VC);this.$$d_$3NV=Function.createDelegate(this,this.$3NV);_c.$1DS.initializeBase(this,[n,t,i])};_c.$1DS.prototype={get_$Ra:function(){return 9},$7Vu:function(n){return!0},$7do:function(){return new SyncState("CalendarFoldersSyncStateId","")},$7f2:function(n){n(new _c.$1DR)},$876:function(){return new(_e.$Mf.$$(_g.$Jh))(this.get_$A5W(),this.$$d_$3NV)},$7bT:function(){return new _e.$np(this.$$d_$4VC)},$3NV:function(n,t){var i=new _e.$AB(this.$CO.get_$A8());var r=this;i.$9iK(t,n,function(){})},$4VC:function(n){_e.$AB.$7hE(n);this.$CO.get_$A8().get_$oo().$Ht(n,_e.$1h.$5f("CalendarFoldersSyncStateId"))}};_c.$1DT=function(n,t){_c.$1DT.initializeBase(this,[n,t])};_c.$1DT.prototype={get_$6aD:function(){return 2},$7f7:function(n,t,i){i([new _c.$1DS(n,t,this.$QT)])},$9mv:function(n){return!1},$9mF:function(){return!0},$9mt:function(){return!0},$3uL:function(){return"CalendarFoldersSyncStateId"}};_c.$1DU=function(n,t){this.$$d_$9KX=Function.createDelegate(this,this.$9KX);_c.$1DU.initializeBase(this,[n,t,"CalendarFoldersNotification"]);t.$M.$IU(_h.$eH,this.$$d_$9KX)};_c.$1DU.prototype={$81Y:function(n,t,i){_js.Trace.logError(_a.$0.$5q,String.format("Receiving unexpected CalendarFolders offline notification. Id: {0}",n.id||""));i(n)},$9KX:function(n){var i=new _e.$Tt(this.$3J.get_$5a(),_e.$1n.$7e);var r=new _e.$mA(i.get_$oo(),"CalendarFoldersSyncStateId");_js.Trace.logInfo(_a.$0.$5q,"Processing (client-only) CalendarFolders notification.");var t=this;r.$9xY(!1,function(){_js.Trace.logInfo(_a.$0.$5q,"Successfully set isSynced to false for CalendarFolders table. Starting notification based sync.");var n=new _c.$12D(t.$4K.get_$1Nq(),t.$3J);t.$4K.$10I(n)})}};_c.$1DW=function(n){_c.$1DW.initializeBase(this,[n])};_c.$1DW.prototype={get_$9w8:function(){return this.$U("rmi")},set_$9w8:function(n){$1M(this,"rmi",n);return n},get_$9w9:function(){return this.$U("rmwi")},set_$9w9:function(n){$1M(this,"rmwi",n);return n},get_$9tV:function(){return this.$U("sws")},set_$9tV:function(n){$1M(this,"sws",n);return n},get_$9tU:function(){return this.$U("swe")},set_$9tU:function(n){$1M(this,"swe",n);return n},get_$9tE:function(){return this.$U("sf")},set_$9tE:function(n){$1M(this,"sf",n);return n},get_$7QS:function(){return this.$U("aws")},set_$7QS:function(n){$1M(this,"aws",n);return n},get_$9xV:function(){return this.$U("ttiw")},set_$9xV:function(n){$1M(this,"ttiw",n);return n}};_c.$1Da=function(n,t,i,r){_c.$1Da.initializeBase(this,[n,t,i,r])};_c.$1Da.prototype={get_$Ra:function(){return 16},$9mr:function(){return this.get_$1rF().length>0}};_c.$1Db=function(n,t,i,r){_c.$1Db.initializeBase(this,[n,t,i,r])};_c.$1Db.prototype={get_$Ra:function(){return 15},$9ma:function(n){return this.$Ay.$LY!==3&&!n},$9mr:function(){var n=this.get_$1rF().length>0&&this.get_$4bA()<_h.$27.$1UT;$192(this,"Should Sync changes from sever = "+n);return n}};_c.$1Dc=function(n){_c.$1Dc.initializeBase(this,[n])};_c.$1Dc.prototype={get_$7a3:function(){return this.$U("cis")},set_$7a3:function(n){$1M(this,"cis",n);return n},get_$8EX:function(){return this.$U("ciips")},set_$8EX:function(n){$1M(this,"ciips",n);return n}};_c.$10J=function(n,t,i){this.$$d_$4co=Function.createDelegate(this,this.$4co);_c.$10J.initializeBase(this,[n,t,i]);$10j(this,this.$$d_$4co,"UpdateReadFlagDirtyConversations");$10j(this,this.$$d_$1lP,"SyncCompleted")};_c.$10J.prototype={get_$Ra:function(){return 19},get_$9md:function(){return!1},get_$1gr:function(){return""},$5e4:function(){return!0},$6Yk:function(n,t){n()},$4co:function(){$Ak(this,"Updating conversation items read flags");var n=this.$CO.get_$A8().get_$JM();var i=this.$CO.get_$A8().get_$52();var r=this.$CO.get_$A8().get_$HP();var f=this,u=this,t=this;n.$BT(new _a.$6j("SyncConversationItemsReadFlagModule.UpdateReadFlagDirtyConversations"),function(t){n.$4co(t,r,i)},function(){u.$h5()},function(n){$1J6(t,"Failed to update read flags",n.$3v);t.$1h1(Error.create(n.$3v))})}};function ExternalSyncDependencies(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){_a.$4.$J(n,"offlineMailboxDataContext");_a.$4.$J(t,"localStorageAdapter");_a.$4.$J(i,"offlineUserSettings");_a.$4.$J(r,"syncFolderSettingProcessor");_a.$4.$J(u,"nativeBridge");_a.$4.$J(f,"attachmentsCleanupManager");_a.$4.$J(e,"datapointTracker");_a.$4.$J(o,"offlineNotificationHandler");_a.$4.$J(s,"userAgent");_a.$4.$1G(h,"userCulture");_a.$4.$J(l,"taskRunner");_a.$4.$J(a,"eventAggregator");_a.$4.$J(v,"syncController");_a.$4.$J(y,"uiModuleService");_a.$4.$J(p,"featureManager");this.$75=n;this.$4t=t;this.$Eh=i;this.$E9=r;this.$12=u;this.$56y=f;this.$1Ln=e;this.$16D=o;this.$13=s;this.$Em=h;this.$7l=c;this.$4P=l;this.$M=a;this.$2AP=v;this.$uV=y;this.$5B=p;var w=this;this.$M.$IU(_h.$Mj,function(n){var t=n.$2G;t&&(w.$a7=t.get_$r())})}ExternalSyncDependencies.prototype={$2AP:null,$4t:null,$Eh:null,$E9:null,$12:null,$56y:null,$1Ln:null,$16D:null,$13:null,$Em:null,$a7:null,$4P:null,$M:null,$75:null,$uV:null,$7l:0,$5B:null,get_$1AY:function(){return this.$75.get_$1AY()},get_$ZJ:function(){return this.$75.get_$ZJ()},get_$5a:function(){return this.$75.get_$5a()},get_$3TS:function(){return this.$75.get_$DM()},get_$13x:function(){if(!this.$a7)if(_g.$h.$1i)this.$a7=_g.$h.$1i.nameToId("inbox");else throw Error.invalidOperation("Trying access ExternalSyncDependencies.InViewFolderId before FolderMappings is initialized. That should not happen.");return this.$a7},set_$13x:function(n){this.$a7=n;return n},$6Tp:function(n,t,i){this.$75.$6Tp(n,t,i)}};_c.$1Dg=function(){_c.$1Dg.initializeBase(this,[null])};_c.$1Dg.prototype={$5ZC:function(n){var t=new _g.$vx(this.$2D);n.$2LZ(t,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$1Dh=function(n,t,i){this.$$d_$4VC=Function.createDelegate(this,this.$4VC);this.$$d_$3NV=Function.createDelegate(this,this.$3NV);_c.$1Dh.initializeBase(this,[n,t,i])};_c.$1Dh.prototype={get_$Ra:function(){return 6},$7Vu:function(n){return!0},$7do:function(){return new SyncState("FavoriteFoldersSyncStateId","")},$7f2:function(n){n(new _c.$1Dg)},$876:function(){return new(_e.$Mf.$$(_g.$P5))(this.get_$A5W(),this.$$d_$3NV)},$7bT:function(){return new _e.$np(this.$$d_$4VC)},$3NV:function(n,t){var i=new _e.$AB(this.$CO.get_$A8());var r=this;i.$9im(t,n,function(){})},$4VC:function(n){_e.$AB.$7hT(n)}};_c.$1Di=function(n,t){_c.$1Di.initializeBase(this,[n,t])};_c.$1Di.prototype={get_$6aD:function(){return 2},$7f7:function(n,t,i){i([new _c.$1Dh(n,t,this.$QT)])},$9mv:function(n){return!1},$3uL:function(){return"FavoriteFoldersSyncStateId"}};_c.$AC=function(n,t){_a.$4.$J(n,"localStorageAdapter");_a.$4.$J(t,"eventAggregator");this.$4t=n;this.$M=t;$4iZ(this)};_c.$AC.add_$6Eo=function(n){_c.$AC.$7Or(n)};_c.$AC.remove_$6Eo=function(n){_c.$AC.$6NH(n)};_c.$AC.$87r=function(){var n=_c.$AC.$3TN.getHandler("UserSelected");$6(n)||n()};_c.$AC.$7Or=function(n){_c.$AC.$3TN.addHandler("UserSelected",n)};_c.$AC.$6NH=function(n){_c.$AC.$3TN.removeHandler("UserSelected",n)};function $6mi(n){n.$n6.$3KU();$4iZ(n)}function $4iZ(n){n.$n6=n.get_$18l()?new _c.$10u(n.$4t,n.$M):new _c.$H2(n.$4t,n.$M)}_c.$AC.prototype={$4t:null,$M:null,$n6:null,get_$18l:function(){return this.$4t.$3x("SyncFolders.UserSelected")==="true".toLowerCase()},set_$18l:function(n){var t=this.$4t.$3x("SyncFolders.UserSelected")==="true".toLowerCase();this.$4t.$DI("SyncFolders.UserSelected",n.toString().toLowerCase());if(n!==t){$6mi(this);_c.$AC.$87r()}return n},get_$5ih:function(){return this.$n6},$5ce:function(n){_a.$4.$J(n,"folder");if(n.$AX||!_g.$8W.isInstanceOfType(n)||_h.$8p.$aB(n.get_$r())||n.get_$EG()||n.get_$42x()){_js.Trace.logInfo(_c.$AC.$Lg,"{0} is not syncable because it is not mail folder or is an archive/public/shared/search folder",n.get_$r().Id);return!1}else return _h.$27.$9sv(n)},$9XF:function(n,t){_a.$4.$J(n,"folder");_a.$4.$J(t,"onCompletedCallback");if(_c.$10u.isInstanceOfType(this.$n6)){t(!1);return}if(n.$1lS===2){t(!1);return}var i=this.$n6;if(n.$1lS)i.$9zn(n,t);else{if(!this.$5ce(n)){t(!1);return}var r=this,u=this;i.$7Nl(n.get_$r().Id,function(){n.set_$6aH(1);t(!0);i.$460("",_a.$g.$8s)},function(i){_js.Trace.logWarning(_c.$AC.$Lg,"We failed to add {0} into sync list",n.get_$r().Id);t(!1)})}},$1cE:function(n,t){_a.$4.$1G(t,"folderId");var i=!1;switch(n){case 11:case 4:case 12:case 5:var r;var u,f;var e=(f=this.$n6.$7r7(null,n,u={val:r}),r=u.val,f);i=Array.contains(e,t);break;default:break}return i},$8A4:function(n,t){_a.$4.$1G(t,"folderId");var i=this.$n6.$7yM(n);return Array.contains(i,t)},$40U:function(n){_a.$4.$J(n,"folderId");return this.$1cE(12,n)},$5iG:function(n,t,i){this.$n6.$5iG(n,t,i)},$6Tf:function(n){if(_c.$H2.isInstanceOfType(this.$n6)){var t=this.$n6;t.$6Tf(n)}},$2Lz:function(n,t,i){this.$n6.$2Lz(n,t,i)},$6fV:function(n,t,i){this.$n6.$6fV(n,t,i)}};_c.$Q2=function(n,t,i){this.$1An=[];this.$9M=[];_c.$Q2.$$(this.$$gta["_c.$Q2"].TSyncAction,this.$$gta["_c.$Q2"].TSyncResponse,this.$$gta["_c.$Q2"].TSyncResponseType).initializeBase(this,[n,t,i]);this.$xq=-1};_c.$Q2.$$=function(n,t,i){var r="$Q2"+"$3"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_")+"$"+i.getName().replace(/\./g,"_");if(!_c[r]){var u=_c[r]=function(){(this.$$gta=this.$$gta||{})["_c.$Q2"]={TSyncAction:n,TSyncResponse:t,TSyncResponseType:i};for(var u=[],r=0;r<arguments.length;++r)u[r]=arguments[r];_c.$Q2.apply(this,u)};u.registerClass("_c."+r,_c.$JE.$$(n,t));var e=_c.$Q2.prototype;for(var o in e){var f={key:o,value:e[o]};"constructor"!==f.key&&(u.prototype[f.key]=f.value)}u.$4b4=1048576;u.$9vw=10}return _c[r]};_c.$Q2.prototype={$6bk:0,$5fU:null,$xq:0,get_$A5m:function(){return this.$1An},get_$1N:function(){return this.$9M},get_$A5n:function(){return this.$6bk},set_$A5n:function(n){this.$6bk=n;return n},get_$A5o:function(){return this.get_$Id().$6A},get_$A5p:function(){return this.$5fU},set_$A5p:function(n){this.$5fU=n;return n},get_$87G:function(){return this.$Ay.get_$40t()},get_$jJ:function(){if(this.$xq===-1){var n=this.$3J.$4t.$3x("MaxSyncModuleType");this.$xq=_js.$9.$a(n)?_c.$1o.$1tz:parseInt(n)}return this.$xq},$5e4:function(){return!0},$7Vu:function(n){return!1},$9cy:function(){this.$1An=[];this.$9M=[];_c.$JE.prototype.$9cy.call(this)},$A5q:function(n,t){for(var r=[],i=0;i<n.length;i++)$6(t[n[i].Id])&&Array.add(r,n[i].Id);r.length>0&&_js.Trace.logWarning(_c.$1o.$A,"Following items were not synced due to servers errors. This warning message is there to help troubleshoot such errors. ItemIds = '{0}'",r.join(", "))},$A5r:function(n){if(n&&n.length>0&&14<=this.get_$jJ()){$192(this,"Processing attachments to sync");for(var o=n,h=o.length,f=0;f<h;++f){var t=o[f];if(t.Attachments){for(var r=0,u=0,s=t.Attachments,c=s.length,e=0;e<c;++e){var i=s[e];if(this.$7Vi(i)){if(r+i.Size>_c.$Q2.$$(this.$$gta["_c.$Q2"].TSyncAction,this.$$gta["_c.$Q2"].TSyncResponse,this.$$gta["_c.$Q2"].TSyncResponseType).$4b4||u+1>10){$Ak(this,String.format("Threshold to sync attachments for item : {0} has reached. Size: {1}, Total attachments: {2}",t.ItemId.Id,r,u));break}r+=i.Size;++u;var l=_e.$4q.$7bA(i,t.ItemId.Id,t.DateTimeReceived,!1,!0);$192(this,String.format("Adding Attachmend id: {0} to sync list",i.AttachmentId.Id));Array.add(this.$9M,l)}}$192(this,String.format("MessageItem: {0} has {1} inline attachments, total size: {2} to sync",t.ItemId.Id,u,r))}}}}};_c.$sg=function(n,t,i,r){this.$2l1=new Array(0);_c.$sg.$$(this.$$gta["_c.$sg"].TSyncAction,this.$$gta["_c.$sg"].TSyncResponseMessage,this.$$gta["_c.$sg"].TSyncResponseType).initializeBase(this,[n,i,r]);_a.$4.$J(t,"foldersToSync");this.$1Bs=t};_c.$sg.$$=function(n,t,i){var r="$sg"+"$3"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_")+"$"+i.getName().replace(/\./g,"_");if(!_c[r]){var f=_c[r]=function(){(this.$$gta=this.$$gta||{})["_c.$sg"]={TSyncAction:n,TSyncResponseMessage:t,TSyncResponseType:i};for(var u=[],r=0;r<arguments.length;++r)u[r]=arguments[r];_c.$sg.apply(this,u)};f.registerClass("_c."+r,_c.$JE.$$(n,t));var e=_c.$sg.prototype;for(var o in e){var u={key:o,value:e[o]};"constructor"!==u.key&&(f.prototype[u.key]=u.value)}}return _c[r]};_c.$sg.prototype={$1Bs:null,$2es:0,$4bB:0,$2I8:null,$5NG:!1,get_$wO:function(){return this.$1Bs},set_$wO:function(n){this.$1Bs=n;return n},get_$A5i:function(){return this.$2l1},get_$A5j:function(){return this.$2I8},set_$A5j:function(n){this.$2I8=n;return n},get_$A5k:function(){return this.$2es},set_$A5k:function(n){this.$2es=n;return n},get_$A5l:function(){return this.$4bB},set_$A5l:function(n){this.$4bB=n;return n},get_$89s:function(){return this.get_$8Dd()},get_$87G:function(){return this.$Ay.get_$40t()},get_$9me:function(){return!1},$7sI:function(){return 11},$7qu:function(n){if(!n&&this.$2I8.get_$A4K().length>0&&(!this.$5NG||this.get_$89s())&&(this.$Ay.$1uV||!this.$2C6)){$Ak(this,"Raising Hierarchy notification for mail synced folders");if(_a.$Q.get_$14O()){_a.$Q.set_$6aI(_a.$Q.get_$Lk());_a.$Q.$3Tv=this.$6bn;_a.$Q.$1IS=this.$1IS;_a.$Q.$1IT=this.$1IT;_a.$Q.$1jJ=this.$1jJ;this.$1jJ=0;if(this.$3J.$uV.get_$2E5()){_a.$Q.$3Rt();_a.$Q.$3Qd=!0;_a.$Q.$2AS=2}else _a.$Q.$2AS=1}var t=_a.$6.acss(_a.$0.$Q4,"GenerateSyncNotificationForChanges_"+this.get_$H5());this.get_$A5Y().$2v9(this.$2I8.get_$A4K());_a.$6.aces(t);this.$5NG=!0;_a.$Q.$2eG++}else{$Ak(this,"No changes received hence not raising Hierarchy notification for mail synced folders");var i=_a.$6.acss(_a.$0.$Q4,"NoSyncNotificationForChanges_"+this.get_$H5()+"_"+_a.$yJ.toString(n));_a.$6.$1E(null,"ALT3.1");_a.$6.endPT("ALT3.1s");if(!_a.$Q.$2eG&&n!==1&&_a.$Q.get_$14O()){_a.$Q.set_$6aI(_a.$Q.get_$Lk());_a.$Q.$3Rt();_a.$Q.$3EN=!0;_a.$Q.$2AS=3}_a.$6.aces(i)}_c.$JE.prototype.$7qu.call(this,n)},$7qt:function(n){if(n===2||n===1){$Ak(this,"Raising Hierarchy notification for mail all folders");this.get_$A5Y().$2v9(this.$1Bs)}_c.$JE.prototype.$7qt.call(this,n)},$7f9:function(n,t){return _a.$S8.$E(n,this.get_$Ra(),this.$3Rx,this.get_$1y(),this.get_$1gr(),this.$30q,this.$1Bs,this.$2l1,t)},$9z8:function(){var n=this.get_$T6();n.$5O5(this.$2l1);n.set_$5fh(this.$2es);_c.$20.$5W(this.get_$H5()+" module data point: Synced "+this.$2es+" messages, ")},$7de:function(){return new _c.$1De(this.get_$Ra())},$9cy:function(){this.$2I8=null;_c.$JE.prototype.$9cy.call(this)},$5UX:function(n){_c.$JE.prototype.$5UX.call(this,n)},$5UW:function(n){_c.$JE.prototype.$5UW.call(this,n)},$9Af:function(){if(this.get_$Id().IsSynced&&this.$9Yq()){$SF(this,"Reaching max sync limit PostALT1, will revert to ALT1 sync");var n=new _h.$19C;n.set_$H5(this.get_$H5());this.$3J.$1Ln.$AN(n);this.$3J.$M.$9Yf(_h.$N2,new _h.$N2(11,!1));this.$3J.$M.$9Yf(_h.$S4,new _h.$S4(11));this.$1h1(Error.create("Sync aborts since reaching the max sync limit PostALT1"))}else _c.$JE.prototype.$9Af.call(this)},$9Yq:function(){return this.$4bB+this.$2es>=_h.$27.$jI*_h.$27.$1IB*2}};_c.$sh=function(){this.$2Ky=[];this.$44H=[];this.$1dJ=[]};_c.$sh.$$=function(n){var t="$sh"+"$1"+"$"+n.getName().replace(/\./g,"_");if(!_c[t]){var r=_c[t]=function(){(this.$$gta=this.$$gta||{})["_c.$sh"]={TServiceObjectType:n};for(var i=[],t=0;t<arguments.length;++t)i[t]=arguments[t];_c.$sh.apply(this,i)};r.registerClass("_c."+t);var u=_c.$sh.prototype;for(var f in u){var i={key:f,value:u[f]};"constructor"!==i.key&&(r.prototype[i.key]=i.value)}}return _c[t]};_c.$sh.prototype={get_$A4H:function(){return null},get_$A4I:function(){return this.$44H},set_$A4I:function(n){this.$44H=n;return n},get_$A4J:function(){return this.$1dJ},set_$A4J:function(n){this.$1dJ=n;return n},get_$A4K:function(){return this.$2Ky},set_$A4K:function(n){this.$2Ky=n;return n},$A4L:function(n){Array.contains(this.$2Ky,n)||Array.add(this.$2Ky,n)}};_c.$si=function(n,t,i){_c.$si.initializeBase(this,[t,i,"HierarchyNotification"]);_a.$4.$J(n,"clientStore");this.$7F=n};function $6mj(n,t){var i=new _e.$bj(n.$7F,n.$3J.get_$3TS());var r=this,u=this,f=this;i.$BT(new _a.$6j("SyncHierarchyNotificationStrategy.UpdateClientStoreFolderCounts",!1),function(n){i.$6du(n,new _g.$3S(t.folderId),t.itemCount,t.unreadCount)},function(){},function(n){_js.Trace.logWarning(_a.$0.$5q,"Failed to update counts for folder id={0}, Error={1}",t.folderId,n.$3v)})}_c.$si.prototype={$7F:null,$81Y:function(n,t,i){var r=n;if($6(r.folderId)){if(r.EventType==="Reload"){_js.Trace.logInfo(_a.$0.$5q,"Received reload hierarchy notificaiton, start full sync");t.set_$34C(this.get_$6fR());this.$4K.$1UC(5)}r.pendingGetGenerated||i(r)}else if(r.folderId!==_g.$h.$1i.nameToId("outbox").Id){$6mj(this,r);if(t.get_$5TY()[r.folderId]&&r.EventType!=="Reload"){i(r);return}var u=new _c.$Ta(r.folderId,this.$4K.get_$1Nq(),this.$3J);if(this.$4K.$2cJ(u,r.EventType==="Reload"||this.$3J.$16D.get_$5ak())){$2CY(this,r,u);return}i(r);this.$4K.$10I(u)}}};_c.$1Dr=function(n,t,i,r){_c.$1Dr.initializeBase(this,[t]);_a.$4.$1G(n,"folderToSync");_a.$4.$J(t,"syncState");_a.$4.$7t(i,1,100,"maxChangesReturned");this.$5O6=new _g.$Cd(new _g.$3S(n));this.$35o=i;this.$2sZ=r};_c.$1Dr.prototype={$5O6:null,$35o:0,$2sZ:!1,$5ZC:function(n){var t=new _g.$gX(null,this.$5O6,this.$35o);t.ShapeName="MailListItem";t.SyncState=this.get_$oo().State;t.NumberOfDays=_h.$27.$2AV;t.MinimumCount=_h.$27.$186;t.MaximumCount=_h.$27.$1IB;t.DoQuickSync=this.$2sZ;t.ItemShape=new _g.$DM("IdOnly");t.ItemShape.InferenceEnabled=_g.$V.get_$I().get_$6H().get_$V0();var i=new _g.$gV(this.get_$6u(),t);var r=new _g.$1Dn(this.$2D);n.$6aC(i,r,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$10P=function(n,t,i){_c.$10P.initializeBase(this,[n,t]);this.$1J=i};_c.$10P.prototype={$1J:null,$9mv:function(n){return this.$3J.$E9.$1cE(12,n)},$9ms:function(n){return this.$3J.$E9.$1cE(12,n)},$7f7:function(n,t,i){var r=this;this.$3J.$E9.$2Lz(12,this.$3J.get_$13x(),function(u){var f=null;if(_c.$N3.isInstanceOfType(n)||u.length){_c.$Ta.isInstanceOfType(n)&&(u=[n.$2k]);f=[new _c.$1Ds(n,u,t,r.$QT),new _c.$1Dt(n,t,new _e.$y2(r.get_$5a(),_h.$27.$1Ow),r.$1J)]}i(f)})}};_c.$1Dt=function(n,t,i,r){_c.$1Dt.initializeBase(this,[n,t,i,r])};_c.$1Dt.prototype={get_$Ra:function(){return 18},$9mr:function(){return this.get_$A5o().length>0}};_c.$1Du=function(n,t,i,r){_c.$1Du.initializeBase(this,[n,t,i,r])};_c.$1Du.prototype={get_$Ra:function(){return 17},$9ma:function(n){return this.$Ay.$LY!==3&&!n},$9mr:function(){var n=this.get_$A5o().length>0&&this.get_$A5n()<_h.$27.$1UT;$192(this,"Should Sync changes from sever = "+n);return n}};_c.$JD=function(n,t,i,r){_c.$JD.initializeBase(this,[n,t,i]);var u=this;_c.$JD.$3oo=new(_0365f.$4D.$$(_g.$DM))(function(){return _h.$15.$5QR(r.get_$BQ())});var f=this;_c.$JD.$4He=new(_0365f.$4D.$$(_g.$DM))(function(){return _h.$15.get_$xY()})};function $6my(n){for(var i=Math.min(_h.$27.$1Ow,n.get_$A5o().length),r=new Array(i),t=0;t<i;t++){var u=new _g.$1q(n.get_$A5o()[t].Id);r[t]=u}return r}_c.$JD.prototype={$7f2:function(n){var t=$6my(this);_c.$20.$5W("Creating SyncItems action for {0} items",t.length);n(new _c.$ga(this.get_$Ra(),t,this.get_$Id().$45P?_c.$JD.$3oo.get_$1g():_c.$JD.$4He.get_$1g(),this.get_$Id().$45P?"EditableItems":"ItemNormalizedBody"))},$7bT:function(){return null},$876:function(){return new _e.$19S(this.$CO.get_$A8().get_$52(),this.$CO.get_$A8().get_$1K9(),this.get_$A5m(),this.get_$1N(),[])},$9XB:function(n){$Ak(this,"Process current SyncItems response");var f={};this.set_$A5p([]);for(var u=!1,t=0;t<this.get_$A5W().length;t++){var i=this.get_$A5W()[t];if(i.ResponseClass!=="Success"){var e=this.get_$A5o()[t];_js.Trace.logWarning(_c.$1o.$A,"Error [{0}:{1}:{2}] while syncing item id {3}, SyncContext = {4}",i.ResponseClass,i.ResponseCode,i.MessageText||"",e.Id,this.$Ay.get_$1y());i.ResponseCode!=="ErrorItemNotFound"&&(u=!0);Array.add(this.get_$A5p(),e);continue}var r=this.get_$A5W()[t].Items;if(r&&r.length>0){_js.Trace.logInfo(_c.$1o.$A,"Setting item IsDataSynced flag to true");_e.$Bt.$2bn(r[0],CustomSyncData.$1rs,2);Array.add(this.get_$A5m(),r[0]);f[r[0].ItemId.Id]=!0;this.set_$A5n(this.get_$A5n()+1)}else u=!0}u&&this.$A5q(this.get_$A5o(),f);this.$A5r(this.get_$A5m());_c.$JE.prototype.$9XB.call(this,n)},$7do:function(){return new MessageItemSyncState(this.get_$A5p(),null,!1)},$7de:function(){return new _c.$1Dv(this.get_$Ra())},$9z8:function(){var n=this.get_$T6();n.set_$5fh(this.get_$A5n());_c.$20.$5W(this.get_$H5()+" module data point: Synced "+this.get_$A5n()+" items")},$7Vi:function(n){return n?n.IsInlineToNormalBody:!1}};_c.$1Ds=function(n,t,i,r){_c.$1Ds.initializeBase(this,[n,t,i,r])};_c.$1Ds.prototype={get_$Ra:function(){return 12}};_c.$1Dv=function(n){_c.$1Dv.initializeBase(this,[n])};_c.$1Dv.prototype={get_$5fh:function(){return this.$U("miis")},set_$5fh:function(n){$1M(this,"miis",n);return n}};_c.$1Dw=function(n,t,i,r){_c.$1Dw.initializeBase(this,[n,[t],i,r])};_c.$1Dw.prototype={get_$Ra:function(){return 5},$9ma:function(n){return this.$Ay.$LY!==3&&!n},$7Vu:function(n){return!0}};_c.$10Q=function(n,t,i){_c.$10Q.initializeBase(this,[n||new _e.$y9(t.get_$5a(),"MessageSyncStateId"),t]);this.$1J=i};_c.$10Q.prototype={$1J:null,$7f7:function(n,t,i){var r=this;this.$3J.$E9.$2Lz(5,this.$3J.get_$13x(),function(u){_a.$4.$9n(!_c.$Ta.isInstanceOfType(n),"sync message minimum module factory should not be invoked on notification based sync");var f=null;(_c.$N3.isInstanceOfType(n)||u.length)&&(f=[new _c.$1Dw(n,u[0],t,r.$QT),new _c.$1Du(n,t,new _e.$y2(r.get_$5a(),_h.$27.$1Ow),r.$1J)]);i(f)})},$9mv:function(n){return!1},$9mx:function(){var n=this.$3J.get_$13x().Id;return this.$3J.$E9.$40U(n)}};_c.$Yg=function(n,t,i,r){_c.$Yg.initializeBase(this,[n,t,i,r])};function $6mz(n,t,i,r){var u=i.PerFolderSyncStateContainer[t];u||(u=n.get_$bV().$5QT(t));u.State=r.get_$oo();u.IsSynced=i.IsSynced;u.LastSuccessfulSyncTime=_a.$7.$EZ(_a.$7.get_$29());u.LastAttemptedSyncTime=u.LastSuccessfulSyncTime;u.ModuleSpecificContext=new MessageSyncStateContext(r.get_$95v(),r.get_$998(),_h.$27.$186,_h.$27.$1IB,r.get_$J7());i.PerFolderSyncStateContainer[t]=u}function $4ig(n,t,i){return i in t.PerFolderSyncStateContainer?t.PerFolderSyncStateContainer[i]:null}_c.$Yg.prototype={$3lm:0,get_$89s:function(){return this.$3lm>=this.get_$wO().length-1&&this.get_$A5W().IncludesLastItemInRange},get_$1rd:function(){return this.get_$wO()[this.$3lm]},$5Qu:function(n){var t=$4ig(this,n,this.get_$1rd());return!t||t.State===""},$7Vu:function(n){if(this.get_$89s())return!0;else{n.IncludesLastItemInRange&&this.$3lm++;return!1}},$7f2:function(n){var t=this.get_$Id();var i=new _c.$1Dr(this.get_$1rd(),$4ig(this,t,this.get_$1rd())||this.get_$bV().$5QT(this.get_$1rd()),_h.$27.$1UT,_c.$lA.isInstanceOfType(this.$Ay));n(i)},$876:function(){var n=this.get_$A5j();return new _e.$U7(this.$CO.get_$A8().get_$52(),n.get_$A4I(),n.get_$A4J(),n.$26v,new _e.$mz(this.$CO.get_$A8().get_$1K9(),this.$CO.get_$A8().get_$3y9()))},$9XB:function(n){this.set_$A5j(new _c.$1Dx(this.get_$A5W(),this.get_$1rd()));this.get_$A5j().$26f();var r=this.get_$A5j().get_$A4I().length;this.set_$A5l(this.get_$A5l()+this.get_$A5j().get_$A4J().length);if(r>0){this.set_$A5k(this.get_$A5k()+r);for(var i=this.get_$A5j().get_$A4K(),t=0;t<i.length;t++)Array.contains(this.get_$A5i(),i[t])||Array.add(this.get_$A5i(),i[t])}_c.$JE.prototype.$9XB.call(this,n)},$7do:function(){var n=this.get_$Id()||this.get_$bV().$2LT();$6mz(this,this.get_$1rd(),n,this.get_$A5j());return n},$7bT:function(){return null}};_c.$Yh=function(n,t){_c.$Yh.initializeBase(this,[n||new _e.$y9(t.get_$5a(),"MessageSyncStateId"),t])};function $3Vh(n,t,i){var r=i;_a.$4.$J(r.FolderId,"FolderId should be present");var u=t.PerFolderSyncStateContainer[r.FolderId.Id];u||_js.Trace.logInfo(_c.$1o.$A,"We didn't find the syncState for folder:{0}",r.FolderId.Id);return u}_c.$Yh.prototype={$7uu:function(n,t){var i=$3Vh(this,t,n);return i?i.LastSuccessfulSyncTime:null},$3hi:function(n,t){_a.$4.$9n(_bc.$Hz.isInstanceOfType(n),"The context type should match the module.");if(t){var i=$3Vh(this,t,n);if(i)return i.IsSynced}return!1},$7vQ:function(n,t){_a.$4.$9n(_bc.$Hz.isInstanceOfType(n),"The context type should match the module.");if(t){var i=$3Vh(this,t,n);if(i)return i.ModuleSpecificContext}return null},$3uL:function(){return"MessageSyncStateId"},$9ap:function(n,t){var i=t.PerFolderSyncStateContainer;if(n in i){_js.Trace.logInfo(_c.$1o.$A,"Removing Folder {0} Message SyncState",n);delete i[n]}}};_c.$1Dx=function(n,t){this.$26v=[];_c.$1Dx.initializeBase(this);this.$30=n;this.$6a7=t};_c.$1Dx.prototype={$6a7:null,$30:null,get_$oo:function(){return this.$30.SyncState},get_includesLastItemInRange:function(){return this.$30.IncludesLastItemInRange},get_$J7:function(){return this.$30.TotalCount},get_$95v:function(){return this.$30.MoreItemsOnServer},get_$998:function(){return this.$30.OldestReceivedTime},$26f:function(){for(var i=this.$30.Changes.Changes,u=i.length,t=0;t<u;++t){var n=i[t];switch(n.ChangeType){case"Create":case"Update":var r=n;Array.add(this.get_$A4I(),r.Item);var f=r.Item.ParentFolderId.Id;this.$A4L(f);break;case"Delete":Array.add(this.get_$A4J(),_e.$1h.$5f(n.ItemId.Id));this.$A4L(this.$6a7);break;case"ReadFlagChange":var e=n;Array.add(this.$26v,e);break;default:throw Error.invalidOperation("Invalid value of change type "+n.ChangeType+" change JSON = '"+JsonParser.serialize(n)+"'");}}}};_c.$Md=function(n,t){_a.$4.$J(n,"offlineSettings");this.$6p=n;this.$M=t};_c.$Md.$E=function(n,t){return new _c.$Md(n,t)};function $6nC(n,t,i){var r=i<11?4:11;var u=i<12?5:12;n.$26W||(n.$26W=[t?5:4,10,3,r,u,0,2,6,9,7,8,1,13,14]);n.$26W[0]=t?5:4;n.$26W[3]=r;n.$26W[4]=u;return n.$26W}function $6nD(n,t,i){var r=null;if(i===1){r=[10,3];r=$4ij(n,r,t)}else if(i===2){r=[7,8];r=$4ij(n,r,t)}else r=t;return r}function $4ij(n,t,i){var u=_a.$3n.$$(Boolean).$8A();var f=new(_0365f.$o.$$(_a.$Ab));t=t.concat.apply(t,i);for(var r=0;r<t.length;++r)if(!u.get_$3q(_a.$Ab.toString(t[r]))){f.$D(t[r]);u.set_$3q(_a.$Ab.toString(t[r]),!0)}return f.$6Z()}_c.$Md.prototype={$6p:null,$M:null,$2l2:null,$26W:null,get_$18j:function(){return this.$6p.get_$18j()},get_$7PW:function(){if(!this.$2l2){var t=15;this.$2l2=new Array(t);for(var n=0;n<t;n++)this.$2l2[n]=n}return this.$2l2},$7vP:function(n,t,i,r){var u;_c.$20.$5W("GetModuleList - isInViewFolderSyncingInDateView: {0}, currentUIModule: {1}",i,r);if((_c.$of.isInstanceOfType(n)||_c.$zQ.isInstanceOfType(n))&&this.$6p.get_$18j()){_c.$20.$5W("Getting post-ALT1 module list, syncType: {0}",n.$LY);u=$6nC(this,i,t);u=$6nD(this,u,r)}else{_c.$20.$5W("Getting ALT1 module list, syncType: {0}",n.$LY);u=this.get_$7PW()}return u},$9kN:function(){if(!this.$6p.get_$18j()){this.$6p.set_$18j(!0);_c.$20.$5W("UsePostALT1SyncOrder changed to true");this.$M.$9Yf(_h.$hK,new _h.$hK)}},$9e3:function(){if(this.$6p.get_$18j()){this.$6p.set_$18j(!1);_c.$20.$5W("UsePostALT1SyncOrder changed to false");this.$M.$9Yf(_h.$hK,new _h.$hK)}}};_c.$Hm=function(n,t,i){_a.$4.$J(n,"syncManager");_a.$4.$J(t,"externalSyncDependencies");_a.$4.$J(i,"notificationType");this.$4K=n;this.$3J=t;this.$67b=i};function $2CY(n,t,i){_a.$4.$l(t,"notification");_a.$4.$l(i,"syncContext");if(n.get_$gW().$2tK(i.get_$1y(),t))n.$4K.$10I(i);else{_js.Trace.logWarning(_a.$0.$5q,"NQM rejected enqueue notification, clear notification queue and start full sync");n.get_$gW().$7WR();n.$4K.$Au();n.$4K.$1UC(7)}}function $3Vl(n,t,i){return t.EventType==="Reload"&&t.pendingGetGenerated&&n.get_$6fR()-i<=5e3}_c.$Hm.prototype={$4K:null,$67b:"HierarchyNotification",$3J:null,get_$1Fq:function(){return this.$67b},get_$gW:function(){return this.$3J.$16D.get_$gW()},get_$6fR:function(){return _a.$7.get_utcNow().$5R()},$3vK:function(n,t,i){_a.$4.$l(n,"notification");_a.$4.$l(t,"offlineNotificationHandler");_a.$4.$l(i,"callback");_a.$4.$ou(n.clientGenerated,!0,"notification.ClientGenerated");this.$81Y(n,t,i)}};_c.$1Dz=function(){_c.$1Dz.initializeBase(this,[null])};_c.$1Dz.prototype={$5ZC:function(n){n.$13L(null,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$1E0=function(n,t,i){this.$$d_$4VC=Function.createDelegate(this,this.$4VC);this.$$d_$3NV=Function.createDelegate(this,this.$3NV);_c.$1E0.initializeBase(this,[n,t,i])};_c.$1E0.prototype={get_$Ra:function(){return 13},$7Vu:function(n){return!0},$7do:function(){return new SyncState("OtherMailboxConfigurationSyncStateId","")},$7f2:function(n){n(new _c.$1Dz)},$876:function(){return new(_e.$Mf.$$(_g.$RV))(this.get_$A5W(),this.$$d_$3NV)},$7bT:function(){return new _e.$np(this.$$d_$4VC)},$3NV:function(n,t){var i=new _e.$AB(this.$CO.get_$A8());var r=this;i.$9k6(t,n,function(){})},$4VC:function(n){_e.$AB.$7hr(n)}};_c.$1E1=function(n,t){_c.$1E1.initializeBase(this,[n,t])};_c.$1E1.prototype={get_$6aD:function(){return 2},$7f7:function(n,t,i){i([new _c.$1E0(n,t,this.$QT)])},$9mv:function(n){return!1},$3uL:function(){return"OtherMailboxConfigurationSyncStateId"}};_c.$1E9=function(n){_c.$1E9.initializeBase(this,[n])};_c.$1E9.prototype={get_$A30:function(){return this.$U("wr")},set_$A30:function(n){$1M(this,"wr",n);return n}};_c.$sj=function(n,t){this.$cZ=new(_0365f.$o.$$(_c.$jl));this.$26p=_a.$3n.$$(Boolean).$8A();this.$4K=n;this.$1rh=t;this.$3Kj=!1};function $6nJ(n){if((n.$1rh!==n.$4K.get_$1ri()||n.$3Kj)&&!n.$4K.get_$1Nq()){_c.$20.$5W("CurrentUIModue: {0}, NewUIModule: {1}, readjusting sync queue",n.$1rh,n.$4K.get_$1ri());n.$1rh=n.$4K.get_$1ri();n.$3Kj=!1;for(var t=new(_0365f.$o.$$(_c.$jl)),r=new(_0365f.$o.$$(_c.$jl));n.$cZ.get_$B()>0;){var i=n.$cZ.get_$3q(0);n.$cZ.$68(0);i.$9mZ(n.$1rh)?t.$D(i):r.$D(i)}t.$69(r.$6Z());n.$cZ=t}}_c.$sj.prototype={$9tL:0,$4K:null,$1rh:0,$3Kj:!1,$3pa:function(n,t){_a.$4.$J(n,"module");var r=!1;if(n.get_$Ra()>this.$4K.get_$jJ()&&!n.$5e4()){_c.$20.$n5("Currently sync module type {0} is not supported",n.get_$H5());return}if(t){_c.$20.$14j("Enquing module '{0} at the front of the sync internalQueue",n);if(this.$26p.get_$3q(n.get_$1y()))for(var i=0;i<this.$cZ.get_$B();i++)if(this.$cZ.get_$3q(i).get_$1y()===n.get_$1y()){r=!0;n=this.$cZ.get_$3q(i);this.$cZ.$68(i);break}this.$cZ.$A3U(0,n)}else{if(this.$26p.get_$3q(n.get_$1y())){r=!0;_c.$20.$14j("Module '{0}' is already present in the sync internalQueue.",n);return}else{_c.$20.$14j("Module '{0}' is not already present in the sync internalQueue. Enquing at the back of the internalQueue",n);this.$cZ.$D(n)}this.$1rh!==this.$4K.get_$1ri()&&(this.$3Kj=!0)}if(!r){this.$26p.set_$3q(n.get_$1y(),!0);n.set_$3Ry(++this.$9tL);_c.$20.$14j("Completed enqueuing module : {0}",n);n.$9Ef()}},$7iI:function(){var n=null;if(this.$cZ.get_$B()>0){$6nJ(this);n=this.$cZ.get_$3q(0);if(n){this.$cZ.$68(0);this.$26p.$34(n.get_$1y());n.$9Dm()}}return n},$1r:function(){for(var i=this.$cZ.$6Z(),r=i.length,n=0;n<r;++n){var t=i[n];_c.$20.$14j("Module {0} sync cancelled, TrackingId {1} during sync internalQueue cleanup before FullSync",t.get_$H5(),t.get_$3Ry());t.$4J2()}this.$cZ=new(_0365f.$o.$$(_c.$jl));this.$26p=_a.$3n.$$(Boolean).$8A()}};_c.$1EA=function(n,t){_c.$1EA.initializeBase(this,[n,t,"ReminderNotification"])};_c.$1EA.prototype={$81Y:function(n,t,i){_a.$4.$Js(n.id,"ReminderNotification","reminderNotification.id");var r=new _c.$1BR(this.$4K.get_$1Nq(),this.$3J);if(this.$4K.$2cJ(r,!1)){if($3Vl(this,n,t.get_$34C())){_js.Trace.logInfo(_a.$0.$5q,"ReminderNotification throttled.");return}$2CY(this,n,r);return}i(n);this.$4K.$10I(r)}};_c.$ge=function(n,t){_c.$ge.initializeBase(this,[n,t,"RowNotification"]);_js.Trace.logInfo(_a.$0.$5q,"[SyncRowNotificationStrategy::Ctor]");var i=this;this.$1rE=new(_0365f.$4D.$$(_e.$Qa))(function(){return new _e.$Qa(i.$3J.get_$5a(),i.$3J.get_$3TS())});var r=this;this.$2SK=new(_0365f.$4D.$$(_e.$kF))(function(){return new _e.$kF(r.$3J.get_$5a(),r.$3J.get_$3TS())})};function $6nL(n,t){var i=_0365f.$58.$3p(t);if(i.Item)if(i.Conversation)_js.Trace.logError(_a.$0.$5q,"NOT saving the row notification to the client store. Both the Item and the Converation properties are non null. That should never happen. Folder Id={0}",i.FolderId);else if(n.$3J.$E9.$1cE(12,i.FolderId)){var r=i.Item;r.ParentFolderId=new _g.$3S(i.FolderId);var u=new _e.$U7(n.$2SK.get_$1g(),[r],[],[],null);u.set_$A5L(10);u.$A5O(null)}else return;else if(i.Conversation){if(n.$3J.$E9.$1cE(11,i.FolderId)){var f=i.Conversation;f.FolderId=new _g.$3S(i.FolderId);var e=new _e.$T0(n.$1rE.get_$1g(),[f],[]);e.set_$A5L(10);e.$A5O(null)}}else _js.Trace.logError(_a.$0.$5q,"NOT saving the row notification to the client store. Both the Item and the Converation properties are null. That should never happen. Folder Id={0}",i.FolderId)}function $6nM(n,t){if(t.Conversation){var r=t.Conversation;_js.Trace.logInfo(_a.$0.$5q,"Handling RowNotification id: {0}, EventType: {1}, ConversationType: true, convId: {2}, topic: {3}, lastDeliveryTime: {4}",t.FolderId||"",t.EventType,r.ConversationId?r.ConversationId.Id:"",r.ConversationTopic||"",r.LastDeliveryTime||"")}else{var i=t.Item;i&&_js.Trace.logInfo(_a.$0.$5q,"Handling RowNotification id: {0}, EventType: {1}, ConversationType: false, itemId: {2}, subject: {3}, lastReceivedTime: {4}",t.FolderId||"",t.EventType,i.ItemId?i.ItemId.Id:"",i.Subject||"",i.DateTimeReceived||"")}}_c.$ge.prototype={$1rE:null,$2SK:null,$81Y:function(n,t,i){var r=n;if($6(r.FolderId)){i(n);return}$6nM(this,r);if(r.FolderId!==_g.$h.$1i.nameToId("outbox").Id)if(t.get_$5TY()[r.FolderId]){var f=r.FolderId===_g.$h.$1i.nameToId("drafts").Id;var u=new _c.$Ta(r.FolderId,this.$4K.get_$1Nq()||f,this.$3J);if(this.$4K.$2cJ(u,r.EventType==="Reload"||this.$3J.$16D.get_$5ak())){if($3Vl(this,n,t.get_$34C())){_js.Trace.logInfo(_a.$0.$5q,"Reload RowNotification throttled folderid: {0}.",n.FolderId);return}$2CY(this,r,u);return}if(!f){(r.EventType==="RowAdded"||r.EventType==="RowModified")&&$6nL(this,r);i(r)}this.$4K.$10I(u)}else{i(r);return}}};_c.$10S=function(){_c.$10S.initializeBase(this,[1,"Core.Models.Sync.Setting"])};_c.$10S.prototype={get_$6fH:function(){return this.$U("USSF")},set_$6fH:function(n){$1M(this,"USSF",n);return n},get_$53I:function(){return this.$U("ASMFC")},set_$53I:function(n){$1M(this,"ASMFC",n);return n},get_$69F:function(){return this.$U("OSMFC")},set_$69F:function(n){$1M(this,"OSMFC",n);return n},get_$jJ:function(){return this.$U("MSMT")},set_$jJ:function(n){$1M(this,"MSMT",n);return n},get_$5jy:function(){return this.$U("MSFC")},set_$5jy:function(n){$1M(this,"MSFC",n);return n},get_$5a8:function(){return this.$U("ICU")},set_$5a8:function(n){$1M(this,"ICU",n);return n},get_$5jz:function(){return this.$U("MCEE")},set_$5jz:function(n){$1M(this,"MCEE",n);return n}};_c.$1ED=function(){_c.$1ED.initializeBase(this,[null])};_c.$1ED.prototype={$5ZC:function(n){var t=new _g.$ca(_a.$7.get_$29().$hb(-2).$99(),_a.$7.get_$29().$hb(3).$99());var i=new _g.$cY(this.get_$6u(),t);var r=new _g.$16H(this.$2D);n.$2M9(i,r,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$1EE=function(n,t,i){_c.$1EE.initializeBase(this,[n,t,i])};_c.$1EE.prototype={get_$Ra:function(){return 1},$9mr:function(){$192(this,"Last sync time of time zone table = "+this.get_$Id().LastSuccessfulSyncTime);var n=_a.$7.$an;_js.$9.$a(this.get_$Id().LastSuccessfulSyncTime)||(n=_a.$7.$42(this.get_$Id().LastSuccessfulSyncTime));return n.$2R(_a.$7.get_$29().$2o(-7))<0},$7Vu:function(n){return!0},$7do:function(){return new SyncState("TimeZoneOffsetsSyncStateId","")},$7f2:function(n){n(new _c.$1ED)},$876:function(){$Ak(this,String.format("Number of time zones = {0}",this.get_$A5W().Body.TimeZones.length));return new(_e.$N1.$$(_bc.$jr,_g.$Yo))(this.$CO.get_$A8().get_$1lx(),this.get_$A5W().Body.TimeZones)},$7bT:function(){return null},$9Af:function(){var t=this.$CO.get_$A8().get_$1lx();var r=this,n=this,i=this;t.$BT(new _a.$6j("SyncTimeZoneOffsetsModule.OnBatchCompleted"),function(n){r.$3J.get_$5a().$5hq(t,n,null,null)},function(){$Ak(n,"The time zone offsets table has been loaded");n.$3J.$6Tp(!0,function(){_c.$JE.prototype.$9Af.call(n)},function(t){$1J6(n,"Failed to set the offline component as ready to use after synchronizing the time zone data.",t.get_$52());n.$1h1(Error.create(t.get_$52()))})},function(n){$1J6(i,"Failed to load the time zone offsets table",n.$3v);i.$1h1(Error.create(n.$3v))})}};_c.$1EF=function(n,t){_c.$1EF.initializeBase(this,[n,t])};_c.$1EF.prototype={get_$6aD:function(){return 2},$7f7:function(n,t,i){i([new _c.$1EE(n,t,this.$QT)])},$9mv:function(n){return!1},$3uL:function(){return"TimeZoneOffsetsSyncStateId"}};_c.$1DZ=function(n,t,i,r,u){_c.$1DZ.initializeBase(this,[1102,n,t,i,r,u])};_c.$1DZ.prototype={get_syncResponse:function(){return this.$9G},get_$DM:function(){return"UTC"},$9n4:function(n){return n!=="ErrorItemNotFound"}};_c.$tP=function(n){this.$2eH=this.$$gta["_c.$tP"].TSyncResponse===Number||Type.isEnum(this.$$gta["_c.$tP"].TSyncResponse)?0:this.$$gta["_c.$tP"].TSyncResponse===Boolean?!1:null;_c.$tP.$$(this.$$gta["_c.$tP"].TSyncResponse).initializeBase(this);this.$10O=n};_c.$tP.$$=function(n){var t="$tP"+"$1"+"$"+n.getName().replace(/\./g,"_");if(!_c[t]){var r=_c[t]=function(){(this.$$gta=this.$$gta||{})["_c.$tP"]={TSyncResponse:n};for(var i=[],t=0;t<arguments.length;++t)i[t]=arguments[t];_c.$tP.apply(this,i)};r.registerClass("_c."+t,_h.$F3.$$(n),_a.$dC.$$(n),_a.$q0,_a.$jR);var u=_c.$tP.prototype;for(var f in u){var i={key:f,value:u[f]};"constructor"!==i.key&&(r.prototype[i.key]=i.value)}}return _c[t]};_c.$tP.prototype={$10O:null,get_syncResponse:function(){return this.$2eH},$6Kg:function(n,t,i){this.$2eH=n;t()}};_c.$sf=function(n){_c.$sf.$$(this.$$gta["_c.$sf"].TResult,this.$$gta["_c.$sf"].TResponseMessage).initializeBase(this);this.$10O=n};_c.$sf.$$=function(n,t){var i="$sf"+"$2"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_");if(!_c[i]){var u=_c[i]=function(){(this.$$gta=this.$$gta||{})["_c.$sf"]={TResult:n,TResponseMessage:t};for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];_c.$sf.apply(this,r)};u.registerClass("_c."+i,_h.$JQ.$$(n,t),_a.$dC.$$(t),_a.$q0,_a.$jR);var f=_c.$sf.prototype;for(var e in f){var r={key:e,value:f[e]};"constructor"!==r.key&&(u.prototype[r.key]=r.value)}}return _c[i]};_c.$sf.prototype={$10O:null,$2eH:null,get_syncResponse:function(){return this.$2eH},get_$oo:function(){return this.$10O},get_$DM:function(){return"UTC"},$4Os:function(n){_a.$4.$l(n,"responseMessage");this.$2eH=n}};_c.$1JS=function(n,t,i,r){_a.$4.$l(r,"ExternalSyncDependencies");this.$LY=n;this.$187=t;this.$3J=r;this.$1uV=i;this.$6aM=_a.$7.get_$29().$5R().toString()};_c.$1JS.prototype={$LY:0,$187:0,$3J:null,$6aM:null,$1uV:!1,get_$1y:function(){return""},get_$188:function(){return this.$LY},get_$2vG:function(){return this.$1uV},get_$5PD:function(){return!1},get_$9hk:function(){return!1},get_$86M:function(){return""},get_$7h8:function(){return!0},get_$40t:function(){return!1}};_c.$10I=function(n,t,i){_c.$10I.initializeBase(this,[n,t]);this.$1J=i};_c.$10I.prototype={$1J:null,$9mv:function(n){return this.$3J.$E9.$1cE(11,n)},$9ms:function(n){return this.$3J.$E9.$1cE(11,n)},$9mH:function(){return this.$3J.$Eh.get_$3Hw()-this.$1ND()<=0},$9mF:function(){return!0},$7f7:function(n,t,i){if(_c.$N3.isInstanceOfType(n))i([new _c.$lz(n,[],t,this.$QT)]);else{var r=this;this.$3J.$E9.$2Lz(11,this.$3J.get_$13x(),function(u){var f=null;u.length&&(f=[new _c.$lz(n,u,t,r.$QT),new _c.$10J(n,t,r.$QT),new _c.$1Da(n,t,new _e.$uq(r.get_$5a(),_h.$27.$1Ow),r.$1J)]);i(f)})}}};_c.$10K=function(n,t,i){_c.$10K.initializeBase(this,[n,t]);this.$1J=i};_c.$10K.prototype={$1J:null,$9mv:function(n){return!1},$9mx:function(){var n=this.$3J.get_$13x().Id;return!this.$3J.$E9.$40U(n)},$7f7:function(n,t,i){var r=this;this.$3J.$E9.$2Lz(4,this.$3J.get_$13x(),function(u){_a.$4.$9n(!_c.$Ta.isInstanceOfType(n),"sync conversation minimum module factory should not be invoked on notification based sync");var f=null;(_c.$N3.isInstanceOfType(n)||u.length)&&(f=[new _c.$1Dd(n,u[0],t,r.$QT),new _c.$10J(n,t,r.$QT),new _c.$1Db(n,t,new _e.$uq(r.get_$5a(),_h.$27.$1Ow),r.$1J)]);i(f)})}};_c.$1Dm=function(n,t,i){_c.$1Dm.initializeBase(this,[n,t]);this.$Gs=i};_c.$1Dm.prototype={$Gs:!1,get_$6aD:function(){return 0},$7f7:function(n,t,i){i([new _c.$1Dl(n,t,this.$QT,this.$Gs)])},$9mv:function(n){return!1},$3uL:function(){return"FolderHierarchySyncStateId"}};_c.$1E2=function(){_c.$1E2.initializeBase(this,[null])};_c.$1E2.prototype={$5ZC:function(n){var t=new _g.$w2(this.$2D);n.$qg(t,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$Me=function(n,t,i){this.$$d_$3NV=Function.createDelegate(this,this.$3NV);_c.$Me.initializeBase(this,[n,t,i]);this.$2A7=null;this.$6GK=new _h.$r2};function $6nE(n,t,i){if(t.UserOptions.HideDeletedItems!==i.UserOptions.HideDeletedItems||t.UserOptions.ConversationSortOrder!==i.UserOptions.ConversationSortOrder||t.SegmentationSettings.PredictedActions!==i.SegmentationSettings.PredictedActions){$Ak(n,String.format("UserOption changed. Marking Email data for cleanup."));n.$3J.$M.$9Yf(_h.$N2,new _h.$N2(11,!0))}return $6nF(n,t,i)}function $4ik(n,t){if(t===1&&n.get_$A5W()&&n.$2A7){var i=$6nE(n,n.$2A7,n.get_$A5W());i=i||!n.$6GK.$4e(n.$2A7,n.get_$A5W());$Ak(n,String.format("SyncType={0}, ShouldReload={1}",_a.$ON.toString(n.$Ay.$LY),i));n.get_$A5Y().$5PG(i);_a.$3N.$My(n.get_$A5W().SessionSettings.UserCulture)!==_a.$3N.$My(n.$2A7.SessionSettings.UserCulture)&&n.$3J.$M.$9Yf(_a.$t7,new _a.$t7)}}function $6nF(n,t,i){var e=!1;if(!t.SessionSettings||!i.SessionSettings||!t.SessionSettings.DefaultFolderIds||!t.SessionSettings.DefaultFolderNames||!i.SessionSettings.DefaultFolderIds||!i.SessionSettings.DefaultFolderNames)return e;var h=new _g.$V(t);var c=new _g.$V(i);var p=h;var w=c;h.$2z2();c.$2z2();for(var b=["inbox","drafts","outbox","sentitems","calendar","contacts","recipientcache","quickcontacts"],r=new Array(0),f,l=b,k=l.length,o=0;o<k;++o){var u=l[o];f=!1;var a=p.nameToId(u);var v=w.nameToId(u);if(a)if(v){if(a.Id!==v.Id){$SF(n,String.format("FolderId for distinguishedFolderIdName:{0} has changed",u));f=!0}}else{$1J6(n,String.format("Couldn't find FolderId for {0} in newUserConfiguraiton",u),"");f=!0}else{$1J6(n,String.format("Couldn't find FolderId for {0} in oldUserConfiguraiton",u),"");f=!0}if(f){var d=$6nG(n,u);r=r.concat.apply(r,d)}}if(r.length>0){$Ak(n,String.format("We need to clean up modules {0} due to FolderId changes",r.join()));e=!0;n.$3J.$Eh.$4Rx();for(var y=r,g=y.length,s=0;s<g;++s){var nt=y[s];n.$3J.$M.$9Yf(_h.$N2,new _h.$N2(nt,!0))}}return e}function $6nG(n,t){var i;switch(t){case"inbox":case"drafts":case"outbox":case"sentitems":i=[11];break;case"calendar":i=[9,10];break;case"contacts":case"recipientcache":case"quickcontacts":i=[7,8];break;default:$SF(n,String.format("We dont' cleanup module for distinguishedFolderIdName:{0}",t));i=new Array(0);break}return i}_c.$Me.prototype={$2A7:null,$6GK:null,get_$Ra:function(){return 0},$7Vu:function(n){return!0},$7do:function(){return new SyncState("OwaUserConfigurationSyncStateId","")},$7f2:function(n){n(new _c.$1E2)},$9U5:function(){this.$7yE(this.$$d_$h5,this.$$d_$6ZH)},$876:function(){return new(_e.$Mf.$$(_g.$L3))(this.get_$A5W(),this.$$d_$3NV)},$7bT:function(){return null},$7qu:function(n){$4ik(this,n);_c.$JE.prototype.$7qu.call(this,n)},$7qt:function(n){$4ik(this,n);_c.$JE.prototype.$7qt.call(this,n)},$3NV:function(n,t){var i=new _e.$AB(this.$CO.get_$A8());var r=this;i.$3NQ(t,n,function(){})},$7yE:function(n,t){var i=new _e.$AB(this.$CO.get_$A8());var r=this;i.$qg(function(t){r.$2A7=t;n()},t)}};_c.$1E3=function(n,t){_c.$1E3.initializeBase(this,[n,t])};_c.$1E3.prototype={get_$6aD:function(){return 1},$7f7:function(n,t,i){i([new _c.$Me(n,t,this.$QT)])},$9mv:function(n){return!1},$9n1:function(n){return!1},$9mw:function(){return!0},$3uL:function(){return"OwaUserConfigurationSyncStateId"}};_c.$1DP=function(n,t,i,r){_c.$1DP.initializeBase(this,[n]);this.$1lU=new _g.$gK;this.$1lU.FolderId=t;this.$1lU.WindowStart=i.$99();this.$1lU.WindowEnd=r.$99();this.$1lU.SyncState=n.State;this.$1lU.MaxChangesReturned=50};_c.$1DP.prototype={$1lU:null,$5ZC:function(n){var t=new _g.$1DQ(this.$2D);n.$6a4(this.$1lU,t,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$ga=function(n,t,i,r){_c.$ga.initializeBase(this,[_c.$ga.$7r6(n),t,i,r,0,!1])};_c.$ga.$7r6=function(n){switch(n){case 15:case 16:return 1102;case 17:case 18:return 1103;case 10:return 1101;default:return 1100}};_c.$ga.prototype={$Cm:null,get_syncResponse:function(){return this.$Cm},get_$DM:function(){return"UTC"},$9n4:function(n){return this.$2D===1101?!1:n!=="ErrorItemNotFound"},$6Kf:function(n){this.$Cm=n},$4Os:function(n){}};_c.$1D=function(n,t,i){this.$$d_$3pg=Function.createDelegate(this,this.$3pg);this.$$d_$2wU=Function.createDelegate(this,this.$2wU);this.$$d_$7yN=Function.createDelegate(this,this.$7yN);this.$$d_$2tg=Function.createDelegate(this,this.$2tg);this.$$d_$6ZH=Function.createDelegate(this,this.$6ZH);this.$$d_$h5=Function.createDelegate(this,this.$h5);this.$$d_$1lP=Function.createDelegate(this,this.$1lP);this.$3Q3=[];this.$1Av=-1;_a.$4.$J(n,"syncContext");_a.$4.$J(n.$3J,"syncContext.ExternalSyncDependencies");_a.$4.$J(n.$3J.get_$ZJ(),"syncContext.ExternalSyncDependencies.ActionQueue");_a.$4.$J(n.$3J.get_$1AY(),"syncContext.ExternalSyncDependencies.ConnectionManager");_a.$4.$J(n.$3J.$1Ln,"syncContext.ExternalSyncDependencies.DatapointTracker");_a.$4.$J(i,"itemSynchronizer");_a.$4.$J(i.get_$bV(),"itemSynchronizer.SyncStateProvider");this.$6aL=t;this.$Ay=n;this.$3J=n.$3J;this.$CO=i;this.$4ac=0;this.$4Y5=0;this.$2C6=!1;$3Vk(this)};_c.$1D.$7vO=function(n,t){_a.$4.$1G(n,"moduleName");_a.$4.$J(t,"syncContext");return n+":"+t.get_$1y()};function $3Vk(n){n.$2Mr=_a.$7.get_$29()}function $6n4(n){$Ak(n,"Restart syncing current module");n.$1Av=-1;n.$h5()}function $10j(n,t,i){Array.add(n.$3Q3,new _c.$1Do(t,i))}function $6nA(n,t){if(n.get_$9n7()){var i=this;$4ii(n,function(t){t.IsSynced=!0;t.Diagnostics.SyncType=n.get_$188();t.Diagnostics.SyncInProgress=!1;t.Diagnostics.SyncError="";var i=_a.$7.get_$29();t.LastSuccessfulSyncTime=_a.$7.$EZ(i);t.LastAttemptedSyncTime=t.LastSuccessfulSyncTime;n.$3J.$Eh.$9ji(t.Id,i.$5R())},t)}else t()}function $6n5(n){n.$1Ok=!0;n.get_$ZJ().set_$1qW(!1)}function $3Vi(n){n.$1Ok=!1;n.get_$1AY().$2rb();n.get_$ZJ().set_$1qW(!0)}function $2gn(n){if(n.$1bk){$SF(n,String.format("{0} has been aborted when invoking ExecuteCurrentStep",n.get_$1y()));return}$3Vk(n);if(!_h.$5C.$2n){n.$A2.$1lC=Error.create("Abort syncing because Sync is disabled");$3Vj(n,n.$A2.$1lC);return}if(!$6n0(n)){n.$6gB=_a.$6.acsa(_a.$0.$Rk,"WaitForActionQueueToDrain",!0);n.$6Yz=(new Date).getTime();$Ak(n,"Cannot execute current sync step number "+n.$1Av+" is triggering action queue process and waiting until it finishes.");n.$2qU=!0;$3Vi(n);return}n.get_$40t()?$6n1(n):$6n2(n)}function $6n1(n){var t=String.format("SyncModule_{0}.{1}",n.get_$H5(),n.$A2.$3Q4);var i=_a.$6.ads(_a.$0.$DK,t);$4ih(n);_a.$6.ade(i)}function $6n2(n){n.$4Y5=n.$1ND();var t=n.get_$H5()+":"+n.$A2.$3Q4;$Ak(n,String.format("Enqueing sync task: {0} on idle queue.",t));var i=this;n.$3J.$4P.$QE(_c.$1o.$A,t,function(){var i=n.$1ND()-n.$4Y5;i>=1e3&&$Ak(n,String.format("Sync task {0} was delayed for {1} milliseconds",t,i));$4ih(n)})}function $4ih(n){$Ak(n,String.format("Executing step #{0}: {1}",n.$1Av,n.$A2.$3Q4));$6n5(n);n.$A2.$6O6();n.$A2.$3Q2++;n.$A2.get_$9s1()()}function $6n0(n){return!n.get_$ZJ().get_$318()}function $6n3(n){$Ak(n,String.format("Re-executing step number {0}. Step execution count = {1}",n.$1Av,n.$A2.$3Q2));if(_h.$5C.$3Q6>0){var t=this;_js.$J.get_$I().$1w(_c.$1o.$A,"SyncExecuteCurrentStep",function(){$2gn(n)},n.$A2.get_$9dz())}else $2gn(n)}function $3Vj(n,t){if(n.$1bk){$SF(n,String.format("{0} has been aborted when invoking SyncAborted",n.get_$1y()));return}n.$1bk=!0;$SF(n,"Aborting syncing module Id "+n.get_$1y());t&&$SF(n,"Error: "+t.message);var i=this;$6n9(n,!1,t,function(){n.$5UW(function(){n.$1wp(6,t)})})}function $6n8(n,t){var i=this;$4ii(n,function(t){t.Diagnostics.SyncType=n.get_$188();t.Diagnostics.SyncInProgress=!0;t.LastAttemptedSyncTime=_a.$7.$EZ(_a.$7.get_$29())},t)}function $6n9(n,t,i,r){$Ak(n,String.format("Updating the sync diagnostics for module '{0}', SyncType: {1}, SyncInProgress: {2}, Error: {3}",n.get_$H5(),n.get_$188(),t,i));n.get_$bV().$9xa(n.get_$188(),t,i,r)}function $Ak(n,t){_js.Trace.logInfo(_c.$1o.$A,"{0}: {1}",n.get_$H5(),t)}function $192(n,t){}function $SF(n,t){_js.Trace.logWarning(_c.$1o.$A,"{0}: {1}",n.get_$H5(),t)}function $1J6(n,t,i){_js.Trace.logError(_c.$1o.$A,n.get_$H5()+": "+t+" [Data] {0}",i)}function $6n6(n){n.$3Qg=_a.$7.get_$29()}function $6n7(n){n.$4ac=_a.$7.get_$29().$5R()-n.$3Qg.$5R()}function $4ii(n,t,i){$192(n,String.format("Updating the SyncStateProperties"));n.get_$bV().$3SM(t,i)}_c.$1D.prototype={$6aL:null,$Ay:null,$3J:null,$CO:null,$2W4:null,$3ln:null,$A2:null,$30q:!1,$3q1:!1,$1Ok:!1,$2qU:!1,$4ac:0,$3Rx:0,$3Qg:null,$2C6:!1,$2Mr:null,$4Y5:0,$1bk:!1,$6gB:null,$6Yz:0,$6bn:0,$4Qz:null,$4R8:0,$1IS:0,$1IT:0,$1jJ:0,get_$1Ol:function(){return this.$1Ok},get_$GB:function(){var n=new _a.$ML(this.$2Mr,_a.$7.get_$29());return n.get_$9w7()<5},get_$3Ry:function(){return this.$3Rx},set_$3Ry:function(n){this.$3Rx=n;return n},get_$9tR:function(){return this.$3Qg},get_$bV:function(){return this.$CO.get_$bV()},get_$5VY:function(){return this.$2Mr},set_$5VY:function(n){this.$2Mr=n;return n},get_$5La:function(){return this.$3q1},set_$5La:function(n){this.$3q1=n;return n},get_$Id:function(){return this.$3ln},get_$H5:function(){return _a.$Ab.toString(this.get_$Ra())},get_$1AY:function(){return this.$3J.get_$1AY()},get_$ZJ:function(){return this.$3J.get_$ZJ()},get_$m6:function(){return this.$3J.$1Ln},get_$188:function(){return _a.$ON.toString(this.$Ay.$LY)},get_$1y:function(){return _c.$1D.$7vO(this.get_$H5(),this.$Ay)},get_$8EE:function(){return this.$2qU},get_$T6:function(){this.$2W4||(this.$2W4=this.$7de());return this.$2W4},get_$9md:function(){return this.get_$1AY().$Pf||_c.$lA.isInstanceOfType(this.$Ay)},get_$1gr:function(){return this.$Ay.$LY===3||this.get_$9me()?this.$Ay.get_$1y():""},get_$9me:function(){return this.$Ay.$LY===8},get_$87G:function(){return!1},get_$40t:function(){return this.$3J.$Eh.get_$18j()&&this.get_$87G()},get_$9n7:function(){return!_c.$N3.isInstanceOfType(this.$Ay)||this.$Ay.$1Km===2},$5e4:function(){return!1},$9mZ:function(n){return this.$Ay.$LY!==4&&this.$Ay.$LY!==7&&this.$9ma(n)},$y:function(){$6n6(this);this.$1bk=!1;if(_c.$N3.isInstanceOfType(this.$Ay)){_js.Trace.logInfo(_c.$1o.$A,"{0}: Starting cleanup for module {1}",_a.$7.get_$29(),this.get_$H5());_a.$4.$9n(this.$Ay.$1Km!==1,"Quota exceeded error is not processed through this code path at present");var n=this,t=this;this.$6Yk(function(){var t=n.$Ay;t.$9MH(n.get_$Ra());n.$1lP()},function(n){_js.Trace.logError(_a.$0.$DK,"Cleanup failed, but continuing with the rest of the sync. Error = "+n.message);n.message&&t.get_$T6().set_$6aA(n.message);t.$1lP()})}else{_js.Trace.logInfo(_c.$1o.$A,"{0}: Starting sync for module {1}",_a.$7.get_$29(),this.get_$H5());this.$10I()}},$10I:function(){$Ak(this,String.format("Starting Sync with SyncContext Id '{0}', Time: {1}",this.$Ay.get_$1y(),this.$3Qg));this.$1wp(1);$6n8(this,this.$$d_$2tg)},$7Zq:function(){$Ak(this,"Continue sync");if(this.$2qU){_a.$6.acea(this.$6gB);this.$6bn+=(new Date).getTime()-_a.$Q.$7y9(this.$6Yz);this.$2qU=!1;_js.Trace.logInfo(_c.$1o.$A,"{0}: Syncing module {1} step {2} continues its execution",_a.$7.get_$29(),this.get_$H5(),this.$1Av);$2gn(this)}},$9Ef:function(){this.$1wp(0)},$9Dm:function(){$3Vk(this)},$4J2:function(){this.$1wp(4)},$1h1:function(n){if(this.$A2){this.$A2.$3Q5=1;this.$A2.$1lC=n;this.$A2.$1ke=!1;this.$h5()}else $3Vj(this,n)},$9ma:function(n){return!1},$2tg:function(){this.$A2&&this.$A2.$Au();if(this.$1Av>=this.$3Q3.length)throw Error.invalidOperation("All the steps in this module have already been executed");this.$A2=this.$3Q3[++this.$1Av];$2gn(this)},$2wU:function(){$Ak(this,"Getting a currentSyncState");this.get_$bV().$2M6(this.$$d_$7yN,this.$$d_$6ZH)},$7yN:function(n){var t=$6(n)?this.get_$bV().$2LT():n.get_$20();this.$4Ou(t)},$4Ou:function(n){if(this.$5Qu(n)){$Ak(this,"This module is being synced for the first time i.e. the SyncState is <empty>");this.$30q=!0}else $Ak(this,"The module is NOT being synced for the first time. SyncState is "+n.State);$Ak(this,"Got a currentSyncState");this.$3ln=n;this.$2C6=_js.$9.$18(n.Diagnostics.SyncError);this.$h5()},$6ZH:function(n){var t=null;t=Error.create(n.get_$52());this.$A2.$1ke=n.get_$8Du();this.$3q1=n.get_$8Co();this.$3pg(t)},$5Qu:function(n){return n.State===""},$1lP:function(){if(this.$1bk){$SF(this,String.format("{0} has been aborted when invoking SyncCompleted",this.get_$1y()));return}$Ak(this,"Completed syncing");$3Vi(this);var n=this;$6nA(this,function(){n.$5UX(function(){n.$1wp(3)})})},$5UX:function(n){$Ak(this,"Post sync completed");n()},$7de:function(){return new _c.$4G(this.get_$Ra())},$h5:function(){if(this.$1bk){$Ak(this,"Ignoring StepCompleted as the module has been aborted");return}$3Vi(this);if(this.$A2.$3Q5)this.$A2.get_$6VO()?$6n3(this):$3Vj(this,this.$A2.$1lC);else{if(!$6(this.$A2.$1lC))throw Error.invalidOperation("previous StepError should be null at this point");this.$2tg()}},$1ND:function(){return _a.$7.get_utcNow().$5R()},$1wp:function(n,t){if(n===6||n===3){$6n7(this);var r=this.get_$m6();if(r.get_$2n()){this.$9z8();this.get_$T6().set_$5b5(this.$30q);this.get_$T6().set_$9tS(_a.$GM.toString(n));this.get_$T6().set_$188(this.get_$188());this.get_$T6().set_$2eI(_a.$S9.toString(this.$Ay.$187));this.$2W4.set_$9tQ(this.$Ay.$6aM);this.get_$T6().set_$9vG(this.$4ac);t&&t.message&&this.get_$T6().set_$6aA(t.message);r.$AN(this.get_$T6());_a.$g.$8r(this.$2W4.get_$Ra())}}var i=this;_js.$J.get_$I().$3r(_c.$1o.$A,"SyncInvokeProgressEventHandler_"+this.get_$H5()+"_"+_a.$GM.toString(n),function(){i.$6aL(i.$7f9(n,t));n===3&&_a.$6.acea(null,"SyncModule_"+i.get_$H5())})},$7f9:function(n,t){return _a.$S8.$E(n,this.get_$Ra(),this.$3Rx,this.get_$1y(),this.get_$1gr(),this.$30q,null,null,t)},$5UW:function(n){$Ak(this,"Processing sync aborted");n()},$9z8:function(){return},$7Mp:function(n){_a.$6.acea(this.$4Qz);this.$1IS=this.$1IS+(new Date).getTime()-this.$4R8;var t=n;t.get_$1Jc()&&(this.$1IT=this.$1IT+t.get_$1Jc().backEndTime);_a.$4.$J(n,"action");_a.$4.$J(n.$1f,"action.Error");if(this.$1bk){$Ak(this,"Ignoring ActionErrorCallback as the module has been aborted");return}$SF(this,String.format("Action failed, action name: {0}, error: {1}",n.$1n_2,n.$1f));this.get_$9md()||(this.$A2.$1ke=!1);this.$3pg(n.$1f)},$3pg:function(n){$SF(this,String.format("Error in current step number {0}. Error = {1}",this.$1Av,n?n.toString():""));this.$A2.$3Q5=1;this.$A2.$1lC=n;this.$h5()},$9cy:function(){$Ak(this,"Resetting currentSyncState to null");this.$3ln=null}};_c.$JE=function(n,t,i){this.$$d_$7Mp=Function.createDelegate(this,this.$7Mp);this.$$d_$9tB=Function.createDelegate(this,this.$9tB);this.$$d_$9XE=Function.createDelegate(this,this.$9XE);this.$$d_$5Cc=Function.createDelegate(this,this.$5Cc);this.$$d_$6M2=Function.createDelegate(this,this.$6M2);this.$$d_$9Af=Function.createDelegate(this,this.$9Af);this.$$d_$9tF=Function.createDelegate(this,this.$9tF);this.$$d_$9U5=Function.createDelegate(this,this.$9U5);this.$$d_$9tA=Function.createDelegate(this,this.$9tA);_c.$JE.$$(this.$$gta["_c.$JE"].TSyncAction,this.$$gta["_c.$JE"].TSyncResponse).initializeBase(this,[n,t,i]);$10j(this,this.$$d_$2wU,"GetSyncState");$10j(this,this.$$d_$9tA,"SyncChangesFromServer");$10j(this,this.$$d_$9U5,"PerformModuleSpecificAction");$10j(this,this.$$d_$9tF,"SynchronizeChangesToClientStore");$10j(this,this.$$d_$9Af,"OnBatchCompleted");switch(this.$Ay.$LY){case 7:$10j(this,this.$$d_$6M2,"ReconcileClientData");break;default:break}$10j(this,this.$$d_$5Cc,"ConfirmSyncCompleted")};_c.$JE.$$=function(n,t){var i="$JE"+"$2"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_");if(!_c[i]){var u=_c[i]=function(){(this.$$gta=this.$$gta||{})["_c.$JE"]={TSyncAction:n,TSyncResponse:t};for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];_c.$JE.apply(this,r)};u.registerClass("_c."+i,_c.$1D);var f=_c.$JE.prototype;for(var e in f){var r={key:e,value:f[e]};"constructor"!==r.key&&(u.prototype[r.key]=r.value)}}return _c[i]};_c.$JE.prototype={$1re:null,$4Z5:null,$2Z9:null,get_$A5W:function(){return this.$1re},get_$9Z9:function(){return 100},get_$A5X:function(){return this.$2Z9},get_$8Dd:function(){return!$6(this.$1re)&&this.$7Vu(this.$1re)},get_$A5Y:function(){this.$4Z5||(this.$4Z5=this.$877());return this.$4Z5},$7sI:function(){return this.get_$Ra()},$6M2:function(){if(_e.$xP.isInstanceOfType(this.$2Z9)){this.$9Ao();var t=this.$2Z9;var n=this,i=this;this.$CO.$6M2(t,this.get_$9Z9(),this.$$d_$9XE,function(){n.get_$T6().set_$3nh(t.get_$5IS());n.get_$T6().set_$3Jm(t.get_$3Jm());_js.Trace.logInfo(_a.$0.$DK,"Finished sync reconciliation (Reconciled/Detected: {0}/{1}).",n.get_$T6().get_$3Jm(),n.get_$T6().get_$3nh());n.get_$ZJ().$5PR(function(t){n.get_$T6().set_$7Ms(t.length);for(var r=t,u=r.length,i=0;i<u;++i){var f=r[i];_js.Trace.logWarning(_a.$0.$DK,"Existing action in the queue after sync reconciliation was done: {0}",_g.$3x.$U9(f))}n.$h5()},n.$$d_$3pg)},function(n){_js.Trace.logError(_a.$0.$DK,"Failed to reconcile client data. Error: {0}",n.get_$52());i.$6ZH(n)})}else{this.get_$T6().set_$3nh(-1);this.get_$T6().set_$3Jm(-1);this.$h5()}},$6Yk:function(n,t){_a.$4.$J(n,"onCleanupComplete");_a.$4.$J(t,"errorCallback");_js.Trace.logInfo(_c.$1o.$A,"Starting cleanup for module '{0}'",this.get_$1y());this.$9Ah();var i=this.$7bT();if(i){var r=this;this.$CO.$c1(this.$Ay.$1Km,i,n,function(n){$SF(r,"Module cleanup failed with error: "+n.get_$52());var i=Error.create(n.get_$52());t(i)})}else n()},$9tF:function(){$Ak(this,"Persisting changes to client store");this.$2Z9=this.$7f3();var n=this.$7do();n.IsSynced=this.get_$Id().IsSynced;n.LastSuccessfulSyncTime=this.get_$Id().LastSuccessfulSyncTime;n.Diagnostics.SyncInProgress=!0;this.$CO.$9tT(n,this.$Ay.get_$5PD(),this.$Ay.get_$86M(),this.$Ay.get_$9hk(),this.$2Z9,this.$$d_$h5,this.$$d_$6ZH)},$9XB:function(n){n()},$9XE:function(n){n()},$877:function(){return new _e.$1Dy},$9cy:function(){_c.$1D.prototype.$9cy.call(this);this.$1re=null},$7Mp:function(n){var t=n;if(t.get_$1Jc()&&t.get_$1Jc().responseCode==="ErrorInvalidSyncStateData"){$SF(this,"Receiving ErrorInvalidSyncStateData response");this.$3J.$M.$9Yf(_h.$N2,new _h.$N2(this.$7sI(),!1));this.$3J.$Eh.$4Rx();this.$3J.$M.$9Yf(_h.$S4,new _h.$S4(12));this.$1h1(Error.create("Abort syncing current module because receiving ErrorInvalidSyncStateData response"))}else _c.$1D.prototype.$7Mp.call(this,n)},$7f3:function(){if(!this.$1re)throw Error.invalidOperation("CurrentSyncResponse should not be null at this point");return this.$876()},$9tA:function(){if($6(this.get_$Id()))throw Error.invalidOperation("CurrentSyncState cannot be null before starting this step");if(this.$9mr()){var n=this;this.$7f2(function(t){if(t){t.add_$2C(n.$$d_$9tB);t.add_$1x(n.$$d_$7Mp);n.$4Qz=_a.$6.acsa(_a.$0.$Rk,"SyncModule.SubmitSyncAction",!0);n.$4R8=(new Date).getTime();n.$1jJ++;OwaApplication.$1W.$z(t)}else{$SF(n,"Sync action is null");n.$1h1(Error.invalidOperation("Sync action is null"))}})}else this.$1lP()},$9mr:function(){return!0},$9U5:function(){this.$h5()},$9Af:function(){this.$2vG(0);this.$h5()},$5Cc:function(){$Ak(this,"Confirming sync is complete");if(this.get_$8Dd())this.$1lP();else{this.$1wp(2,null);this.$9cy();$6n4(this)}},$5UX:function(n){this.$2vG(1);_c.$1D.prototype.$5UX.call(this,n)},$5UW:function(n){this.$2vG(2);_c.$1D.prototype.$5UW.call(this,n)},$2vG:function(n){this.$Ay.$LY===5?this.$7qt(n):n!==2&&this.$7qu(n)},$7qt:function(n){},$7qu:function(n){},$9Ah:function(){},$9Ao:function(){},$9tB:function(n){_a.$6.acea(this.$4Qz);this.$1IS=this.$1IS+(new Date).getTime()-this.$4R8;var t=n;t.get_$1Jc()&&(this.$1IT=this.$1IT+t.get_$1Jc().backEndTime);var i=n;this.$1re=i.get_syncResponse();var r=this;this.$9XB(function(){r.$h5()})}};_c.$4G=function(n){_c.$4G.initializeBase(this,[1,"Core.Models.Sync.ModuleStats"]);$1M(this,_c.$4G.$3DF,_a.$Ab.toString(n))};_c.$4G.prototype={get_$Ra:function(){return this.$U(_c.$4G.$3DF)},set_$Ra:function(n){$1M(this,_c.$4G.$3DF,n);return n},get_$5b5:function(){return this.$U(_c.$4G.$40R)},set_$5b5:function(n){$1M(this,_c.$4G.$40R,n);return n},get_$188:function(){return this.$U(_c.$4G.$4ZF)},set_$188:function(n){$1M(this,_c.$4G.$4ZF,n);return n},get_$2eI:function(){return this.$U(_c.$4G.$4ZA)},set_$2eI:function(n){$1M(this,_c.$4G.$4ZA,n);return n},get_$9tS:function(){return this.$U(_c.$4G.$4ZC)},set_$9tS:function(n){$1M(this,_c.$4G.$4ZC,n);return n},get_$6aA:function(){return this.$U(_c.$4G.$4Yy)},set_$6aA:function(n){$1M(this,_c.$4G.$4Yy,n);return n},get_$9vG:function(){return this.$U(_c.$4G.$4ad)},set_$9vG:function(n){$1M(this,_c.$4G.$4ad,n);return n},get_$4cW:function(){return this.$U(_c.$4G.$4cX)},set_$4cW:function(n){$1M(this,_c.$4G.$4cX,n);return n},get_$5Hz:function(){return this.$U(_c.$4G.$3n3)},set_$5Hz:function(n){$1M(this,_c.$4G.$3n3,n);return n},get_$9tQ:function(){return this.$U(_c.$4G.$4Z7)},set_$9tQ:function(n){$1M(this,_c.$4G.$4Z7,n);return n},get_$3nh:function(){return this.$U(_c.$4G.$3ni)},set_$3nh:function(n){$1M(this,_c.$4G.$3ni,n);return n},get_$3Jm:function(){return this.$U(_c.$4G.$4Pe)},set_$3Jm:function(n){$1M(this,_c.$4G.$4Pe,n);return n},get_$7Ms:function(){return this.$U(_c.$4G.$3c5)},set_$7Ms:function(n){$1M(this,_c.$4G.$3c5,n);return n}};_c.$1DY=function(n,t,i,r,u){_c.$1DY.initializeBase(this,[t]);_a.$4.$J(n,"foldersToSync");_a.$4.$J(t,"syncState");_a.$4.$7t(i,1,100,"maxChangesReturned");this.$1Bs=new Array(n.length);for(var f=0;f<n.length;f++)this.$1Bs[f]=new _g.$3S(n[f]);this.$35o=i;this.$1ci=r;this.$2sZ=u};_c.$1DY.prototype={$1Bs:null,$35o:0,$1ci:!1,$2sZ:!1,$7f5:function(n){var t=new _g.$gO(this.$35o);t.NumberOfDays=_h.$27.$2AV;t.MinimumCount=_h.$27.$186;t.MaximumCount=_h.$27.$1IB;t.FolderIds=this.$1Bs;t.SyncState=this.get_$oo().State;t.IsPartialFolderList=this.$1ci;t.DoQuickSync=this.$2sZ;t.ConversationShape=_h.$15.get_$5Wb();t.ConversationShape.InferenceEnabled=_g.$V.get_$I().get_$6H().get_$V0();t.ShapeName=_h.$15.$5PY(this.$1Bs[0],null);return new _g.$gM(n,t)},$5ZC:function(n){var t=this.$7f5(this.get_$6u());var i=new _g.$1DX(this.$2D);n.$6a5(t,i,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$gP=function(n){this.$5DA=[];_c.$gP.initializeBase(this);this.$30=n};function $6mh(n,t){for(var u=[],f=t,e=f.length,r=0;r<e;++r){var i=f[r];Array.add(n.get_$A4J(),_e.$E9.$13B(i.FolderId,i.ConversationId));Array.add(u,i.ConversationId.Id);n.$A4L(i.FolderId.Id)}_c.$20.$5W("SyncConversation received {0} deletes. List of conversations deleted = [{1}]",t.length,u.join(","))}function $6mg(n,t){for(var f={},e=[],o=t,s=o.length,r=0;r<s;++r){var i=o[r];Array.add(n.get_$A4I(),i);var u=i.ConversationId.Id;if($6(f[u])){f[u]=!0;Array.add(n.$5DA,new _g.$Sz(i.ConversationId))}var h=i.FolderId.Id;n.$A4L(h);Array.add(e,u+"::"+i.LastDeliveryTime+"::"+i.ConversationTopic)}_c.$20.$5W("SyncConversation received {0} AddsAndChanges. List of conversations added = [{1}]",t.length,e.join(","))}_c.$gP.prototype={$30:null,get_$oo:function(){return this.$30.SyncState},get_includesLastItemInRange:function(){return this.$30.IncludesLastItemInRange},get_$A4H:function(){return this.$30.ConversationViewDataList},$26f:function(){var n=this.$30.DeletedConversations;var t=this.$30.Conversations;n&&$6mh(this,n);t&&$6mg(this,t)}};_c.$9s=function(n,t,i,r){_c.$9s.initializeBase(this,[n,t,i]);this.$1J=r;this.$2qD=_a.$3n.$$(_g.$6O).$8A();this.$1Ib=_a.$3n.$$(String).$8A();this.$4Vj=!1;this.$1m7=0;this.$1m5=0;this.$3Rm=0;this.$3Rn=0};_c.$9s.$7yP=function(n,t,i,r){var u=n.$4F();var f=u.$2o(1-u.get_$51());var e=f.$HM(t);i.val=f.$2o(_c.$9s.$6ge);r.val=e.$2o(14)};function $6ma(n){var t=new _g.$Cd(new _g.$3S(n.$2k.Id));return new _c.$1DP(n.get_$Id(),t,n.$1Iy,n.$1VR)}function $4iU(n,t,i,r,u,f){var e=[];$Ak(n,String.format("Items to sync: {0}",t.length));var o=this;$3Vf(n,t,0,n.get_$8It(),i,r,u,e,function(){$Ak(n,String.format("Failed items to sync: {0}",e.length));$4iV(n,e,u,f)})}function $4iV(n,t,i,r){var u=this;$3Vf(n,t,0,1,!1,!1,i,[],function(){r()})}function $3Vf(n,t,i,r,u,f,e,o,s){var l=t.length-i;var h=Math.min(l,r);$Ak(n,String.format("SyncItems with offset = {0}, remaining = {1}, count = {2}",i,l,h));if(h){for(var a=new Array(h),c=0;c<h;c++)a[c]=t[i+c];i+=h;var v=this;n.$9tI(a,e,u,f,o,function(){$3Vf(n,t,i,r,u,f,e,o,s)})}else{$Ak(n,"Done syncing items");s()}}_c.$9s.prototype={$1J:null,$1Iy:null,$1VR:null,$2k:null,$2qD:null,$1Ib:null,$4Vj:!1,$1m7:0,$1m5:0,$3Rm:0,$3Rn:0,$44a:!1,get_$Ra:function(){return 10},get_$3lo:function(){return _g.$V.get_$I().get_$1I().get_$DM()},get_$8It:function(){return 50},$9ma:function(n){return n===1},$7un:function(){if(!_c.$9s.$mv){var n=this.$1J.get_$BQ()?_h.$15.get_$5Ot():_h.$15.get_$7qN();_c.$9s.$mv=_0365f.$2t.$3p(n);_c.$9s.$mv.MaximumBodySize=this.$3J.$7l==="Mouse"?51200:25600}return _c.$9s.$mv},$7Vu:function(n){this.$44a=n.IncludesLastItemInRange;return this.$44a&&!this.get_$Id().TryToIncrementWindowSizeOnNextSync},$7do:function(){return new CalendarSyncState(this.get_$A5W().SyncState,this.$2k.Id,this.$1Iy,this.$1VR,this.get_$3lo(),this.get_$Id().ApproximateWindowSize,this.get_$Id().TryToIncrementWindowSizeOnNextSync)},$4Ou:function(n){var t=n;if(this.$5Qu(n)){t.ApproximateWindowSize=3;t.TryToIncrementWindowSizeOnNextSync=6>t.ApproximateWindowSize}else if($6(t.ApproximateWindowSize)){t.ApproximateWindowSize=6;t.TryToIncrementWindowSizeOnNextSync=!1}else if(t.TryToIncrementWindowSizeOnNextSync&&this.$44a){var i=t.ApproximateWindowSize+3;if(i>=6){t.ApproximateWindowSize=6;t.TryToIncrementWindowSizeOnNextSync=!1}else t.ApproximateWindowSize=i}var r,u;_c.$9s.$7yP(_a.$7.get_$29(),t.ApproximateWindowSize,r={val:this.$1Iy},u={val:this.$1VR});this.$1Iy=r.val;this.$1VR=u.val;_c.$1D.prototype.$4Ou.call(this,n)},$876:function(){var i=this.$CO;var t=this.$Ay;var n=this.get_$A5W();return new _e.$7y(i.get_$A8(),_c.$10b.isInstanceOfType(t)||_c.$of.isInstanceOfType(t),this.$1Iy.$99(),n.UpdatedItems,n.RecurrenceMastersWithInstances,n.RecurrenceMastersWithoutInstances,n.DeletedItems,this.$2qD,this.$1Ib)},$7bT:function(){return new _e.$127(this.$CO.get_$A8().get_$lc(),this.$CO.get_$A8().get_$1k(),this.$CO.get_$A8().get_$oo())},$9XB:function(n){var t=this.get_$A5W();this.$1m7+=t.UpdatedItems.length;this.$1m5+=t.DeletedItems.length;this.$3Rm+=t.RecurrenceMastersWithInstances.length;this.$3Rn+=t.RecurrenceMastersWithoutInstances.length;(this.$1m7>0||this.$1m5>0||this.$3Rm>0||this.$3Rn>0)&&(this.$4Vj=!0);for(var i=[],u=0;u<t.RecurrenceMastersWithInstances.length;u++){var f=t.RecurrenceMastersWithInstances[u];this.$1Ib.set_$3q(f.UID,f.ItemId.Id);Array.add(i,f.ItemId)}for(var e=0;e<t.UnchangedRecurrenceMastersWithInstances.length;e++){var r=t.UnchangedRecurrenceMastersWithInstances[e];if(!this.$1Ib.$Mj(r.UID)){this.$1Ib.set_$3q(r.UID,r.ItemId.Id);Array.add(i,r.ItemId)}}for(var o=0;o<t.UpdatedItems.length;o++){var s=t.UpdatedItems[o];s.CalendarItemType==="Occurrence"&&this.$1Ib.$Mj(s.UID)||Array.add(i,s.ItemId)}$4iU(this,i,!0,!0,this.$2qD,n)},$9XE:function(n){var t=this.get_$A5X();var i=new Array(t.get_$5IS());var r=0;var f=this;t.$3rq(function(n){var t=new _g.$1q(n);i[r++]=t});var u=this;$4iU(this,i,!1,!1,t.$1iy,function(){_c.$JE.prototype.$9XE.call(u,n)})},$7f2:function(n){var t=this;_c.$D6.$7s3(this.$3J.get_$5a(),function(i){if(i){$Ak(t,String.format("Syncing calendar folder ('{0}').",i.Id));t.$2k=i;var r=$6ma(t);n(r)}else{$SF(t,"Could not find the primary calendar folder.");n(null)}})},$9z8:function(){var n=this.get_$T6();n.set_$4cW(this.$1m7);n.set_$5Hz(this.$1m5);n.set_$9w8(this.$3Rm);n.set_$9w9(this.$3Rn);n.set_$9tV($6(this.$1Iy)?"":this.$1Iy.$99());n.set_$9tU($6(this.$1VR)?"":this.$1VR.$99());n.set_$9tE($6(this.$2k)?"":this.$2k.Id);if(this.get_$Id()){var t=this.get_$Id();n.set_$7QS(t.ApproximateWindowSize);n.set_$9xV(t.TryToIncrementWindowSizeOnNextSync)}},$7de:function(){return new _c.$1DW(this.get_$Ra())},$7qu:function(n){if(n===1&&this.$4Vj&&(this.$Ay.$1uV||!this.$2C6)){$Ak(this,"Raising Hierarchy notification for calendar synced folders");this.get_$A5Y().$2v9([this.$2k.Id])}_c.$JE.prototype.$7qu.call(this,n)},$7qt:function(n){if(n===2||n===1){$Ak(this,"Raising Hierarchy notification for calendar all folders");this.get_$A5Y().$2v9([this.$2k.Id])}_c.$JE.prototype.$7qt.call(this,n)},$9cy:function(){this.$2qD=_a.$3n.$$(_g.$6O).$8A();this.$1Ib=_a.$3n.$$(String).$8A();_c.$JE.prototype.$9cy.call(this)},$9Ao:function(){if(this.$Ay.$LY===7){var n=this.$1ND()+288e5;this.$3J.$Eh.set_$3Hv(n);$Ak(this,String.format("Next calendar reconcile time: {0} utc ms",n))}_c.$JE.prototype.$9Ao.call(this)},$9tI:function(n,t,i,r,u,f){var s=new _c.$ga(this.get_$Ra(),n,this.$7un(),"FullCalendarItem");var e=this;s.add_$2C(function(r){e.$2Mr=_a.$7.get_$29();for(var h=r,l=h.$Cm.length,o=0;o<l;o++){var s=h.$Cm[o];if(!e.$9xP(t,s))if(i&&s.ResponseCode!=="ErrorItemNotFound")Array.add(u,n[o]);else{var c=String.format("Failed to sync item: {0}, ResponseCode: {1}",n[o].Id,s.ResponseCode);s.ResponseCode==="ErrorItemNotFound"?$SF(e,c):$1J6(e,c,"");Array.add(e.get_$A5W().DeletedItems,n[o])}}f()});var o=this;s.add_$1x(function(i){if(r){$SF(o,"Retry sync items action");$4iV(o,n,t,f)}else{$SF(o,"Sync items action failed");o.$7Mp(i)}});OwaApplication.$1W.$z(s)},$9xP:function(n,t){switch(t.ResponseCode){case"NoError":var r=t.Items;if(r&&r.length>0){_a.$4.$Js(r.length,1,String.format("There are unexpected number of items ({0}) in the response.",r.length));var i=r[0];_a.$4.$ou(i,null,String.format("The item should not be null with the response code '{0}'.",t.ResponseCode));!$6(i.Body)&&i.Body.IsTruncated&&(i.Body.Value="");!$6(i.TextBody)&&i.TextBody.IsTruncated&&(i.TextBody.Value="");n.set_$3q(i.ItemId.Id,i)}return!0;default:$SF(this,String.format("SyncItems encountered error (ResponseCode: {0}; MessageText: '{1}').",t.ResponseCode,t.MessageText));return!1}}};_c.$D6=function(n,t,i){_c.$D6.initializeBase(this,[n||new _e.$12H(t.get_$5a()),t]);this.$1J=i};_c.$D6.$7s3=function(n,t){_c.$D6.$7TG(n,function(){t(_c.$D6.$1q5)})};_c.$D6.$7TG=function(n,t){_c.$D6.$1q5?t():_e.$8C.$1aP(new _e.$bj(n,"UTC"),"calendar",function(n){n?_c.$D6.$1q5=n.get_$20().FolderId:_c.$20.$n5("The primary calendar folder is not present in the folder hierarchy.");t()},function(n){_c.$20.$Ed("Failed to find the calendar folder. Error: {0}",n);t()})};function $4iW(n,t){return!!_c.$D6.$1q5&&t===_c.$D6.$1q5.Id}_c.$D6.prototype={$1J:null,get_$6aD:function(){return 0},$7f7:function(n,t,i){i([new _c.$9s(n,t,this.$QT,this.$1J)])},$9mv:function(n){return $4iW(this,n)},$9my:function(){return this.$3J.$Eh.get_$3Hv()-this.$1ND()<=0},$9ms:function(n){return $4iW(this,n)},$9mF:function(){return!0},$3uL:function(){return"CalendarSyncState"},$3hi:function(n,t){if(_e.$i6.isInstanceOfType(n)){var i=t;var r=n;if(_c.$10R.prototype.$3hi.call(this,n,t)&&r.$58q===i.FolderId){var u=_g.$V.get_$I().get_$1I().get_$DM();if(i.TimeZone===u){var f=r.$1Iy.localeCompare(i.WindowStart);if(f>=0){var e=r.$1VR.localeCompare(i.WindowEnd);if(!(e>0))return!0}}else _js.Trace.logWarning(_c.$1o.$A,"Calendar module is synced to a different time zone ('{0}') than expected ('{1}').",i.TimeZone,u)}return!1}else throw Error.argumentType("context",Object.getType(n),_e.$i6,"The context type should match the module.");}};_c.$1Dj=function(n,t){_c.$1Dj.initializeBase(this,[n]);this.$Gs=t};_c.$1Dj.prototype={$Gs:!1,$5ZC:function(n){var t=new _g.$gR(this.get_$6u(),new _g.$gT(_h.$15.get_$3xF()));t.Body.ShapeName="Folder";t.Body.ReturnRootFolder=!0;t.Body.SyncState=this.get_$oo().State||"";t.Body.ReturnPeopleIKnowFolder=!0;this.$Gs&&(t.Body.FolderToMoveToTop=_h.$Lj.$3jQ(_h.$j.$2Kz));var i=new _g.$1Dk(this.$2D);n.$6aB(t,i,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$1Dl=function(n,t,i,r){_c.$1Dl.initializeBase(this,[n,t,i]);this.$1An=[];this.$3lQ=[];this.$Gs=r};_c.$1Dl.prototype={$Gs:!1,$1An:null,$3lQ:null,$3H9:0,$16T:null,get_$Ra:function(){return 2},$7Vu:function(n){return n.IncludesLastFolderInRange},$7f2:function(n){n(new _c.$1Dj(this.get_$Id(),this.$Gs))},$876:function(){return new _e.$14s(this.$CO.get_$A8().get_$2x(),this.$1An,this.$16T,this.$3H9)},$7bT:function(){return null},$7do:function(){return new SyncState("FolderHierarchySyncStateId","")},$9XB:function(n){if(!this.get_$A5W().RootFolder)throw Error.invalidOperation("Server returned null value for RootFolder in the SyncFolderHierarchy response. That should never happen");_e.$8C.$6Te(this.get_$A5W().RootFolder,0);Array.add(this.$1An,this.get_$A5W().RootFolder);for(var r={},u=this.get_$A5W().Changes.Changes,t=0;t<u.length;t++){var f=u[t];switch(f.ChangeType){case"Create":case"Update":var i=f.Folder;if(i.DistinguishedFolderId==="outbox"){this.$16T=i.FolderId.Id;this.$3H9=t+1}_e.$8C.$6Te(i,t+1);Array.add(this.$1An,i);r[i.FolderId.Id]=!0;break;case"Delete":break}}$Ak(this,String.format("Number of created/updated folders = {0} and number of deleted folders = {1}",this.$1An.length,this.$3lQ.length));var o=this,e=this;this.$3J.$E9.$6fV(r,function(){_c.$JE.prototype.$9XB.call(o,n)},function(t){$1J6(e,"An error occured during updating the sync folder settings: {0}",t.toString());_c.$JE.prototype.$9XB.call(e,n)})},$7qu:function(n){!n&&this.get_$A5W()&&this.$Ay.$LY===1&&this.get_$A5Y().$3sL(this.get_$A5W());_c.$JE.prototype.$7qu.call(this,n)},$7qt:function(n){this.get_$A5W()&&!n&&this.get_$A5Y().$3sL(this.get_$A5W());_c.$JE.prototype.$7qt.call(this,n)},$9cy:function(){this.$1An=[];this.$3lQ=[];_c.$JE.prototype.$9cy.call(this)}};_c.$1Do=function(n,t){_a.$4.$J(n,"stepDelegate");this.$6Z9=n;this.$3Q4=t;this.$Au()};_c.$1Do.prototype={$6Z9:null,$3Q4:null,$3Q5:0,$1lC:null,$3Q2:0,$1ke:!1,get_$9s1:function(){return this.$6Z9},get_$6VO:function(){return this.$1ke&&this.$3Q2<_h.$5C.$46z},set_$6VO:function(n){this.$1ke=n;return n},get_$9dz:function(){return _h.$5C.$3Q6},$6O6:function(){this.$3Q5=0;this.$1lC=null},$Au:function(){this.$3Q2=0;this.$1ke=!0;this.$6O6()}};_c.$10R=function(n,t){_a.$4.$J(t,"ExternalSyncDependencies");this.$3J=t;this.$QT=n||new _e.$dE(this.get_$5a(),this.$3uL())};function $6nB(n,t){var r=n.$3J.$Eh.$7ut(n.$3uL());if(t!==100){var i=_h.$5C.$2AQ[n.get_$6aD()];i||t!==5||n.$40Q||(i=_h.$5C.$4QA);return n.get_$6aD()===1&&(n.$40Q||t===2||t===7||t===8||t===9||t===11)||_a.$7.get_$29().$5R()-r>i}else return!0}_c.$10R.prototype={$QT:null,$3J:null,$40Q:!0,get_$5a:function(){return this.$3J.get_$5a()},$9mu:function(n){return $6nB(this,n)},$9cr:function(){this.$40Q=!1},$9mz:function(){return!0},$9n1:function(n){var t=OwaApplication.$4K;return t.$4aL===n},$9n0:function(){return!1},$9my:function(){return!1},$9mt:function(){return!1},$9mw:function(){return!1},$9mx:function(){return!1},$9ms:function(n){return!1},$9mE:function(n){var t=!1;switch(n){case 1:t=!0;break;case 2:t=this.$9mH();break;case 4:t=this.$9mF();break;case 3:t=this.$9mG();break;default:break}return t},$9mH:function(){return!1},$9mF:function(){return!1},$9mG:function(){return!1},$4bl:function(n,t,i){n.$4Vf(this)?this.$7f7(n,t,i):i(null)},$So:function(n,t){var i=this,r=this;this.$QT.$2wU(function(r){var u=i.$3hi(n,r);t(u)},function(){t(!1)})},$1d5:function(n,t){var i=this,r=this;this.$QT.$2wU(function(r){var u=i.$3hi(n,r);var f=i.$7vQ(n,r);t(u,f)},function(){t(!1,null)})},$1ND:function(){return _a.$7.get_utcNow().$5R()},$3hi:function(n,t){return t.IsSynced},$7vQ:function(n,t){return t.ModuleSpecificContext}};_c.$1E4=function(n,t){_c.$1E4.initializeBase(this,[n]);this.$5fw=t};_c.$1E4.prototype={$5fw:null,$5ZC:function(n){var t=new _g.$gd(50);t.SyncState=this.get_$oo().State||"";t.JumpHeaderValues=this.$5fw;t.MaxPersonas=5e3;var i=new _g.$gb(this.get_$6u(),t);var r=new _g.$1E5(this.$2D);n.$6aJ(i,r,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$1E6=function(){_c.$1E6.initializeBase(this,[null])};_c.$1E6.prototype={$5ZC:function(n){var t=new _g.$w3(this.$2D);n.$1am(t,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$1E7=function(n,t,i){_c.$1E7.initializeBase(this,[n,t,i])};_c.$1E7.prototype={get_$Ra:function(){return 7},$7Vu:function(n){return!0},$7do:function(){return new SyncState("PeopleFiltersSyncStateId","")},$7f2:function(n){n(new _c.$1E6)},$9ma:function(n){return n===2},$876:function(){$Ak(this,String.format("Number of created/updated people filters = {0}",this.get_$A5W().length));return new(_e.$N1.$$(_bc.$d5,_g.$eY))(this.$CO.get_$A8().get_$4Mo(),this.get_$A5W())},$7bT:function(){return new(_e.$Sp.$$(_bc.$d5))(this.$CO.get_$A8().get_$4Mo())},$5UX:function(n){var t=this;_c.$IT.$7TI(this.$3J.get_$5a(),function(){_c.$JE.prototype.$5UX.call(t,n)})}};_c.$1E8=function(n,t){_c.$1E8.initializeBase(this,[n,t])};_c.$1E8.prototype={get_$6aD:function(){return 1},$7f7:function(n,t,i){i([new _c.$1E7(n,t,this.$QT)])},$9mv:function(n){return!1},$9mF:function(){return!0},$3uL:function(){return"PeopleFiltersSyncStateId"}};_c.$KK=function(n,t,i,r,u){this.$2g3=0;_c.$KK.initializeBase(this,[n,t,i]);this.$Wx=u;this.$3QZ={};this.$1m5=0;this.$1m7=0;this.$5Cs=r};function $4il(n,t){t.length?n.get_$A5Y().$7qn(t):$1J6(n,"Contacts folder list should not be empty","")}function $6nH(n,t){var r=null;if(t){var u=$4im(n);r={};for(var i=0;i<t.length;++i)r[u[i]]=t[i]}return r}function $4im(n){return _a.$10.get_$DB().culture().people.headerSeekToValues}function $6nI(n){return!_js.$9.$a(n.get_$Id().State)}_c.$KK.prototype={$3QZ:null,$1m7:0,$1m5:0,$5Cs:null,$Wx:null,get_$Ra:function(){return 8},$9ma:function(n){return n===2},$7Vu:function(n){return n.IncludesLastItemInRange},$4Ou:function(n){if(n.UserCultureAtLastSync&&n.UserCultureAtLastSync!==this.$3J.$Em){$SF(this,String.format("User culture has changed from '{0}' to '{1}', existing personas will be wiped",n.UserCultureAtLastSync,this.$3J.$Em));this.$2g3=1;var t=this;this.$CO.$c1(3,this.$7bT(),function(){n.State="";t.$6Kh(n)},this.$$d_$6ZH)}else this.$6Kh(n)},$7f2:function(n){var t=$6nI(this)?null:$4im(this);n(new _c.$1E4(this.get_$Id(),t))},$9z8:function(){var n=this.get_$T6();n.set_$4cW(this.$1m7);n.set_$5Hz(this.$1m5);n.set_$A30(this.$2g3)},$7de:function(){return new _c.$1E9(this.get_$Ra())},$876:function(){return new _e.$ee(_e.$6H.$E(this.$CO.get_$A8()),new _e.$AB(this.$CO.get_$A8()),this.$CO.get_$A8().get_$3ig(),this.$CO.get_$A8().get_$6Gw(),this.get_$A5W().People,this.get_$A5W().DeletedPeople,$6nH(this,this.get_$A5W().JumpHeaderSortKeys))},$9XB:function(n){if(this.get_$Id().SortKeyVersionAtLastSync!==SyncState.$4Hj&&this.get_$A5W().SortKeyVersion!==this.get_$Id().SortKeyVersionAtLastSync){$SF(this,String.format("Sort key version has changed from '{0}' to '{1}', existing personas will be wiped",this.get_$Id().SortKeyVersionAtLastSync,this.get_$A5W().SortKeyVersion));this.$2g3=4;var i=this;this.$CO.$c1(3,this.$7bT(),function(){i.get_$A5W().SyncState="";i.get_$A5W().IncludesLastItemInRange=!1;_c.$JE.prototype.$9XB.call(i,n)},this.$$d_$6ZH);return}this.$1m7+=this.get_$A5W().People.length;this.$1m5+=this.get_$A5W().DeletedPeople.length;for(var t=0;t<this.get_$A5W().People.length;++t)for(var r=0;r<this.get_$A5W().People[t].FolderIds.length;++r)this.$3QZ[this.get_$A5W().People[t].FolderIds[r].Id]=!0;$Ak(this,String.format("Number of created/updated persona = {0} and number of deleted persona = {1}",this.get_$A5W().People.length,this.get_$A5W().DeletedPeople.length));_c.$JE.prototype.$9XB.call(this,n)},$7Mp:function(n){var t=n;if(t.get_$2aS()==="ErrorFullSyncRequiredException"||t.get_$2aS()==="ErrorTooManyContactsException"){_c.$20.$5W("Sync action failed with {0}, wiping the persona store",t.get_$2aS());this.$2g3=t.get_$2aS()==="ErrorFullSyncRequiredException"?2:3;var i=this;this.$CO.$c1(3,this.$7bT(),function(){i.get_$Id().State="";_c.$JE.prototype.$7Mp.call(i,n)},this.$$d_$6ZH)}else _c.$JE.prototype.$7Mp.call(this,n)},$7qu:function(n){if(n===1&&_0365f.$58.$B(this.$3QZ)>0&&(this.$Ay.$1uV||!this.$2C6)){var t=[];var i=this.$3QZ;for(var r in i){var u={key:r,value:i[r]};Array.add(t,u.key)}$Ak(this,"Raising Persona notification for people synced folders");$4il(this,t)}_c.$JE.prototype.$7qu.call(this,n)},$7qt:function(n){if(n===2||n===1){$Ak(this,"Raising Persona notification for people all folders");$4il(this,this.$5Cs)}_c.$JE.prototype.$7qt.call(this,n)},$7do:function(){var n=new SyncState("PeopleSyncStateId",this.get_$A5W().SyncState);n.UserCultureAtLastSync=this.$3J.$Em;n.SortKeyVersionAtLastSync=this.get_$A5W().SortKeyVersion;return n},$7bT:function(){return new _e.$1Ae(_e.$6H.$E(this.$CO.get_$A8()))},$1lP:function(){this.$Wx.get_$2kZ().get_$2kY()===1&&this.$Wx.$9tN();_c.$1D.prototype.$1lP.call(this)},$6Kh:function(n){_c.$1D.prototype.$4Ou.call(this,n)}};_c.$IT=function(n,t){_c.$IT.initializeBase(this,[n,t]);_a.$4.$J(t.$12,"NativeBridge should not be null.")};_c.$IT.$7TI=function(n,t){_e.$Gm.$1am(new(_e.$7j.$$(_bc.$d5,_e.$Gm))(n,_e.$1n.$7e),function(i){for(var u=[],r=0;r<i.length;++r)if(_js.$9.$a(i[r].$3tD()))_c.$20.$n5("PeopleFilterItem entry folderId is empty");else{_c.$20.$5W("Caching contacts folder '{0}' ",i[r].$3tD());Array.add(u,i[r].$3tD())}_e.$8C.$1aP(new _e.$bj(n,_e.$1n.$7e),"recipientcache",function(n){if(n){var i=n.get_$1y().toString();if(_js.$9.$a(i))_c.$20.$n5("RecipientCacheFolderItem folderId is empty");else{_c.$20.$5W("Cacheing recipient cache folder '{0}'.",i);Array.add(u,i)}}else _c.$20.$n5("RecipientCacheFolderItem is null");_c.$IT.$2n2=u;t()},function(n){_c.$20.$Ed("Failed to fetch the recipient cache folder. Error: {0}",n);t()})},function(n){_c.$20.$Ed("Failed to get all folders. Error: {0}",n);t()})};_c.$IT.prototype={get_$6aD:function(){return 1},$7f7:function(n,t,i){i([new _c.$KK(n,t,this.$QT,_c.$IT.$2n2,this.$3J.$12.$Wx)])},$9mv:function(n){_c.$20.$5W("Checking if sync people should occur for folder '{0}'",n);return Array.contains(_c.$IT.$2n2,n)},$9mF:function(){return!0},$3uL:function(){return"PeopleSyncStateId"}};_c.$1EB=function(n,t,i){_c.$1EB.initializeBase(this,[n,t,i])};_c.$1EB.prototype={get_$Ra:function(){return 3},$7Vu:function(n){return!0},$7f2:function(n){n(new _c.$sk(this.get_$Id(),this.$3J.$13.get_$67()))},$9ma:function(n){return n===1},$9z8:function(){this.get_$A5W()&&this.get_$T6().set_$4cW(this.get_$A5W().Reminders.length)},$876:function(){$Ak(this,String.format("Number of created reminders = {0}",this.get_$A5W().Reminders.length));return new(_e.$N1.$$(_bc.$XW,_g.$O8))(this.$CO.get_$A8().get_$gn(),this.get_$A5W().Reminders)},$7bT:function(){return new(_e.$Sp.$$(_bc.$XW))(this.$CO.get_$A8().get_$gn())},$7qu:function(n){n===1&&this.get_$A5W()&&this.get_$A5W().Reminders.length>0&&(this.$Ay.$1uV||!this.$2C6)&&this.get_$A5Y().$2LG();_c.$JE.prototype.$7qu.call(this,n)},$7qt:function(n){(n===2||n===1)&&this.get_$A5Y().$2LG();_c.$JE.prototype.$7qt.call(this,n)},$5UW:function(n){if(this.$Ay.$LY===1){$Ak(this,"Generating reminder notification on sync aborted");this.get_$A5Y().$2LG()}_c.$JE.prototype.$5UW.call(this,n)},$7do:function(){return new SyncState("RemindersSyncStateId","")}};_c.$sk=function(n,t){_c.$sk.initializeBase(this,[n]);this.$1yE=t};function $6nK(n){var t=new _g.$Lp(n.get_$6u());var i=_a.$7.get_$29().$2o(14);t.Body.EndTime=_a.$7.$EZ(i);t.Body.ReminderType=0;t.Body.MaxItems=_e.$Aa.$35t;n.$1yE&&(t.Body.ReminderGroupType=0);return t}_c.$sk.prototype={$1yE:!1,$5ZC:function(n){var t=$6nK(this);var i=new _g.$w4(this.$2D);n.$wc(t,i,this.$$d_$A6H,this.$$d_$9RZ)}};_c.$1EC=function(n,t){_c.$1EC.initializeBase(this,[n,t])};_c.$1EC.prototype={get_$6aD:function(){return 0},$7f7:function(n,t,i){i([new _c.$1EB(n,t,this.$QT)])},$9mv:function(n){return!1},$9n0:function(){return!0},$9ms:function(n){return n==="Reminders"},$3uL:function(){return"RemindersSyncStateId"}};_c.$20=function(){};_c.$20.$14j=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t]};_c.$20.$5W=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t];_js.Trace.logInfo(_c.$1o.$A,n,i)};_c.$20.$n5=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t];_js.Trace.logWarning(_c.$1o.$A,n,i)};_c.$20.$Ed=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t];_js.Trace.logError(_c.$1o.$A,n,i)};_c.$10b=function(n,t){_c.$10b.initializeBase(this,[2,0,!0,t]);this.$6aK=n};_c.$10b.prototype={$6aK:0,get_$1y:function(){return"TimeBasedSyncContextId"},$4Vf:function(n){return n.$9n1(this.$6aK)}};_c.$1o=function(n,t,i,r,u){this.$$d_$9tJ=Function.createDelegate(this,this.$9tJ);this.$$d_$9NH=Function.createDelegate(this,this.$9NH);this.$$d_$99E=Function.createDelegate(this,this.$99E);this.$$d_$4KX=Function.createDelegate(this,this.$4KX);this.$4aL=288e5;this.$5Aj=144e5;this.$5k0=6048e5;this.$3Qe=new Sys.EventHandlerList;this.$3s5=new _c.$14z(_c.$1o.$6aE,_c.$1o.$5k2);_c.$1o.resolveInheritance();this.dispose=this.$1Q;_c.$1o.initializeBase(this);_a.$4.$J(n,"ExternalSyncDependencies");_a.$4.$J(i,"taskRunner");this.$Gs=u;this.$3J=n;this.$xq=-1;this.$4P=i;this.$1J=r;_h.$5C.$2n=t;_c.$20.$5W("SyncSettings IsEnabled :"+_h.$5C.$2n);_e.$1f.add_$4KX(this.$$d_$4KX);n.get_$ZJ().add_$5an(this.$$d_$99E);n.$Eh.add_$A1m(this.$$d_$9NH);n.$16D.$9a1(this);this.$57N=new _c.$Hq(n.$16D,n.$M,this,this.$3J.$1Ln);this.$3Qb=new Array(0);this.$4Yz=new _c.$1Df(this,n.$M,n.get_$1AY(),_a.$g.$8s,n.$E9);this.$2AT=new _c.$sj(this,this.get_$1ri());this.$1dk=new _e.$k0(n.$4t);_h.$27.$4RJ(n.$7l);n.$2AP.$49(this);$6mk(this)};function $6mu(n,t){var i=this;return n.$4P.$oE(_c.$1o.$A,"CleanupAndReconcilation",function(){_h.$5C.$2n&&n.$6J6(function(){$2gm(n,0,4)})},t)}function $2CW(n,t,i){_a.$4.$l(t,"context");var r=n.$3J.$E9.$40U(n.$3J.get_$13x().Id);$4ic(n,0,n.get_$3Qc().$7vP(t,n.get_$jJ(),r,n.get_$1ri()),t,i)}function $6mr(n,t){var i=n.$1dk.$7sJ(n.$6r);if(!i||!i.length){t();return}for(var e=0,c=this,o=function(t){_js.Trace.logInfo(_c.$1o.$A,"Removing {0} from ConfigCleanup list",_a.$Ab.toString(t));n.$1dk.$6N6(t)},s=new _c.$N3(4,n.$3J,o),f=i,h=f.length,u=0;u<h;++u){var r=f[u];var l=this;n.get_$iM()[r].$4bl(s,n.$$d_$9tJ,function(u){if($6(u)||!u.length||$6(u[0])){_js.Trace.logWarning(_c.$1o.$A,"We can't get the CleanupModule base on SyncModuleType {0}",_a.$Ab.toString(r));n.$1dk.$6N6(r)}else for(var o=u,s=o.length,f=0;f<s;++f){var h=o[f];_js.Trace.logInfo(_c.$1o.$A,"Enqueuing {0} for ConfigChangeCleanup",_a.$Ab.toString(r));n.$2AT.$3pa(h)}++e===i.length&&t()})}}function $4if(n,t){switch(t){case 5:case 12:case 4:case 11:break;default:throw Error.invalidOperation("We don't support VerifyEmailModuleFactory for "+_a.$Ab.toString(t));}}function $4ia(n){if(n.$4PC){_c.$20.$5W("Quota cleanup already in progress");return}if(n.get_$jJ()<=5){_c.$20.$5W("Reached minimum module limit for cleanup");if(n.get_$m6().get_$2n()){var t=new _a.$T(1,"FatalQuotaError",_a.$7.get_$29());n.get_$m6().$AN(t)}n.$3J.$M.$9Yf(_h.$oU,new _h.$oU);$3Vg(n)}else{_c.$20.$5W("Start cleanup");n.$4PC=!0;var i=this;$6mo(n,n.get_$jJ(),function(t){t.$6Yk(function(){_c.$20.$5W("Quota Cleanup Succeeded, Module: {0}",t.get_$H5());n.set_$jJ(n.get_$jJ()-1);$3Vg(n);if(n.get_$m6().get_$2n()){var i=new _a.$T(1,"QuotaExceededError",_a.$7.get_$29());n.get_$m6().$AN(i)}n.$3J.$E9.$5iG(_a.$Ab.toString(n.get_$jJ()),_a.$g.$8s,!0)},function(i){_c.$20.$Ed("Quota Cleanup Failed, Module: {0}, Exception:{1}",t.get_$H5(),i.message);$3Vg(n)})})}}function $6ms(n,t){n.$3J.$Eh.get_$1ma()&&_c.$20.$n5("Aborted syncing the module Id {0} due to error: {1} ",t.$2W5,t.$DT?t.$DT.message:"");if(!n.$3J.$Eh.get_$18j()&&!n.$2FD){var i=t.$DT;if(i)i.responseCode!=="ErrorTooManyContactsException"&&(n.$2FD=!0);else{_c.$20.$n5("Can't cast error to ActionRecord for module {0}",t.$Ra);n.$2FD=!0}}if(n.$Ff.get_$5La()){n.$Ff.set_$5La(!1);n.$2AT.$3pa(n.$Ff)}$2CX(n)}function $2gm(n,t,i){if(n.get_$3Qf()){if(n.$Ff&&!n.$Ff.get_$GB()){_c.$20.$n5("Module {0} is not active, lastHeartBeatTime = {1}. SyncManager continues to sync the next module.",n.$Ff.get_$H5(),n.$Ff.get_$5VY());n.$Ff.$1h1(Error.create(String.format("Aborted by sync manager due to inactive,lastHeartBeatTime={0}, IsWaitingForActionQueue={1},IsHighPriorityActionEnqueued={2}",n.$Ff.get_$5VY(),n.$Ff.get_$8EE(),n.$3J.get_$ZJ().get_$318())))}}else{var r=this;n.$3Qj=n.$4P.$1w(_c.$1o.$A,"SyncNextModule",function(){n.$4ZE=!0;_c.$20.$5W("Start a new sync session");n.$op=i;(1===n.$op||2===n.$op||4===n.$op)&&_a.$6.$1c(_c.$1o.$A,$4id(n));$2CX(n)},t)}}function $2CX(n){if(n.$4PD){n.$Ff=null;n.$4Z4=!0;$4ia(n)}else{_c.$20.$5W("Syncing next module");n.$Ff=n.$2AT.$7iI();if(!n.$Ff){$4ib(n,5,null);return}Array.add(n.$3Qb,n.$Ff.get_$H5());$6mx(n)}}function $6mx(n){var t=n.$Ff.get_$H5();if(n.$Ff.get_$Ra()<=n.get_$jJ()||n.$Ff.$5e4()){var i=Math.floor(_a.$7.get_$29().$5R()/6e4);if(n.$3s5.$87w(i)){n.$3s5.$A0Y(i);var u=this;n.$4P.$3r(_c.$1o.$A,"SyncStartCurrentModule_"+t,function(){_js.Trace.logInfo(_c.$1o.$A,"{0}: Starting module {1}",_a.$7.get_$29(),t);_a.$6.acsa(_a.$0.$Q4,"SyncModule_"+t);_a.$Q.set_$9tK(_a.$Q.get_$Lk());n.$Ff.$y()})}else{_c.$20.$n5("Aborted module {0}, TrackingId {1} due to sync frequency throttling",t,n.$Ff.get_$3Ry());if(n.get_$m6().get_$2n()){var r=new _a.$T(1,"FrequencyThrottlingModuleAborted",_a.$7.get_$29());n.get_$m6().$AN(r)}n.$Ff.$4J2();$4ib(n,6,null)}}else{_c.$20.$n5("Aborted module {0}, TrackingId {1} because it is higher than the MaxSyncModuleType {2}",t,n.$Ff.get_$3Ry(),n.get_$jJ());n.$Ff.$4J2();$2CX(n)}}function $4ib(n,t,i){_c.$20.$5W("Sync session completed");$6mw(n);$6mq(n);(1===n.$op||2===n.$op||4===n.$op)&&_a.$6.$1E(null,$4id(n));1!==n.$op||t!==5||n.$2FD||n.get_$3Qc().$9kN();$6mp(n,t,i)}function $6mq(n){if(n.$26B&&(n.$op===6||n.$op===1)){_a.$6.$2kI(n.$26B);_a.$Q.$lE=n.get_$1Nq()?"ALT1":_a.$Q.$lE;_a.$Q.$46Z(2);n.$26B=null}}function $6mw(n){n.$3Qj=null;n.$4ZE=!1;Array.clear(n.$3Qb)}function $4ic(n,t,i,r,u){var f=this;n.get_$iM()[i[t]].$4bl(r,n.$$d_$9tJ,function(f){if(f)for(var o=f,s=o.length,e=0;e<s;++e){var h=o[e];n.$2AT.$3pa(h)}++t<i.length?$4ic(n,t,i,r,u):u()})}function $4ie(n,t){_a.$4.$l(t,"e");_a.$4.$l(t.$Ra,"e");_a.$4.$l(t.$Mq,"e.ModuleType");_c.$20.$14j("Module {0}, TrackingId {1}, Event {2}",t.$Ra,t.$65q,_a.$GM.toString(t.$Mq));var i=n.$3Qe.getHandler(_a.$Ab.toString(t.$Ra).toLowerCase());if(i){_c.$20.$5W("Invoke sync progress event handler for moduleType: {0}, eventType: {1}",_a.$Ab.toString(t.$Ra),t.$Mq);i(t)}}function $6mp(n,t,i){_c.$20.$14j("Receiving sync completed event");var r=_a.$S8.$7f4(t,i);$4ie(n,r)}function $3Vg(n){n.$4PD=!1;n.$4PC=!1;if(n.$4Z4){_c.$20.$5W("Resuming sync after quota cleanup");n.$4Z4=!1;$2CX(n)}}function $6mo(n,t,i){if(t===15||t===16||t===17||t===18||t===19)throw Error.argumentOutOfRange("ItemsMinimum and ItemsFull do not have factories and hence should never be provided to this method");var r=n.get_$iM()[t];var f=this;var u=new _c.$N3(1,n.$3J,function(n){});var e=this;r.$4bl(u,n.$$d_$9tJ,function(n){i(n[0])})}function $6mv(n,t){var i=this;return n.$4P.$oE(_c.$1o.$A,"SyncTimeBased",function(){_h.$5C.$2n&&$6mn(n,t,function(){$2gm(n,0,2)})},t)}function $6mn(n,t,i){_c.$20.$5W("Populate time based sync with period {0}",t);var r=this;$2CW(n,new _c.$10b(t,n.$3J),function(){i()})}function $6ml(n,t){_c.$20.$5W("Populate periodic cleanup modules");var i=this,r=this;$2CW(n,new _c.$N3(2,n.$3J,function(n){}),function(){t()})}function $6mm(n,t){_c.$20.$5W("Populate periodic reconcile modules");var i=this;$2CW(n,new _c.$1BJ(n.$3J),function(){t()})}function $6mt(n){if(!_js.$9.$a(n.get_$2Kq())&&_a.$7.get_$29().$5R()>_a.$7.$42(n.get_$2Kq()).$9K(n.$5k0).$5R()){_js.Trace.logInfo(_c.$1o.$A,"Reseting MaxSyncModule to its default value");n.set_$jJ(_c.$1o.$1tz);n.set_$2Kq(null);if(n.get_$m6().get_$2n()){var t=new _a.$T(1,"MaxSyncModuleReset",_a.$7.get_$29());n.get_$m6().$AN(t)}}}function $4id(n){return 1===n.$op?"Core.Models.Sync.Full":3===n.$op?"Core.Models.Sync.NotificationBased":2===n.$op?"Core.Models.Sync.TimeBased":"Core.Models.Sync.Cleanup"}function $6mk(n){n.$3J.$Eh.get_$3Hw()||n.$3J.$Eh.set_$3Hw(n.get_$2qV()+144e5);n.$3J.$Eh.get_$3Hv()||n.$3J.$Eh.set_$3Hv(n.get_$2qV()+288e5)}_c.$1o.prototype={$3J:null,$4P:null,$1J:null,$Gs:!1,$2tv:null,$Ff:null,$2AT:null,$3Qj:null,$4PD:!1,$4PC:!1,$4Z4:!1,$xq:0,$2Kp:null,$6b1:null,$6b0:null,$2Ws:null,$4Z2:null,$2FD:!1,$op:0,$6r:null,$4Yz:null,$4ZE:!1,$3Qb:null,$1dk:null,$26B:null,$HU:!1,$57N:null,get_$1Ol:function(){return!!this.$Ff&&this.$Ff.get_$1Ol()},get_$7fp:function(){return this.$Ff.get_$H5()},get_$3Qf:function(){return!!this.$3Qj},set_$3Qf:function(n){this.$3Qj=n?new _js.$Yk(null):null;return n},get_$1Nq:function(){return!this.get_$3Qc().get_$18j()},get_$1ri:function(){return this.$3J.$uV.get_$2E5()},get_$iM:function(){$6(this.$2tv)&&(this.$2tv=this.$7cP());return this.$2tv},set_$iM:function(n){this.$2tv=n;return n},get_$9tD:function(){return this.$3J.$2AP},get_$5a:function(){return this.$3J.get_$5a()},get_$1Nf:function(){return this.$HU},get_$jJ:function(){if(this.$xq===-1){var n=this.get_$1dj().$3x("MaxSyncModuleType");this.$xq=_js.$9.$a(n)?_c.$1o.$1tz:parseInt(n)}return this.$xq},set_$jJ:function(n){_a.$4.$7t(n,0,_c.$1o.$1tz,"MaxSyncModuleType");this.$xq=n;this.get_$1dj().$DI("MaxSyncModuleType",n.toString());_c.$20.$5W("Set local storage maxSyncModuleType = {0}",n);return n},get_$2Kq:function(){_js.$9.$a(this.$2Kp)&&(this.$2Kp=this.get_$1dj().$3x("FirstQuotaExceededErrorTime"));return this.$2Kp},set_$2Kq:function(n){if(_js.$9.$a(n)){this.get_$1dj().$Cl("FirstQuotaExceededErrorTime");this.$2Kp=n}else{_a.$7.$42(n);this.$2Kp=n;this.get_$1dj().$DI("FirstQuotaExceededErrorTime",n);_c.$20.$5W("Set local storage FirstQuotaExceededErrorTime = {0}",n)}return n},get_$3Qc:function(){this.$4Z2||(this.$4Z2=this.$7f6());return this.$4Z2},get_$17y:function(){return this.$6r},set_$17y:function(n){this.$6r=n;return n},get_$994:function(){return this.$3J.$16D},get_$9xm:function(){return this.$3J.$uV},get_$2qV:function(){return _a.$7.get_utcNow().$5R()},get_$67Y:function(){$6(this.$2Ws)&&(this.$2Ws=this.$7f8());return this.$2Ws},get_$ZJ:function(){return this.$3J.get_$ZJ()},get_$m6:function(){return this.$3J.$1Ln},get_$1dj:function(){return this.$3J.$4t},$1Sf:function(n,t){_a.$4.$l(n,"type");_a.$4.$l(t,"handler");this.$3Qe.addHandler(_a.$Ab.toString(n).toLowerCase(),t)},$2BP:function(n,t){_a.$4.$l(n,"type");_a.$4.$l(t,"handler");this.$3Qe.removeHandler(_a.$Ab.toString(n).toLowerCase(),t)},$y:function(){_js.Trace.logInfo(_c.$1o.$A,"Starting the sync manager");this.$6r=_a.$7.$Zp(_a.$7.get_$29());if(!_h.$5C.$2n){_js.Trace.logInfo(_c.$1o.$A,"Sync is disabled");return}this.$HU=!0;this.$3J.$2AP.$3vC(1);this.$9sY();this.$3J.$13.get_$67()||this.$9fO();this.$4Yz.$9sX()},$1I4:function(n){_a.$4.$J(n,"onSyncStopped");_c.$20.$5W("Stopping");_h.$5C.$2n=!1;this.$Au();if(this.get_$3Qf()){_c.$20.$5W("Wait for sync complete");if(this.$Ff)_c.$20.$5W("The current sync module : {0}, StartTime {1}",this.$Ff.get_$H5(),this.$Ff.get_$9tR());else{var t=new Sys.StringBuilder;t.appendLine("SyncSession is on while currentSyncModule is null.");t.appendLine(String.format("SyncTimerCallbackInvoked:{0}",this.$4ZE));t.appendLine(String.format("SyncModuleLogForCurrentSyncSession:{0}",this.$3Qb));_c.$20.$Ed(t.toString())}var i=this;this.$1Sf(20,function(t){t.$Mq===5&&n()})}else n()},$So:function(n,t,i){_a.$4.$J(t,"context");_a.$4.$J(i,"syncStatusCallback");this.get_$iM()[n].$So(t,i)},$1d5:function(n,t,i){_a.$4.$J(t,"context");_a.$4.$J(i,"syncStatusCallback");this.get_$iM()[n].$1d5(t,i)},$7ur:function(n,t,i){$4if(this,n);var r=null;r=this.get_$iM()[n];r.$7us(t,i)},$6N3:function(n,t){_a.$4.$9n(_bc.$Hz.isInstanceOfType(t),"The context type should match the module.");var i=t;_a.$4.$J(i.FolderId,"Invalid call to IsSynced with no folder ID specified.");$4if(this,n);_js.Trace.logInfo(_c.$1o.$A,"Removing Folder {0} SyncState for module {1}",i.FolderId.Id,_a.$Ab.toString(n));var r=null;r=this.get_$iM()[n];r.$6N3(t)},$4KX:function(){_c.$20.$5W("OnQuotaExceeded");_js.$9.$a(this.get_$2Kq())&&this.set_$2Kq(_a.$7.get_$29().$99());this.$4PD=!0;this.$Ff&&this.$Ff.get_$GB()||$4ia(this)},$2cJ:function(n,t){_a.$4.$J(n,"syncContext");if(!_h.$5C.$2n||n.get_$2vG())return!1;for(var i=0;i<this.get_$jJ();i++)if(n.$4Vf(this.get_$iM()[i])&&!_c.$10G.isInstanceOfType(this.get_$iM()[i])){var r=_c.$10Q.isInstanceOfType(this.get_$iM()[i])||_c.$10K.isInstanceOfType(this.get_$iM()[i])||_c.$10P.isInstanceOfType(this.get_$iM()[i])||_c.$10I.isInstanceOfType(this.get_$iM()[i]);return r&&!t?!1:!0}return!1},$10I:function(n){_a.$4.$J(n,"syncContext");_c.$20.$5W("Starting {0} sync",_a.$ON.toString(n.get_$188()));this.$9xN(n)},$9rl:function(){_c.$20.$5W("Handling user refresh event");this.$10I(new _c.$zQ(this.$3J))},$9rf:function(){this.$10I(new _c.$1A8(this.$3J))},$1UC:function(n){if(!_h.$5C.$2n){_js.Trace.logInfo(_c.$1o.$A,"Sync is disabled");return}this.$26B=this.$26B||_a.$6.$2kJ(_a.$0.$Rk,"Sync");_a.$Q.set_$2eI(_a.$S9.toString(n));_a.$Q.set_$188(_a.$ON.toString(1));_a.$Q.set_$6aG(_a.$Q.get_$Lk());_c.$20.$5W("Starting full sync {0}",_a.$S9.toString(n));this.$2FD=!1;var t=this;$6mr(this,function(){$2CW(t,new _c.$of(t.$3J,n),function(){t.$6J6(function(){$2gm(t,0,1)})})})},$9fO:function(){_c.$20.$5W("Schedule periodic sync, cleanup and reconcilation...");this.$6b1=$6mv(this,this.$4aL);this.$6b0=$6mu(this,this.$5Aj)},$6Yp:function(n){this.$10I(new _c.$Ta(n,!0,this.$3J))},$6Yt:function(){this.$26B=_a.$6.$2kJ(_a.$0.$Rk,"Sync");_a.$Q.set_$188(_a.$ON.toString(6));_a.$Q.set_$6aG(_a.$Q.get_$Lk());this.$10I(new _c.$lA(this.$3J))},$7ld:function(){if(!_h.$5C.$2n){_c.$20.$5W("Enable sync manager");_h.$5C.$2n=!0;this.$Au();this.$1UC(2)}},$Au:function(){_js.Trace.logInfo(_c.$1o.$A,"Resetting sync state");$6mt(this);this.$2AT.$1r()},$4c:function(){_c.$20.$14j("SyncManager is disposing");this.$57N.$1Q();this.$4Yz.dispose();_e.$1f.remove_$4KX(this.$$d_$4KX);this.get_$ZJ().remove_$5an(this.$$d_$99E);this.$4P.$4z(this.$6b1);this.$4P.$4z(this.$6b0);this.$9yL();this.$3J.$16D.$9yE(this);this.$2Ws=null},$7cP:function(){var n=new Array(_c.$1o.$1tz+1);n[0]=new _c.$1E3(null,this.$3J);n[1]=new _c.$1EF(null,this.$3J);n[2]=new _c.$1Dm(null,this.$3J,this.$Gs);n[3]=new _c.$1EC(null,this.$3J);n[4]=new _c.$10K(null,this.$3J,this.$1J);n[5]=new _c.$10Q(null,this.$3J,this.$1J);n[6]=new _c.$1Di(null,this.$3J);n[7]=new _c.$1E8(null,this.$3J);n[8]=new _c.$IT(null,this.$3J);n[9]=new _c.$1DT(null,this.$3J);n[10]=new _c.$D6(null,this.$3J,this.$1J);n[11]=new _c.$10I(null,this.$3J,this.$1J);n[12]=new _c.$10P(null,this.$3J,this.$1J);n[13]=new _c.$1E1(null,this.$3J);n[14]=new _c.$10G(null,this.$3J);return n},$7f8:function(){var n=new Array(6);n[0]=new _c.$si(this.get_$5a(),this,this.$3J);n[1]=new _c.$1EA(this,this.$3J);n[2]=new _c.$ge(this,this.$3J);n[3]=new _c.$1DV(this,this.$3J);n[4]=new _c.$1DU(this,this.$3J);n[5]=new _c.$1DO(this,this.$3J);return n},$7f6:function(){return _c.$Md.$E(this.$3J.$Eh,this.$3J.$M)},$6J6:function(n){var t=this;$6ml(this,function(){$6mm(t,function(){n()})})},$9tJ:function(n){_a.$4.$J(n,"e");$4ie(this,n);if(n.$Mq===1||n.$Mq===2||n.$Mq===6||n.$Mq===3)if(this.$Ff){if(n.$2W5!==this.$Ff.get_$1y()){_c.$20.$n5("Ignore event {0} from moduleId {1}  since it is different from currentSyncModuleId:{2}",_a.$GM.toString(n.$Mq),n.$2W5,this.$Ff.get_$1y());return}}else{_c.$20.$n5("Ignore event {0} from moduleId {1}  since CurrentSyncModule is null",_a.$GM.toString(n.$Mq),n.$2W5);return}if(n.$Mq===6)$6ms(this,n);else if(n.$Mq===3){var t=this.get_$iM()[n.$Ra];t&&t.$9cr();$2CX(this)}},$9sY:function(){for(var i=this.get_$67Y(),u=i.length,t=0;t<u;++t){var r=i[t];var n=r;this.$3J.$16D.$9a0(r.get_$1Fq(),n.$$d_$3vK||(n.$$d_$3vK=Function.createDelegate(n,n.$3vK)))}},$9yL:function(){if(!$6(this.$2Ws))for(var t=this.get_$67Y(),i=t.length,n=0;n<i;++n){var r=t[n];this.$3J.$16D.$9yD(r.get_$1Fq())}},$9xN:function(n){if(!_h.$5C.$2n){_js.Trace.logInfo(_c.$1o.$A,"Sync is disabled");return}var t=this;$2CW(this,n,function(){$2gm(t,n.get_$7h8()?500:0,n.$LY)})},$99E:function(n,t){_c.$20.$5W(Object.getType(n).getName()+"."+t+" changed");this.get_$ZJ().get_$CL()&&this.$Ff&&this.$Ff.$7Zq()},$9NH:function(n){n||this.get_$3Qc().$9e3()}};_c.$lz=function(n,t,i,r){_c.$lz.initializeBase(this,[n,t,i,r]);for(var u=null,f=new Array(0),s=t,h=s.length,e=0;e<h;++e){var o=s[e];o===_g.$h.$1i.nameToId("sentitems").Id?u=o:Array.add(f,o)}if(u)if(f.length)if(this.$3J.get_$13x().Id===u){this.set_$wO([u]);this.$1uA=f;this.$1ci=!0}else{this.set_$wO(f);this.$1uA=[u];this.$1ci=!0}else{this.set_$wO([u]);this.$1ci=!1}else{this.set_$wO(f);this.$1ci=!1}};function $6mb(n){if(n.$7I){var t=_a.$7.get_$29();n.$7I.$Cc.set_$3Rg(t.$5R()-n.$7I.$1Xp);var i=String.format("{0}, TT:{1}(ms), TTBT={2}, C={3}, CNC={4}, CN={5}, M={6}, TS={7}, I={8}",_a.$7.$EZ(t),n.$7I.$Cc.get_$3Rg(),n.$7I.$Cc.get_$6be(),n.$7I.$Cc.get_$2Wv(),n.$7I.$Cc.get_$3Ef(),n.$7I.$Cc.get_$3Ee(),n.$7I.$Cc.get_$1gs(),n.$7I.$Cc.get_$2Wy(),n.$7I.$Cc.get_$67o());n.$7I.$1dj.$DI("LastSuccessfullEmailCleanup",i);_js.Trace.logInfo(_a.$0.$5a,"Completed full email cleanup, time taken {0} ms",n.$7I.$Cc.get_$3Rg());n.$7I.$9sT()}}_c.$lz.prototype={$1ci:!1,$7I:null,$1uA:null,get_$Ra:function(){return 11},get_$8CF:function(){return this.$1ci},get_$89s:function(){return!this.$1uA&&this.get_$A5W().IncludesLastItemInRange},$7Vu:function(n){if(n.IncludesLastItemInRange)if(this.$1uA){this.set_$wO(this.$1uA);this.$1uA=null;return!1}else return!0;else return!1},$7bT:function(){this.$7I=new _e.$14J(this.$Ay.$1Km,this.$CO.get_$A8(),"ConversationSyncStateId","MessageSyncStateId",_g.$h.$1i,this.get_$m6(),_h.$27.$186,_h.$27.$2AV,this.$3J.$4t);return new _e.$CM(this.$7I)},$5UX:function(n){$6mb(this);_c.$sg.prototype.$5UX.call(this,n)},$9Ah:function(){if(this.$Ay.$LY===4&&this.$Ay.$1Km===2){var n=this.$1ND()+144e5;this.$3J.$Eh.set_$3Hw(n);$Ak(this,String.format("Next email cleanup time {0} utc ms",n))}_c.$JE.prototype.$9Ah.call(this)}};_c.$OM=function(n,t,i,r){this.$$d_$7tI=Function.createDelegate(this,this.$7tI);this.$1rZ=[];this.$2qH=_a.$3n.$$(Boolean).$8A();this.$1sx=[];this.$2rq={};_c.$OM.initializeBase(this,[n,t,i]);this.$1J=r};function $6me(n){if($6(n.$1sx)||!n.$1sx.length){n.$h5();return}var t=new _c.$ga(n.get_$Ra(),n.$1sx,_h.$15.$5QR(n.$1J.get_$BQ()),"EditableItems");t.add_$2C(n.$$d_$7tI);t.add_$1x(n.$$d_$7Mp);OwaApplication.$1W.$z(t)}function $6md(n){for(var i=Math.min(_h.$27.$1Ow,n.get_$1rF().length),r=new Array(i),t=0;t<i;t++){var u=n.get_$1rF()[t];var f=new _g.$Sz(u);f.SyncState=$4iX(n).$5DL[u.Id]||"";r[t]=f}return r}function $6mc(n,t){var i=t.ConversationId.Id;var r=$4iX(n).$5AD;if($6(r[i]))throw Error.invalidOperation("Last modified time for conversation not available. This should never happen. Conversation Id = "+i);t.LastModifiedTime=r[i]}function $4iX(n){return n.get_$Id()}_c.$OM.prototype={$1J:null,$3Rl:0,get_$4bA:function(){return this.get_$A5n()},get_$1rF:function(){return this.get_$A5o()},$7f2:function(n){var t=$6md(this);_c.$20.$5W("Creating SyncConversationItems action for {0} items",t.length);var r=_h.$15.get_$1Ot();var u=_h.$27.$3Qa?"ItemPartNormalizedBody":"ItemPartUniqueBody";var f=this.$Ay.$3J.$5B.$3u("ModernMail");var i=0;f&&(i=1);var e=new _c.$1DZ(t,20,r,u,i);n(e)},$7bT:function(){return null},$876:function(){return new _e.$aI(this.$CO.get_$A8(),this.get_$A5m(),this.$1rZ,this.$2qH,this.get_$1N())},$9XB:function(n){$Ak(this,"Process current SyncConversationItems response");for(var s={},h=!1,f=0;f<this.get_$A5W().length;f++){var c=this.get_$A5W()[f];if(c.ResponseClass!=="Success"){h=!0;continue}var i=c.Conversation;s[i.ConversationId.Id]=!0;if(i.ConversationNodes){$6mc(this,i);Array.add(this.get_$A5m(),i);for(var l=i.ConversationNodes,a=l.length,e=0;e<a;++e){for(var r=l[e],u=0;u<r.Items.length;u++){var t=r.Items[u];if(_g.$h.$1i.doesIdEqualName(t.ParentFolderId,"drafts")){var o=t.ItemId.Id;if($6(this.$2rq[o])){this.$2rq[o]=!0;var v=new _g.$1q(o);Array.add(this.$1sx,v)}}_js.Trace.logInfo(_c.$1o.$A,"Setting item IsDataSynced flag to true for conversation item parts");_e.$Bt.$2bn(t,CustomSyncData.$1rs,1);var y=_e.$Oo.$5F4(t);Array.add(this.$1rZ,t);this.$2qH.set_$3q(t.ItemId.Id,!0);r.Items[u]=y}this.$3Rl+=r.Items.length}}this.set_$A5n(this.get_$A5n()+1)}h&&this.$A5q(this.get_$1rF(),s);this.$A5r(this.$1rZ);_c.$JE.prototype.$9XB.call(this,n)},$7do:function(){return new ConversationItemSyncState(this.get_$1rF(),null,null)},$7de:function(){return new _c.$1Dc(this.get_$Ra())},$9z8:function(){var n=this.get_$T6();n.set_$7a3(this.get_$4bA());n.set_$8EX(this.$3Rl);_c.$20.$5W(this.get_$H5()+" module data point: Synced "+this.get_$4bA()+" conversations and "+this.$3Rl+" item parts")},$9cy:function(){this.$1rZ=[];this.$2qH=_a.$3n.$$(Boolean).$8A();this.$1sx=[];this.$2rq={};_c.$Q2.prototype.$9cy.call(this)},$7Vi:function(n){return n?_h.$27.$3Qa?n.IsInlineToNormalBody:n.IsInlineToUniqueBody:!1},$9U5:function(){$6me(this)},$7tI:function(n){$192(this,"SyncItems action completed event received for editable items (drafts)");for(var i=n.$Cm,r=0;r<i.length;r++){var t=i[r].Items;if(t&&t.length>0){_js.Trace.logInfo(_c.$1o.$A,"Setting item IsDataSynced flag to true for editable items");_e.$Bt.$2bn(t[0],CustomSyncData.$1rs,2);Array.add(this.$1rZ,t[0])}}this.$3Rl+=i.length;this.$h5()}};_c.$1Dd=function(n,t,i,r){_c.$1Dd.initializeBase(this,[n,[t],i,r])};_c.$1Dd.prototype={get_$Ra:function(){return 4},get_$8CF:function(){return!0},$9ma:function(n){return this.$Ay.$LY!==3&&!n},$7Vu:function(n){return!0}};_c.$10L=function(n,t,i,r){_c.$10L.initializeBase(this,[n,t,i,r])};function $6mf(n,t,i,r,u){if(i)if(r){for(var h=i,c=i,p=c.length,f=0;f<p;++f){var e=c[f];e.LastSuccessfulSyncTime=_a.$7.$EZ(_a.$7.get_$29());e.SyncMinimum=_h.$27.$186;e.SyncMaximum=_h.$27.$1IB}for(var l=r,w=l.length,o=0;o<w;++o){for(var a=l[o],v=!1,y=i,b=y.length,s=0;s<b;++s){var k=y[s];if(k.FolderId.Id===a.FolderId.Id){v=!0;break}}v||Array.add(h,a)}t.ModuleSpecificContext=h}else t.ModuleSpecificContext=i;else t.ModuleSpecificContext=r}_c.$10L.prototype={$7f2:function(n){var t=new _c.$1DY(this.get_$wO(),this.get_$Id(),_h.$27.$1UT,this.get_$8CF(),_c.$lA.isInstanceOfType(this.$Ay));n(t)},$876:function(){return new _e.$T0(this.$CO.get_$A8().get_$JM(),this.get_$A5j().get_$A4I(),this.get_$A5j().get_$A4J())},$9XB:function(n){this.set_$A5j(new _c.$gP(this.get_$A5W()));this.get_$A5j().$26f();var r=this.get_$A5j().get_$A4I().length;this.set_$A5l(this.get_$A5l()+this.get_$A5j().get_$A4J().length);if(r>0){this.set_$A5k(this.get_$A5k()+r);for(var i=this.get_$A5j().get_$A4K(),t=0;t<i.length;t++)Array.contains(this.get_$A5i(),i[t])||Array.add(this.get_$A5i(),i[t])}_c.$JE.prototype.$9XB.call(this,n)},$7do:function(){var n=new SyncState("ConversationSyncStateId",this.get_$A5j().get_$oo());$6mf(this,n,this.get_$A5j().get_$A4H(),this.get_$Id()?this.get_$Id().ModuleSpecificContext:null,this.get_$wO());return n},$7bT:function(){return null}};_c.$1De=function(n){_c.$1De.initializeBase(this,[n])};_c.$1De.prototype={get_$5fh:function(){return this.$U("is")},set_$5fh:function(n){$1M(this,"is",n);return n},$5O5:function(n){n&&$1M(this,"fs",n.join())}};_c.$11u=function(n,t,i,r){_c.$11u.initializeBase(this,[1,"Core.Models.Sync."]);this.set_$9vv(n);this.set_$9vx(t);this.set_$9hL(i);this.set_$9v5(r)};_c.$11u.prototype={get_$9vv:function(){return this.$U("TAC")},set_$9vv:function(n){$1M(this,"TAC",n);return n},get_$9vx:function(){return this.$U("TCC")},set_$9vx:function(n){$1M(this,"TCC",n);return n},get_$9v5:function(){return this.$U("TIS")},set_$9v5:function(n){$1M(this,"TIS",n);return n},get_$9hL:function(){return this.$U("SI")},set_$9hL:function(n){$1M(this,"SI",n);return n}};_c.$Hq=function(n,t,i,r){this.$$d_$82G=Function.createDelegate(this,this.$82G);this.$$d_$80L=Function.createDelegate(this,this.$80L);this.$$d_$80l=Function.createDelegate(this,this.$80l);_c.$Hq.initializeBase(this);_a.$4.$J(n,"notificationHandler");_a.$4.$J(t,"eventAggregator");_a.$4.$J(i,"syncManager");_a.$4.$J(r,"dataPointTracker");this.$M=t;this.$FC=n;this.$4K=i;this.$2ql=r;this.$14V=_a.$3n.$$(Array).$8A();this.$M.$IU(_a.$ih,this.$$d_$80l);this.$FC.$1H0("BackgroundSyncNotification",_c.$Hq.$24H,"BackgroundSyncNotification",this.$$d_$80L,2);this.$4K.$1Sf(20,this.$$d_$82G)};function $6lm(n,t){var f=t;var i=f.$2bY;var c=new Array(0);var l=new Array(0);var r=0,u=0;if(n.$14V.$Mj(i)){var k=n.$14V.get_$3q(i);n.$14V.$34(i);for(var a=_a.$3n.$$(Boolean).$8A(),v=k,d=v.length,e=0;e<d;++e){for(var y=v[e],p=y.$1WA,g=p.length,o=0;o<g;++o){var w=p[o];++u<=5&&Array.add(l,w);a.set_$3q(w.$4s.toString(),!0)}for(var b=y.$1XZ,nt=b.length,s=0;s<nt;++s){var h=b[s];a.$Mj(h.$4s.toString())?_js.Trace.logInfo(_c.$Hq.$24H,"Skip the later change with newly added Id: {0}",h.$4s.toString()):++r<=5&&Array.add(c,h)}}}_js.Trace.logInfo(_c.$Hq.$24H,"Raising BackgroundSyncCompleteEvent senderId:{0}, totalAddCount:{1}, totalChangeCount:{2}, Result:{3}",i,u,r,f.$Dn);n.$M.$9Yf(_a.$u5,new _a.$u5(i,f.$Dn,l,c,r+u));var tt=new _c.$11u(u,r,i,_a.$7.get_utcNow().$5R()/1e3);n.$2ql.$AN(tt)}_c.$Hq.prototype={$FC:null,$M:null,$4K:null,$2ql:null,$14V:null,$4c:function(){this.$M.$18g(_a.$ih,this.$$d_$80l);this.$FC.$1mN("BackgroundSyncNotification",this.$$d_$80L);this.$4K.$2BP(20,this.$$d_$82G)},$80L:function(n){$6lm(this,n)},$80l:function(n){_js.Trace.logInfo(_c.$Hq.$24H,"Receiving DbTransactionItemInfoEvent SyncInitiatorId:{0}, Add Count:{1}, Changes Count:{2}",n.$1UW,n.$1WA.length,n.$1XZ.length);var t;if(this.$14V.$Mj(n.$1UW)){t=this.$14V.get_$3q(n.$1UW);Array.add(t,n)}else t=[n];this.$14V.set_$3q(n.$1UW,t)},$82G:function(n){if(n.$Mq===5&&this.$14V.$A3p()>0){_js.Trace.logWarning(_c.$Hq.$24H,"ItemInfoCount= {0} when sync session completes",this.$14V.$A3p().toString());this.$14V=_a.$3n.$$(Array).$8A()}}};function CoreSyncComponent(){}CoreSyncComponent.prototype={$1YD:function(n,t,i){var r=this;n.$Ad(_c.$AC).$A5E(ISyncFolderSettingProcessor).$A5F().$A5G(function(){return new _c.$AC(n.$6OW(_a.$NW),n.$6OW(_0365f.$L))});var u=this;n.$Ad(_c.$10H).$A5E(ISyncController).$A5G(function(){return new _c.$10H(n.$6OW(_0365f.$L))});var f=this;n.$Ad(_c.$kW).$A5E(INotificationHandlerProxyFactory).$A5G(function(){return new _c.$kW});var e=this;n.$Ad(_c.$10O).$A5E(ISyncManagerFactory).$A5E(ISyncManagerSingleton).$A5F().$A5G(function(){return new _c.$10O(n.$6OW(ISyncFolderSettingProcessor),n.$6OW(ISyncController),n.$6OW(_a.$NW),n.$6OW(_h.$Na),n.$6OW(_a.NativeBridge),n.$6OW(IAttachmentsCleanupManager),_a.$g.$8s,n.$6OW(_a.$p),n.$6OW(_js.$CQ),n.$6OW(_0365f.$L),n.$6OW(_a.$3O),n.$6OW(_a.$Dl))})},$7sM:function(){return[]}};_c.$DR=function(n,t,i,r,u,f){this.$$d_$9tP=Function.createDelegate(this,this.$9tP);this.$$d_$81m=Function.createDelegate(this,this.$81m);_c.$DR.resolveInheritance();this.dispose=this.$1Q;_c.$DR.initializeBase(this,[n,t,i,r,u]);this.$2ML={};this.$2AR={};this.$5al=f;this.$67R=this.$7dq();this.get_$gW().$9Zw(this.$$d_$81m);$6mM(this)};function $4iM(n,t,i){if(t.id==="BackgroundSyncNotification"){var r=t;r.$Dn=i;return!0}return!1}function $6mM(n){var t=n.$MT;for(var i in t){var r={key:i,value:t[i]};var u=n.$MT[r.key];$4iN(n,u)}}function $4iN(n,t){if($4iL(n,t)){var i=t.get_$r();if(!$6(i)){_js.Trace.logInfo(_a.$0.$5q,"Granular notification is subscribed for folder id : {0}",i);n.$2ML[i]=!0}}}function $4iL(n,t){var r=t.get_$1Fq().toLowerCase();if(r===_c.$DR.$6PN){var i=t.$3K;return!$6(i)&&!$6(i.Filter)?i.Filter==="All":!0}else return r===_c.$DR.$58z}_c.$DR.prototype={$2ML:null,$2AR:null,$5al:!1,$67R:null,$5gV:0,get_$5ak:function(){return this.$5al},get_$34C:function(){return this.$5gV},set_$34C:function(n){this.$5gV=n;return n},get_$gW:function(){return this.$67R},get_$5TY:function(){return this.$2ML},$wj:function(n){_a.$4.$J(n,"notification");_js.Trace.logInfo(_a.$0.$5q,"Handling notification: {0}, ClientGenerated: {1}",n.id,n.clientGenerated);if(!n.clientGenerated){var i=this.$MT[n.id];var t=null;i?t=this.$2AR[i.get_$1Fq().toLowerCase()]:n.id==="BackgroundSyncNotification"&&(t=this.$2AR[n.id.toLowerCase()]);if(!$6(t)){var r=this;t(n,this,function(n){$4iM(r,n,1);_a.$eF.prototype.$wj.call(r,n)});return}_js.Trace.logInfo(_a.$0.$5q,"No Sync callback registered for notification: {0}",n.id)}_a.$eF.prototype.$wj.call(this,n)},$3KA:function(n){_js.Trace.logInfo(_a.$0.$5q,"[NotificationHandlerProxy::RegisterSubscription] Adding subscription id : {0}",n.get_$Hn());$4iN(this,n);_a.$eF.prototype.$3KA.call(this,n)},$81m:function(n,t){_a.$4.$J(n,"notification");_a.$4.$ou(n.clientGenerated,!0,"notification.ClientGenerated");($4iM(this,n,t)||!t)&&_a.$eF.prototype.$wj.call(this,n)},$9a0:function(n,t){_a.$4.$1G(n,"notificationType");_a.$4.$J(t,"callback");_js.Trace.logInfo(_a.$0.$5q,"Registering sync notification handler for notification type {0}",n);this.$2AR[n.toLowerCase()]=t},$9yD:function(n){_a.$4.$1G(n,"notificationType");_js.Trace.logInfo(_a.$0.$5q,"Unregistering sync notification handler for notification type {0}",n);$6(this.$2AR[n.toLowerCase()])||delete this.$2AR[n.toLowerCase()]},$9a1:function(n){_a.$4.$l(n,"syncManager");_js.Trace.logInfo(_a.$0.$5q,"Registering sync progress event handlers for all modules");for(var t=0;t<20;t++)n.$1Sf(t,this.$$d_$9tP)},$9yE:function(n){_a.$4.$l(n,"syncManager");_js.Trace.logInfo(_a.$0.$5q,"Unregistering sync progress event handlers for all modules");for(var t=0;t<20;t++)n.$2BP(t,this.$$d_$9tP)},$27I:function(n){var i=this.$MT[n];if(i&&$4iL(this,i)){var t=i.get_$r();if(!$6(t)&&!$6(this.$2ML[t])){_js.Trace.logInfo(_a.$0.$5q,"Removing granular notification entry for folder id : {0}",t);delete this.$2ML[t]}}_a.$eF.prototype.$27I.call(this,n)},$4c:function(){this.get_$gW().$9yC();_a.$eF.prototype.$4c.call(this)},$7dq:function(){return new _c.$Jz(50)},$9tP:function(n){_a.$4.$l(n,"e");this.get_$gW().$9Xd(n)}};_c.$kW=function(){};_c.$kW.$89V=function(n){var t=!1;var i="emailProxy";if(n&&n.$Mj(i)){var r=n.get_$3q(i);t="true"===r}return t};_c.$kW.prototype={$3s:null,$E:function(n,t,i,r){this.$3s||(this.$3s=new _c.$DR(n,t,i.get_$67N(),i.get_$4YV(),i.get_$3LN(),_c.$kW.$89V(r)));return this.$3s}};_c.$1BJ=function(n){_c.$1BJ.initializeBase(this,[7,0,!0,n])};_c.$1BJ.prototype={get_$1y:function(){return"ReconcileSyncContextId"},$4Vf:function(n){return n.$9my()}};_c.$10O=function(n,t,i,r,u,f,e,o,s,h,c,l){this.$E9=n;this.$2AP=t;this.$aL=i;this.$6p=r;this.$12=u;this.$56k=f;this.$La=e;this.$13=o;this.$4P=s;this.$2ES=h;this.$5B=c;this.$1J=l};_c.$10O.prototype={$E9:null,$2AP:null,$aL:null,$6p:null,$12:null,$56k:null,$La:null,$13:null,$4P:null,$2ES:null,$5B:null,$1J:null,$4K:null,$E:function(n,t,i,r,u,f){if(this.$4K){_js.Trace.logWarning(_a.$0.$DK,"Sync manager create called, but a sync manager already exists");this.$4K.dispose()}var e=new ExternalSyncDependencies(n,this.$aL,this.$6p,this.$E9,this.$12,this.$56k,this.$La,t,this.$13,i,r,this.$4P,this.$2ES,this.$2AP,f,this.$5B);var o=!!this.$5B&&this.$5B.$3u("SuperStart");this.$4K=new _c.$1o(e,u,this.$4P,this.$1J,o);OwaApplication.set_$5IG(this.$4K);return this.$4K},$ic:function(){return this.$4K}};_c.$9U.registerClass("_c.$9U",null,_h.$1Fr);_c.$H2.registerClass("_c.$H2",_c.$9U);_c.$1JS.registerClass("_c.$1JS",null,_a.$1HX);_c.$1Jl.registerClass("_c.$1Jl",_c.$1JS);_c.$11v.registerClass("_c.$11v",_c.$1Jl);_c.$u6.registerClass("_c.$u6",_a.$qf);_c.$u6.prototype.toString=_a.$qf.prototype.toString;_c.$Hm.registerClass("_c.$Hm",null,_c.$1Ft);_c.$1DO.registerClass("_c.$1DO",_c.$Hm);_c.$10u.registerClass("_c.$10u",_c.$9U);_c.$zQ.registerClass("_c.$zQ",_c.$1JS);_c.$lA.registerClass("_c.$lA",_c.$1JS);_c.$10H.registerClass("_c.$10H",null,ISyncController);_c.$10R.registerClass("_c.$10R");_c.$1Jk.registerClass("_c.$1Jk",_c.$10R);_c.$m0.registerClass("_c.$m0",_c.$1Jk);_c.$Jz.registerClass("_c.$Jz",null,_a.$1HV);_c.$1DV.registerClass("_c.$1DV",_c.$Hm);_c.$1Df.registerClass("_c.$1Df",_js.$147,_a.$1HY,Sys.IDisposable);_c.$12D.registerClass("_c.$12D",_c.$1JS);_c.$N3.registerClass("_c.$N3",_c.$1JS);_c.$1A8.registerClass("_c.$1A8",_c.$1JS);_c.$14p.registerClass("_c.$14p",_a.$T);_c.$14p.prototype.$9a=_a.$T.prototype.$9a;_c.$14z.registerClass("_c.$14z");_c.$of.registerClass("_c.$of",_c.$1JS);_c.$Ta.registerClass("_c.$Ta",_c.$1Jl);_c.$1BR.registerClass("_c.$1BR",_c.$1JS);_c.$1D.registerClass("_c.$1D",null,_c.$jl);_c.$gJ.registerClass("_c.$gJ",_c.$1D);_c.$10G.registerClass("_c.$10G",_c.$10R);_c.$1DR.registerClass("_c.$1DR",_c.$tP.$$(_g.$Jh));_c.$1DS.registerClass("_c.$1DS",_c.$JE.$$(_c.$1DR,_g.$Jh));_c.$1DT.registerClass("_c.$1DT",_c.$10R);_c.$1DU.registerClass("_c.$1DU",_c.$Hm);_c.$4G.registerClass("_c.$4G",_a.$T);_c.$4G.prototype.$9a=_a.$T.prototype.$9a;_c.$1DW.registerClass("_c.$1DW",_c.$4G);_c.$1DW.prototype.$9a=_a.$T.prototype.$9a;_c.$1DZ.registerClass("_c.$1DZ",_h.$FL,_a.$q0,_a.$jR);_c.$OM.registerClass("_c.$OM",_c.$Q2.$$(_c.$1DZ,Array,_g.$aK));_c.$1Da.registerClass("_c.$1Da",_c.$OM);_c.$1Db.registerClass("_c.$1Db",_c.$OM);_c.$1Dc.registerClass("_c.$1Dc",_c.$4G);_c.$1Dc.prototype.$9a=_a.$T.prototype.$9a;_c.$10J.registerClass("_c.$10J",_c.$1D);ExternalSyncDependencies.registerClass("ExternalSyncDependencies");_c.$1Dg.registerClass("_c.$1Dg",_c.$tP.$$(_g.$P5));_c.$1Dh.registerClass("_c.$1Dh",_c.$JE.$$(_c.$1Dg,_g.$P5));_c.$1Di.registerClass("_c.$1Di",_c.$10R);_c.$AC.registerClass("_c.$AC",null,ISyncFolderSettingProcessor);_c.$si.registerClass("_c.$si",_c.$Hm);_c.$1Dr.registerClass("_c.$1Dr",_c.$sf.$$(_g.$gW,_g.$m8));_c.$Yh.registerClass("_c.$Yh",_c.$1Jk);_c.$10P.registerClass("_c.$10P",_c.$Yh);_c.$ga.registerClass("_c.$ga",_h.$ol,_a.$q0,_a.$jR);_c.$JD.registerClass("_c.$JD",_c.$Q2.$$(_c.$ga,Array,_g.$7k));_c.$1Dt.registerClass("_c.$1Dt",_c.$JD);_c.$1Du.registerClass("_c.$1Du",_c.$JD);_c.$Yg.registerClass("_c.$Yg",_c.$sg.$$(_c.$1Dr,_g.$m8,_g.$7k));_c.$1Ds.registerClass("_c.$1Ds",_c.$Yg);_c.$1Dv.registerClass("_c.$1Dv",_c.$4G);_c.$1Dv.prototype.$9a=_a.$T.prototype.$9a;_c.$1Dw.registerClass("_c.$1Dw",_c.$Yg);_c.$10Q.registerClass("_c.$10Q",_c.$Yh);_c.$1Dx.registerClass("_c.$1Dx",_c.$sh.$$(_g.$7k));_c.$Md.registerClass("_c.$Md",null,_c.$1Fs);_c.$1Dz.registerClass("_c.$1Dz",_c.$tP.$$(_g.$RV));_c.$1E0.registerClass("_c.$1E0",_c.$JE.$$(_c.$1Dz,_g.$RV));_c.$1E1.registerClass("_c.$1E1",_c.$10R);_c.$1E9.registerClass("_c.$1E9",_c.$4G);_c.$1E9.prototype.$9a=_a.$T.prototype.$9a;_c.$sj.registerClass("_c.$sj");_c.$1EA.registerClass("_c.$1EA",_c.$Hm);_c.$ge.registerClass("_c.$ge",_c.$Hm);_c.$10S.registerClass("_c.$10S",_a.$T);_c.$10S.prototype.$9a=_a.$T.prototype.$9a;_c.$1ED.registerClass("_c.$1ED",_c.$tP.$$(_g.$cZ));_c.$1EE.registerClass("_c.$1EE",_c.$JE.$$(_c.$1ED,_g.$cZ));_c.$1EF.registerClass("_c.$1EF",_c.$10R);_c.$10I.registerClass("_c.$10I",_c.$m0);_c.$10K.registerClass("_c.$10K",_c.$m0);_c.$1Dm.registerClass("_c.$1Dm",_c.$10R);_c.$1E2.registerClass("_c.$1E2",_c.$tP.$$(_g.$L3));_c.$Me.registerClass("_c.$Me",_c.$JE.$$(_c.$1E2,_g.$L3));_c.$1E3.registerClass("_c.$1E3",_c.$10R);_c.$1DP.registerClass("_c.$1DP",_c.$tP.$$(_g.$gL));_c.$1DY.registerClass("_c.$1DY",_c.$sf.$$(_g.$gN,_g.$m1));_c.$gP.registerClass("_c.$gP",_c.$sh.$$(_g.$W0));_c.$9s.registerClass("_c.$9s",_c.$JE.$$(_c.$1DP,_g.$gL));_c.$D6.registerClass("_c.$D6",_c.$10R);_c.$1Dj.registerClass("_c.$1Dj",_c.$sf.$$(_g.$gS,_g.$m3));_c.$1Dl.registerClass("_c.$1Dl",_c.$JE.$$(_c.$1Dj,_g.$m3));_c.$1Do.registerClass("_c.$1Do");_c.$1E4.registerClass("_c.$1E4",_c.$sf.$$(_g.$gc,_g.$m9));_c.$1E6.registerClass("_c.$1E6",_c.$tP.$$(Array));_c.$1E7.registerClass("_c.$1E7",_c.$JE.$$(_c.$1E6,Array));_c.$1E8.registerClass("_c.$1E8",_c.$10R);_c.$KK.registerClass("_c.$KK",_c.$JE.$$(_c.$1E4,_g.$m9));_c.$IT.registerClass("_c.$IT",_c.$10R);_c.$sk.registerClass("_c.$sk",_c.$sf.$$(_g.$NJ,_g.$NL));_c.$1EB.registerClass("_c.$1EB",_c.$JE.$$(_c.$sk,_g.$NL));_c.$1EC.registerClass("_c.$1EC",_c.$10R);_c.$20.registerClass("_c.$20");_c.$10b.registerClass("_c.$10b",_c.$1JS);_c.$1o.registerClass("_c.$1o",_js.$147,_a.$1HW,Sys.IDisposable);_c.$10L.registerClass("_c.$10L",_c.$sg.$$(_c.$1DY,_g.$m1,_g.$W0));_c.$lz.registerClass("_c.$lz",_c.$10L);_c.$1Dd.registerClass("_c.$1Dd",_c.$10L);_c.$1De.registerClass("_c.$1De",_c.$4G);_c.$1De.prototype.$9a=_a.$T.prototype.$9a;_c.$11u.registerClass("_c.$11u",_a.$T);_c.$11u.prototype.$9a=_a.$T.prototype.$9a;_c.$Hq.registerClass("_c.$Hq",_js.$147);CoreSyncComponent.registerClass("CoreSyncComponent",null,_a.$1In);_c.$DR.registerClass("_c.$DR",_a.$eF,_a.$XM,Sys.IDisposable,_a.$1Gr);_c.$kW.registerClass("_c.$kW",null,INotificationHandlerProxyFactory);_c.$1BJ.registerClass("_c.$1BJ",_c.$1JS);_c.$10O.registerClass("_c.$10O",null,ISyncManagerFactory,ISyncManagerSingleton);_c.$9U.$Lg=_a.$0.$1lR;_c.$AC.$3TN=new Sys.EventHandlerList;_c.$AC.$Lg=_a.$0.$1lR;_c.$JD.$3oo=null;_c.$JD.$4He=null;_c.$4G.$3DF="m";_c.$4G.$40R="fts";_c.$4G.$4ZF="st";_c.$4G.$4ZA="ss";_c.$4G.$4ZC="sse";_c.$4G.$4Yy="se";_c.$4G.$4cX="u";_c.$4G.$3n3="d";_c.$4G.$4ad="syt";_c.$4G.$4Z7="sid";_c.$4G.$3ni="dic";_c.$4G.$4Pe="ric";_c.$4G.$3c5="aqcar";_c.$9s.$6ge=-7;_c.$9s.$mv=null;_c.$D6.$1q5=null;_c.$IT.$2n2=[];_c.$1o.$1tz=14;_c.$1o.$A=_a.$0.$DK;_c.$1o.$6aE=10;_c.$1o.$5k2=500;_c.$Hq.$24H=_a.$0.$3fF;_c.$DR.$6PN="RowNotification".toLowerCase();_c.$DR.$58z="CalendarItemNotification".toLowerCase()