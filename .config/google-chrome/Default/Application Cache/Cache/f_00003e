Type.registerNamespace("_z");_z.$81=function(n){this.$$d_$53l=Function.createDelegate(this,this.$53l);this.$$d_$8ZG=Function.createDelegate(this,this.$8ZG);this.$$d_$7Qt=Function.createDelegate(this,this.$7Qt);this.$$d_$36f=Function.createDelegate(this,this.$36f);this.$$d_$3eN=Function.createDelegate(this,this.$3eN);this.$$d_$7Ix=Function.createDelegate(this,this.$7Ix);this.$$d_$7Oo=Function.createDelegate(this,this.$7Oo);this.$$d_$7N7=Function.createDelegate(this,this.$7N7);this.$$d_$D6=Function.createDelegate(this,this.$D6);this.$156=new _b.$ox;_z.$81.initializeBase(this,[n]);this.$1Fj=null;this.$2AW=null;this.$1FV=null;this.$o7=null;this.$11s=null;this.$rp=null;this.$jk=null;this.$1yV=!1};function $4cV(n,t){if(n.$1RR)if(t){var i=n.get_$J().find("iframe").get(0);$8(i)||$8(i.contentWindow)||$8(i.contentWindow.document)||$8(i.contentWindow.document.documentElement)?_js.Trace.logWarning(_a.$0.$3P,"Editor - BindHtml5Droppable's iframeElement.ContentWindow.Document.DocumentElement is not accessible."):n.$1RR.$24P($(i.contentWindow.document.documentElement)[0])}else{var r=n.get_$J().find("textarea").get(0);r?n.$1RR.$24P($(r)[0]):_js.Trace.logWarning(_a.$0.$3P,"Editor - BindHtml5Droppable's textarea is not accessible.")}}function $4cX(n,t){if(n.$1RR)if(t){var i=n.get_$J().find("iframe").get(0);i&&i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement?n.$1RR.$4Em($(i.contentWindow.document.documentElement)[0]):_js.Trace.logWarning(_a.$0.$3P,"Editor - UnbindHtml5Droppable's iframeElement.ContentWindow.Document.DocumentElement is not accessible.")}else{var r=n.get_$J().find("textarea").get(0);r?n.$1RR.$4Em($(r)[0]):_js.Trace.logWarning(_a.$0.$3P,"Editor - UnbindHtml5Droppable's textarea is not accessible.")}}function $4cW(n,t){n.$WI=new _b.$DS(t)}function $3Jc(n,t){if(!n.$3Yj){var i=n.$WI.$3aI();var r=n.$WI.$3aH();var u=n.$WI.$7LX();var f=n.$WI.$7LW();n.$3Yj=t.offsetParent.offsetHeight-t.offsetTop-i-r-u-f}return n.$3Yj}function $6o6(n,t){if(_d.$lq.isInstanceOfType(t)){var i=t;n.$5r9(i.$x,i.$5tV)}else if(_d.$nV.isInstanceOfType(t)){var r=t;n.$8o0(r.$x)}else n.$7Dd(t)}function $6o7(n){_js.Trace.logInfo(_a.$0.$3P,"Editor ResetInsertCommandProperty From null to the insertCommand");$Q(n,"ResizeCommand")}_z.$81.prototype={$C3:!1,$1yV:!1,$2oo:!1,$2Mt:null,$JH:null,$673:null,$5w2:null,$60c:null,$1Fj:null,$2AW:null,$1FV:null,$7M:!1,$11s:null,$o7:null,$pf:!1,$rp:null,$Pk:!1,$1jP:null,$EK:null,$vS:null,$DS:null,$11A:null,$Cv:null,$1mR:null,$3Cb:!1,$48p:!1,$1RR:null,$jk:null,$168:null,$ks:null,$dv:0,$w2:null,$2Kn:null,$z:null,$1JI:0,$5cq:0,$5cp:0,$yA:!1,$WI:null,$Yj:!1,$mm:0,$3Yj:0,$r9:"0",$37L:!1,$US:null,$X7:!0,$LR:null,get_$91X:function(){return this.$48p},set_$91X:function(n){if(this.$48p!==n){this.$6sU(n);this.$48p=n}return n},get_$44r:function(){return this.$jk},set_$44r:function(n){if(!this.$jk){this.$jk=new _C(this.$$d_$D6,this.get_$1Y());$Q(this,"ResizeCommand")}return n},get_$er:function(){return this.$168},set_$er:function(n){if(n!==this.$168){this.$168=n;$Q(this,"InputFiles")}return n},get_$1gB:function(){return this.$ks},set_$1gB:function(n){if(n!==this.$ks){this.$ks=n;$Q(this,"Base64ImageContent")}return n},get_$2ag:function(){return this.$dv},set_$2ag:function(n){if(n!==this.$dv){this.$dv=n;$Q(this,"ClipboardImageSize")}return n},get_$2ah:function(){return this.$w2},set_$2ah:function(n){if(n!==this.$w2){this.$w2=n;$Q(this,"ClipboardImageType")}return n},get_$Cc:function(){return this.$JH},set_$Cc:function(n){if(n!==this.$JH){this.$JH=n;$Q(this,"Content")}return n},get_$3aZ:function(){return this.$1Fj},set_$3aZ:function(n){if(!this.$1Fj){this.$1Fj=new _C(this.$$d_$7N7,this.get_$1Y());$Q(this,"GetRawContentCommand")}return n},get_$1UU:function(){return this.$C3},set_$1UU:function(n){if(this.$C3!==n){this.$C3=n;this.$8nz();$Q(this,"IsPlainTextContent")}return n},get_$37T:function(){return this.$1yV},set_$37T:function(n){this.$1yV!==n&&(this.$1yV=n);return n},get_$7Op:function(){return this.$2AW},set_$7Op:function(n){if(!this.$2AW){this.$2AW=new _C(this.$$d_$7Oo,this.get_$1Y());$Q(this,"GetTextContentCommand")}return n},get_$3ZI:function(){return this.$1FV},set_$3ZI:function(n){if(!this.$1FV){this.$1FV=new _C(this.$$d_$7Ix,this.get_$1Y());$Q(this,"GetContentCommand")}return n},get_$2Qq:function(){return this.$11s},set_$2Qq:function(n){if(this.$11s!==n){this.$11s=n;$Q(this,"StringAttachContent")}return n},get_$21A:function(){return this.$pf},set_$21A:function(n){if(this.$pf!==n){this.$pf=n;$Q(this,"WasStringAttachments")}return n},get_$57b:function(){return this.$1mR},set_$57b:function(n){if(this.$1mR!==n){this.$1mR=n;$Q(this,"InsertionContent");this.get_$G5()||(this.$3Cb=!0)}return n},get_$7WD:function(){return this.$rp},set_$7WD:function(n){if(!this.$rp){this.$rp=new _C(this.$$d_$3eN,this.get_$1Y());$Q(this,"InsertContentCommand")}return n},get_$4Bk:function(){return""},set_$4Bk:function(n){this.$65D(!0,n);return n},get_$4Bm:function(){return""},set_$4Bm:function(n){this.$65D(!1,n);return n},get_$28F:function(){return null},set_$28F:function(n){return n},get_$CL:function(){return this.$7M},set_$CL:function(n){this.$7M=n;$Q(this,"IsInitialized");return n},get_$EC:function(){return this.$2oo},set_$EC:function(n){if(this.$2oo!==n){this.$2oo=n;if(n&&this.get_$b()){var t=this.get_$b().$j.get_$4D();(t===1||t===2||t===3)&&this.$8tC()}}return n},get_$10z:function(){return this.$2Mt},set_$10z:function(n){this.$2Mt=n;_js.$8.$c(this.$2Mt)||this.$2oo||this.$8zX();return n},get_$3a2:function(){return this.$US},set_$3a2:function(n){if(n!==this.$US){this.$US=n;$Q(this,"GetLinkPreviewRequest")}return n},get_$1pK:function(){return null},set_$1pK:function(n){n&&this.$7WF(n);return n},get_$12o:function(){return this.$LR},set_$12o:function(n){if(n!==this.$LR){this.$LR=n;$Q(this,"YouTubePlayerAnchorClicked")}return n},get_$4jL:function(){return null},set_$4jL:function(n){n&&$6o6(this,n);return n},get_$1nI:function(){return this.$yA},set_$1nI:function(n){if(n!==this.$yA){this.$yA=n;$Q(this,"IsExtendable")}return n},get_$4uA:function(){return this.$r9},set_$4uA:function(n){if(this.$r9!==n){this.$r9=n;$Q(this,"EditorTabIndex")}return n},get_$1N:function(){_js.Trace.logWarning(_a.$0.$3P,"AbstractEditor.Text does not have an implementation for get Text(), inheriting classes can override this if needed.");return""},set_$1N:function(n){_js.Trace.logWarning(_a.$0.$3P,"AbstractEditor.Text does not have an implementation for set Text(), inheriting classes can override this if needed.");return n},get_$20I:function(){return this.$673},set_$20I:function(n){this.$673=n;return n},get_$1xA:function(){return this.$5w2},set_$1xA:function(n){this.$5w2=n;return n},get_$1Aa:function(){return this.$60c},set_$1Aa:function(n){this.$60c=n;return n},$Fe:function(){this.$Pk=!0},$gC:function(){this.$Pk=!1},$Rx:function(){},$3eN:function(){if(_js.$8.$c(this.$1mR)){_js.Trace.logInfo(_a.$0.$3P,"Attempt to insert empty content, operation ignored.");return}if(this.get_$G5())this.$3Cb=!1;else{this.$3Cb=!0;return}this.$5r9(this.$1mR,!1)},$65D:function(n,t){this.$8o1(n,t)},$D6:function(){_js.Trace.logWarning(_a.$0.$3P,"AbstractEditor.Resize does not have an implementation for Resize(), inheriting classes can override this if needed.")},$9CD:function(n){_js.Trace.logWarning(_a.$0.$3P,"AbstractEditor.UnbindCommands does not have an implementation for UnbindCommands(), inheriting classes can override this if needed.")},$4hj:function(n){_js.Trace.logWarning(_a.$0.$3P,"AbstractEditor.BindCommands does not have an implementation for BindCommands(), inheriting classes can override this if needed.")},$N7:function(){_js.Trace.logWarning(_a.$0.$3P,"AbstractEditor.Focus is not implemented");return!1},$8y0:function(n){this.$1RR=n},$8Ra:function(){},$8RZ:function(){},$8YH:function(n){n.dataTransfer.dropEffect=this.$156.$39("move",null)},$8YF:function(n){n.dataTransfer.dropEffect=this.$156.$39("move",null)},$8YG:function(n){n.dataTransfer.dropEffect=this.$156.$39("move",null)},$8YJ:function(n,t){var i=!1;t.val=!1;if(!$8(n)&&!$8(n.dataTransfer)){var u=n.dataTransfer;var r=n.dataTransfer.getData("Text");if(_js.$8.$14(r))if(_a.UserAgent.getInstance().get_$28z()){if(!$8(u.files)){this.set_$er(new _h.$YW(u.files));if(this.$2Kn){this.$2Kn.$s();t.val=!0}i=!0}}else{_js.Trace.logInfo(_a.$0.$3P,"Your browser does not support FileAPI, so drag-and-drop functionality is not available.");if(this.$z){this.$z.$5c(680);this.$z.$2r(680)}i=!0}else if(this.$o7&&r.startsWith("{")&&r.endsWith("}")){this.set_$2Qq(r);this.$o7.$s();i=this.$pf;t.val=i;this.set_$21A(!1)}}return i},$8tC:function(){},$8o0:function(n){},$8o1:function(n,t){},$6sU:function(n){},$8nz:function(){},$8zX:function(){},$7Dd:function(n){},$7WF:function(n){},$53l:function(n){this.$36f()},$8ZG:function(n){var t=new _a.$A3(n);if(t&&!!(t.get_$6a()===9&!t.$LH())){this.set_$57b("    ");this.$3eN();t.$9U()}this.$36f()},$3xm:function(){_js.Trace.logInfo(_a.$0.$3P,"Editor - DataContextUpdated");_js.$F.prototype.$3xm.call(this);if(!this.get_$b()){this.$1FV=null;this.$1Fj=null;this.$rp=null}$6o7(this)},$Iu:function(){this.$3Cb&&this.$3eN();_js.$6.prototype.$Iu.call(this)},$7Qt:function(n){_js.$K.get_$L().$21(_a.$0.$3P,"HandleHeightEvent",this.$$d_$36f,0)}};_z.$7h=function(n,t){this.$$d_$7Qd=Function.createDelegate(this,this.$7Qd);this.$$d_$53l=Function.createDelegate(this,this.$53l);this.$$d_$53h=Function.createDelegate(this,this.$53h);_z.$7h.initializeBase(this,[n]);this.$G=t;this.$tf=null;this.$8o=$(window.document.createElement("Textarea"));$4cW(this,this.$8o);var i=this;this.$8o.change(function(n){$6o8(i)});this.$8o.addClass("textarea");this.get_$J().append(this.$8o);this.set_$1nI(!0);this.$53i=new _C(this.$$d_$53h,this.get_$1Y())};_z.$7h.$5CX=function(n){var t=n.instance;if(n.newValue){t.$8o.attr("readonly","true");t.$8o.addClass("textboxDisabled")}else{t.$8o.removeAttr("readonly");t.$8o.removeClass("textboxDisabled")}};function $6o8(n){n.$tf&&n.$tf.$s()}function $4cY(n){n.$8o.unbind("paste");n.$8o.unbind("cut");n.$8o.unbind("keyup");n.$8o.unbind("keydown");_a.UserAgent.getInstance().$8O&&n.$8o.unbind("beforedeactivate")}function $4cZ(n,t){n.$8o.val(t);n.set_$Cc(t);n.$36f()}function $3Jd(n){if(!n.$1v0){n.$1v0=n.$8o.css("height");_js.Trace.logInfo(_a.$0.$3P,"ExtendableEditor get original height "+n.$1v0)}}_z.$7h.prototype={$tf:null,$hI:null,$8o:null,$OE:null,$EA:null,$2fX:!1,$53i:null,$1G1:!1,$G:null,$1v0:null,$1Qy:!1,$279:!1,$45D:!1,get_$C4:function(){return this.$W(_z.$7h.$1oD)},set_$C4:function(n){this.$N(_z.$7h.$1oD,n);return n},get_$IF:function(){return this.$W(_z.$7h.$1y2)},set_$IF:function(n){this.$N(_z.$7h.$1y2,n);return n},get_$5gj:function(){return this.$tf},set_$5gj:function(n){if(this.$tf!==n){this.$tf=n;$Q(this,"OnContentChangedCommand")}return n},get_$33P:function(){return this.$JH},set_$33P:function(n){if(n!==this.$JH){$4cZ(this,n);$9G(this,"RawContent","TextContent")}return n},get_$660:function(){return this.$JH},set_$660:function(n){n!==this.$JH&&$4cZ(this,n);return n},get_$28F:function(){return this.$OE},set_$28F:function(n){if(this.$OE!==n){if(this.$OE&&this.$OE.length>0)for(var r=this.$OE.split(" "),t=0;t<r.length;t++)this.$8o.removeClass(r[t]);this.$OE=n;if(this.$OE&&this.$OE.length>0)for(var u=this.$OE.split(" "),i=0;i<u.length;i++)this.$8o.addClass(u[i]);"TouchNarrow"===this.$G.get_$O()&&this.$8o.css("line-height",String.format("23{0}","px"));$Q(this,"EditorCssClass")}return n},get_$Gb:function(){return this.$EA},set_$Gb:function(n){this.$EA=n;$Q(this,"EnterCommand");return n},get_$7Ct:function(){return this.$2fX},set_$7Ct:function(n){this.$2fX=n;$Q(this,"EnterWithoutLineBreak");return n},$36f:function(){if(this.$yA)if(this.$Pk&&this.$WI&&this.get_$b()&&!this.get_$b().$bk){this.$Yj=!1;$3Jd(this);var n;var t=!1;if(this.$mm){n=this.$WI.$3ae();_js.Trace.logInfo(_a.$0.$3P,"ExtendableEditor get current scroll height "+n.toString()+", last scroll height "+this.$mm.toString())}else{this.$mm=this.$WI.$3ae();n=this.$mm;t=!0;_js.Trace.logInfo(_a.$0.$3P,"ExtendableEditor get current scroll height and setup last scroll height to "+n.toString())}if(n){if(n!==this.$mm||t){var i=this.$WI.$3aI();var r=this.$WI.$3aH();var u=n-i-r;this.$8o.css("height",u+"px");_js.Trace.logInfo(_a.$0.$3P,"ExtendableEditor set new height "+u.toString()+" = Scroll height "+n.toString()+" - padding top "+i.toString()+" - padding bottom "+r.toString());this.$mm=n}}else{this.$Yj=!0;_js.Trace.logInfo(_a.$0.$3P,"ExtendableEditor has scroll height 0, which means it is not visible yet, set the deferred set height flag.")}}else{this.$Yj=!0;_js.Trace.logInfo(_a.$0.$3P,"Remember a deferred request to set height")}else _js.Trace.logInfo(_a.$0.$3P,"Skip SetHeight since the ExtendableEditor is not extendable")},$D6:function(){if(!this.$37L){var i=this.$WI.$3ae();var r=this.$WI.$3aI();var u=this.$WI.$3aH();var t=i-r-u;var n=-1;switch(this.$G.get_$O()){case"TouchWide":n=this.$5cq;break;case"TouchNarrow":n=this.$5cp;break;default:throw Error.argument("Current layout","Unsupported layout: "+this.$G.get_$O());}t<n&&(t=n);$3Jd(this);this.$8o.css("height",t+"px")}},$Fe:function(){_js.Trace.logInfo(_a.$0.$d,"ExtendableEditor.PostTransitionIn");_z.$81.prototype.$Fe.call(this);this.$48I();if(_a.UserAgent.getInstance().$EU.$7b===5||_a.UserAgent.getInstance().$EU.$7b===3&&_y.$j.$g.get_$O()!=="Mouse"){var n=this;_js.$K.get_$L().$21(_a.$0.$d,"RemoveBodyFocusHandler",function(){n.$36e()},500)}else this.$36e();this.$Yj&&this.$36f()},$N7:function(){this.$8o.focus();return!0},$6uh:function(){this.$8o.blur()},$48I:function(){if(!this.$1G1){this.$8o.bind("paste",this.$$d_$7Qt);this.$8o.bind("cut",this.$$d_$7Qt);this.$8o.keydown(this.$$d_$8ZG);this.$8o.keyup(this.$$d_$53l);_a.UserAgent.getInstance().$8O&&this.$8o.bind("beforedeactivate",this.$$d_$7Qd);this.$1G1=!0}},$36e:function(){var n=this.$8o?this.$8o[0]:null;if(this.$45D||this.$279){_js.Trace.logInfo(_a.$0.$3P,"Skipping set full screen height and reset deferred set full screen height since we have already restored original height or has a deferred restore.");this.$1Qy=!1}else if(n&&n.offsetParent&&this.$WI){this.$1Qy=!1;$3Jd(this);var t=$3Jc(this,n);this.$8o.css("height",t+"px");_js.Trace.logInfo(_a.$0.$3P,"Set full screen height "+t);this.$mm=0;this.$36f()}else{_js.Trace.logInfo(_a.$0.$3P,"Skipping set height to full screen, set deferred flag");this.$1Qy=!0}},$8tC:function(){this.$1Qy=!1;if(this.$8o&&this.$1v0&&this.$Pk&&this.get_$b()&&!this.get_$b().$bk){this.$279=!1;this.$45D=!0;_js.Trace.logInfo(_a.$0.$3P,"Restore to original height "+this.$1v0);this.$8o.css("height",this.$1v0);this.$mm=0;this.$36f()}else{this.$279=!0;_js.Trace.logInfo(_a.$0.$3P,"Skip restore to original height")}},$Iu:function(){_z.$81.prototype.$Iu.call(this);this.set_$Me(2);this.$Pk&&this.$48I();this.get_$IF()&&this.$N7();this.$279?this.$8tC():this.$1Qy&&this.$36e();this.$Yj&&this.$36f();this.$8o&&!_js.$8.$c(this.$1jP)&&this.$8o.attr("aria-label",this.$1jP);if(this.$8o&&this.$r9){var n=this.$8o.get(0);var t=parseInt(this.$r9);n.tabIndex=t}this.set_$CL(!0)},$I4:function(){$4cY(this);this.set_$CL(!1);this.$1G1=!1;this.$45D=!1;this.$1Qy=!1;this.get_$b()&&_d.$AA.isInstanceOfType(this.get_$b())&&this.$G&&"TouchNarrow"===this.$G.get_$O()&&this.get_$b().$8tH()},$53l:function(n){if(!this.$2fX&&this.$EA&&this.$EA.$2K){var t=new _a.$A3(n);t.get_$6a()!==13||t.$LH()||this.$53h()}this.get_$b()&&_d.$AA.isInstanceOfType(this.get_$b())&&this.$G&&"TouchNarrow"===this.$G.get_$O()&&this.get_$b().$8js();_z.$81.prototype.$53l.call(this,n)},$7Qd:function(n){$8(window.document.selection)||(this.$hI=document.selection.createRange())},$59:function(){$4cY(this);this.$1G1=!1;_js.$F.prototype.$59.call(this)},$5r9:function(n,t){var r;var u;var f=this.$8o.val();if($8(window.document.selection)){r=this.$8o.prop("selectionStart");u=t?this.$8o.prop("selectionEnd"):r;this.$8o.val(f.substring(0,r)+n+f.substr(u));this.$8o.get(0).focus()}else{this.$8o.get(0).focus();var i=this.$hI;if(!i)if(document.selection.type!=="None")i=document.selection.createRange();else{var e=this.$8o.get(0);i=e.createTextRange();i.collapse(!1)}var o=i.duplicate();i.text=n;i.collapse(!0);i.moveToBookmark(o.getBookmark());try{i.select()}catch(s){_js.Trace.logException(this.get_$1Y(),s,"Failed to select range")}}this.$7N7();this.$36f()},$7Oo:function(){this.$7Ix()},$7N7:function(){this.$7Ix()},$7Ix:function(){this.set_$Cc(this.$8o.val());$Q(this,"RawContent");$Q(this,"TextContent")},$i6:function(){if(!this.$2fX)return _js.$F.prototype.$i6.call(this);var n=new _o365c.$P;n.set_$T("ENTER");n.$1z=0;n.$5a=this.$53i;n.$VX=!0;var t=new _o365c.$1V;t.set_$26([n]);return[t]},$8o0:function(n){var t=this.$8o.val();var i=this.$8o.prop("selectionStart");var r=this.$8o.prop("selectionEnd");this.$8o.val(n+t);this.$8o.prop("selectionStart",i+n.length);this.$8o.prop("selectionEnd",r+n.length);this.$7N7();this.$36f()},$53h:function(){if(this.$EA&&this.$EA.$2K){var n=this.$8o.val();_js.$8.$c(n)||(n=n.trimEnd());this.set_$Cc(n);this.$EA.$s();this.$8o.val("")}}};_z.$81.registerClass("_z.$81",_js.$6,_b.$11t);_z.$7h.registerClass("_z.$7h",_z.$81);_z.$7h.$1oD=new _H("IsReadOnly",Boolean,_z.$7h,!1,_z.$7h.$5CX,null);_z.$7h.$1y2=new _H("SetFocusOnActive",Boolean,_z.$7h)